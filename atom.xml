<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Hexo</title>
  
  
  <link href="http://zcl0219.github.io/atom.xml" rel="self"/>
  
  <link href="http://zcl0219.github.io/"/>
  <updated>2025-04-16T17:21:22.310Z</updated>
  <id>http://zcl0219.github.io/</id>
  
  <author>
    <name>GGBond</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>VDN</title>
    <link href="http://zcl0219.github.io/2025/04/17/VDN/"/>
    <id>http://zcl0219.github.io/2025/04/17/VDN/</id>
    <published>2025-04-16T17:21:22.000Z</published>
    <updated>2025-04-16T17:21:22.310Z</updated>
    
    
    
    
    
  </entry>
  
  <entry>
    <title>å¼ºåŒ–å­¦ä¹ ç»¼è¿°</title>
    <link href="http://zcl0219.github.io/2025/04/16/%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0%E7%BB%BC%E8%BF%B0/"/>
    <id>http://zcl0219.github.io/2025/04/16/%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0%E7%BB%BC%E8%BF%B0/</id>
    <published>2025-04-16T15:50:40.000Z</published>
    <updated>2025-04-16T17:11:33.913Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å¤šæ™ºèƒ½ä½“å¼ºåŒ–å­¦ä¹ é€šä¿¡æ–¹æ³•ç»¼è¿°"><a href="#å¤šæ™ºèƒ½ä½“å¼ºåŒ–å­¦ä¹ é€šä¿¡æ–¹æ³•ç»¼è¿°" class="headerlink" title="å¤šæ™ºèƒ½ä½“å¼ºåŒ–å­¦ä¹ é€šä¿¡æ–¹æ³•ç»¼è¿°"></a>å¤šæ™ºèƒ½ä½“å¼ºåŒ–å­¦ä¹ é€šä¿¡æ–¹æ³•ç»¼è¿°</h2><h3 id="æ‘˜è¦"><a href="#æ‘˜è¦" class="headerlink" title="æ‘˜è¦"></a>æ‘˜è¦</h3><p>é€šä¿¡æ˜¯åè°ƒå¤šä¸ªæ™ºèƒ½ä½“è¡Œä¸ºã€æ‹“å®½å®ƒä»¬å¯¹ç¯å¢ƒçš„è®¤è¯†ä»¥åŠæ”¯æŒå®ƒä»¬åä½œçš„æœ‰æ•ˆæœºåˆ¶ã€‚åœ¨å¤šæ™ºèƒ½ä½“æ·±åº¦å¼ºåŒ–å­¦ä¹ ï¼ˆMADRLï¼‰é¢†åŸŸï¼Œæ™ºèƒ½ä½“å¯ä»¥é€šè¿‡é€šä¿¡æ¥æé«˜æ•´ä½“å­¦ä¹ æ€§èƒ½å¹¶å®ç°å…¶ç›®æ ‡ã€‚æ™ºèƒ½ä½“å¯ä»¥ä¸æ‰€æœ‰æ™ºèƒ½ä½“æˆ–ç‰¹å®šæ™ºèƒ½ä½“ç»„é€šä¿¡ï¼Œæˆ–è€…æ ¹æ®ç‰¹å®šçº¦æŸæ¡ä»¶è¿›è¡Œé€šä¿¡ã€‚éšç€ MADRL é€šä¿¡ï¼ˆComm-MADRLï¼‰ç ”ç©¶å·¥ä½œçš„ä¸æ–­å¢å¤šï¼Œç›®å‰ç¼ºä¹ä¸€ç§ç³»ç»Ÿæ€§å’Œç»“æ„åŒ–çš„æ–¹æ³•æ¥åŒºåˆ†å’Œåˆ†ç±»ç°æœ‰çš„ Comm-MADRL æ–¹æ³•ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å›é¡¾äº† Comm-MADRL é¢†åŸŸçš„æœ€æ–°ç ”ç©¶æˆæœï¼Œå¹¶è€ƒè™‘äº†åœ¨è®¾è®¡å’Œå¼€å‘å¤šæ™ºèƒ½ä½“å¼ºåŒ–å­¦ä¹ ç³»ç»Ÿä¸­å¯èƒ½å‘æŒ¥ä½œç”¨çš„é€šä¿¡çš„å„ä¸ªæ–¹é¢ã€‚è€ƒè™‘åˆ°è¿™äº›æ–¹é¢ï¼Œæˆ‘ä»¬æå‡ºäº† 9 ä¸ªç»´åº¦ï¼Œæ²¿ç€è¿™äº›ç»´åº¦å¯ä»¥å¯¹ Comm-MADRL æ–¹æ³•è¿›è¡Œåˆ†æã€å¼€å‘å’Œæ¯”è¾ƒã€‚é€šè¿‡å°†ç°æœ‰å·¥ä½œæŠ•å°„åˆ°å¤šç»´ç©ºé—´ä¸­ï¼Œæˆ‘ä»¬å‘ç°äº†ä¸€äº›æœ‰è¶£çš„è¶‹åŠ¿ã€‚ æˆ‘ä»¬è¿˜é€šè¿‡æ¢ç´¢å¯èƒ½æ€§çš„ç»„åˆï¼Œæå‡ºäº†ä¸€äº›è®¾è®¡æœªæ¥ Comm-MADRL ç³»ç»Ÿçš„åˆ›æ–°æ–¹å‘ã€‚</p><h3 id="1-å¼•è¨€"><a href="#1-å¼•è¨€" class="headerlink" title="1. å¼•è¨€"></a>1. å¼•è¨€</h3><p>è®¸å¤šç°å®åœºæ™¯ï¼Œå¦‚è‡ªåŠ¨é©¾é©¶<sup>[1]</sup>ã€ä¼ æ„Ÿå™¨ç½‘ç»œ[2]ã€æœºå™¨äºº[3]å’Œæ¸¸æˆ[4, 5]ï¼Œéƒ½å¯ä»¥å»ºæ¨¡ä¸ºå¤šæ™ºèƒ½ä½“ç³»ç»Ÿã€‚è¿™äº›å¤šæ™ºèƒ½ä½“ç³»ç»Ÿå¯ä»¥é€šè¿‡å¤šæ™ºèƒ½ä½“å¼ºåŒ–å­¦ä¹ ï¼ˆMARLï¼‰æŠ€æœ¯è¿›è¡Œè®¾è®¡å’Œå¼€å‘ï¼Œä»¥å­¦ä¹ å•ä¸ªæ™ºèƒ½ä½“çš„è¡Œä¸ºï¼Œè¿™äº›è¡Œä¸ºå¯ä»¥æ˜¯åˆä½œï¼Œç«äº‰ï¼Œæˆ–è€…å®ƒä»¬çš„æ··åˆä½“ã€‚ç”±äºæ™ºèƒ½ä½“é€šå¸¸åˆ†å¸ƒåœ¨ç¯å¢ƒä¸­ï¼Œå®ƒä»¬åªèƒ½è®¿é—®å±€éƒ¨è§‚å¯Ÿè€Œä¸æ˜¯ç¯å¢ƒçš„å®Œæ•´çŠ¶æ€ï¼Œå› æ­¤åœ¨å¤šæ™ºèƒ½ä½“å¼ºåŒ–å­¦ä¹ ï¼ˆMARLï¼‰ä¸­ï¼Œéƒ¨åˆ†å¯è§‚æµ‹æ€§æˆä¸ºä¸€ä¸ªåŸºæœ¬å‡è®¾[6-8]ã€‚æ­¤å¤–ï¼ŒMARL è¿˜é¢ä¸´ç€éå¹³ç¨³é—®é¢˜[9]ï¼Œå› ä¸ºæ¯ä¸ªæ™ºèƒ½ä½“éƒ½é¢ä¸´ç€å—å…¶ä»–æ™ºèƒ½ä½“å˜åŒ–å’Œé€‚åº”ç­–ç•¥å½±å“çš„åŠ¨æ€ç¯å¢ƒã€‚é€šä¿¡è¢«è§†ä¸ºè§£å†³ MARL ä¸­éƒ¨åˆ†å¯è§‚æµ‹æ€§å’Œéå¹³ç¨³é—®é¢˜çš„å…³é”®æ‰‹æ®µã€‚æ™ºèƒ½ä½“å¯ä»¥äº¤æµä¸ªäººä¿¡æ¯ï¼Œä¾‹å¦‚è§‚å¯Ÿã€æ„å›¾ã€ç»éªŒæˆ–æ´¾ç”Ÿç‰¹å¾ï¼Œä»è€Œå¯¹ç¯å¢ƒæœ‰æ›´å…¨é¢çš„äº†è§£ï¼Œè¿™åè¿‡æ¥åˆä½¿ä»–ä»¬èƒ½å¤Ÿåšå‡ºæ˜æ™ºçš„å†³ç­–[9, 10]ã€‚</p><p>ç”±äºæ·±åº¦å­¦ä¹ [11]åŠå…¶åœ¨å¼ºåŒ–å­¦ä¹ [12]ä¸­çš„åº”ç”¨æœ€è¿‘çš„æˆåŠŸï¼Œå¤šæ™ºèƒ½ä½“æ·±åº¦å¼ºåŒ–å­¦ä¹ ï¼ˆMADRLï¼‰è¿‘å¹´æ¥å–å¾—äº†å·¨å¤§æˆå°±ï¼Œå…¶ä¸­æ™ºèƒ½ä½“å¯ä»¥å¤„ç†é«˜ç»´æ•°æ®ï¼Œå¹¶åœ¨å¤§çŠ¶æ€å’ŒåŠ¨ä½œç©ºé—´ä¸­å…·æœ‰æ³›åŒ–èƒ½åŠ›[7, 8]ã€‚æˆ‘ä»¬æ³¨æ„åˆ°ï¼Œå¤§é‡ç ”ç©¶å·¥ä½œé›†ä¸­åœ¨å…·æœ‰é€šä¿¡çš„å­¦ä¹ ä»»åŠ¡ä¸Šï¼Œè¿™äº›ä»»åŠ¡æ—¨åœ¨é€šè¿‡é€šä¿¡å’Œå…±äº«ä¿¡æ¯æ¥å­¦ä¹ è§£å†³ç‰¹å®šé¢†åŸŸçš„ä»»åŠ¡ï¼Œå¦‚å¯¼èˆªã€äº¤é€šå’Œè§†é¢‘æ¸¸æˆã€‚æ®æˆ‘ä»¬æ‰€çŸ¥ï¼Œç›®å‰è¿˜æ²¡æœ‰æ¶µç›–å¤šæ™ºèƒ½ä½“æ·±åº¦å¼ºåŒ–å­¦ä¹ ï¼ˆComm-MADRLï¼‰ä¸­å…³äºå…·æœ‰é€šä¿¡çš„å­¦ä¹ ä»»åŠ¡æœ€æ–°å·¥ä½œçš„ç»¼è¿°æ–‡çŒ®ã€‚æ—©æœŸçš„ç»¼è¿°è€ƒè™‘äº†é€šä¿¡åœ¨å¤šæ™ºèƒ½ä½“å¼ºåŒ–å­¦ä¹ ï¼ˆMARLï¼‰ä¸­çš„ä½œç”¨ï¼Œä½†å°†å…¶è§†ä¸ºé¢„å®šä¹‰çš„ï¼Œè€Œä¸æ˜¯å­¦ä¹ ä¸»é¢˜[13-15]ã€‚å¤§å¤šæ•° Comm-MADRL ç»¼è¿°ä»…æ¶µç›–å°‘é‡ç ”ç©¶å·¥ä½œï¼Œæ²¡æœ‰æå‡ºä¸€ä¸ªç²¾ç»†çš„åˆ†ç±»ç³»ç»Ÿæ¥æ¯”è¾ƒå’Œåˆ†æå®ƒä»¬ã€‚åœ¨åˆä½œåœºæ™¯ä¸­ï¼ŒHernandez-Leal ç­‰äºº [16] ä½¿ç”¨å­¦ä¹ é€šä¿¡æ¥è¡¨ç¤ºå­¦ä¹ é€šä¿¡åè®®çš„é¢†åŸŸï¼Œä»¥ä¿ƒè¿›æ™ºèƒ½ä½“çš„åˆä½œã€‚æˆ‘ä»¬å‘ç°çš„å”¯ä¸€ä¸€ä»½å°†ä¸€äº›æ—©æœŸå·¥ä½œåˆ†ç±»åˆ° Comm-MADRL çš„ç»¼è¿°æ¥è‡ª Gronauer å’Œ Diepold [17]ï¼Œå®ƒåŸºäºåŒºåˆ†æ¶ˆæ¯æ˜¯å¦è¢«æ‰€æœ‰æ™ºèƒ½ä½“ã€ä¸€ç»„æ™ºèƒ½ä½“æˆ–æ™ºèƒ½ä½“ç½‘ç»œæ¥æ”¶ã€‚ç„¶è€Œï¼ŒComm-MADRL çš„å…¶ä»–æ–¹é¢ï¼Œå¦‚æ¶ˆæ¯ç±»å‹å’Œè®­ç»ƒèŒƒå¼ï¼Œå¯¹äºé€šä¿¡è‡³å…³é‡è¦ï¼Œå¯ä»¥å¸®åŠ©æè¿°ç°æœ‰çš„é€šä¿¡åè®®ï¼Œå´è¢«å¿½ç•¥äº†ã€‚å› æ­¤ï¼Œå…³äºå…·æœ‰é€šä¿¡çš„å­¦ä¹ ä»»åŠ¡çš„è¿‘æœŸç»¼è¿°ä¸­ï¼Œæ‰€å®¡æŸ¥çš„è®ºæ–‡ç›¸å½“æœ‰é™ï¼Œæå‡ºçš„åˆ†ç±»è¿‡äºç‹­çª„ï¼Œæ— æ³•åŒºåˆ† Comm-MADRL ä¸­çš„ç°æœ‰å·¥ä½œã€‚å¦ä¸€æ–¹é¢ï¼Œè¿˜æœ‰ä¸€ä¸ªå¯†åˆ‡ç›¸å…³çš„ç ”ç©¶é¢†åŸŸï¼Œå³æ¶Œç°è¯­è¨€/é€šä¿¡ï¼Œå®ƒä¹Ÿé€šè¿‡å„ç§å¼ºåŒ–å­¦ä¹ æŠ€æœ¯è€ƒè™‘é€šè¿‡å­¦ä¹ é€šä¿¡ã€‚[18] ä¸ Comm-MADRL ä¸åŒï¼Œæ¶Œç°è¯­è¨€ç ”ç©¶çš„ä¸»è¦ç›®æ ‡æ˜¯å­¦ä¹ ä¸€ç§ç¬¦å·è¯­è¨€ã€‚ç„¶è€Œï¼Œæ¶Œç°è¯­è¨€ç ”ç©¶çš„ä¸€éƒ¨åˆ†å·¥ä½œè¿½æ±‚ä¸€ä¸ªé¢å¤–çš„ç›®æ ‡ï¼Œå³åˆ©ç”¨å¯å­¦ä¹ çš„ç¬¦å·è¯­è¨€æ¥æé«˜ä»»åŠ¡çº§åˆ«çš„æ€§èƒ½ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œè¿™äº›ç ”ç©¶æˆæœå°šæœªè¢«ç°æœ‰ Comm-MADRL ç»¼è¿°æ‰€æ¶µç›–ï¼Œä½†è¢«çº³å…¥æˆ‘ä»¬çš„è°ƒæŸ¥ï¼Œç§°ä¸ºå…·æœ‰æ¶Œç°è¯­è¨€çš„è®¤çŸ¥ä»»åŠ¡ã€‚æ€»ä¹‹ï¼Œæˆ‘ä»¬çš„è°ƒæŸ¥åœ¨èŒƒå›´ä¸Šä¸æ¶Œç°è¯­è¨€çš„è°ƒæŸ¥é‡å ï¼ˆå³åœ¨å…·æœ‰æ¶Œç°è¯­è¨€çš„è®¤çŸ¥ä»»åŠ¡ä¸­ï¼‰ï¼Œä½†æˆ‘ä»¬çš„è°ƒæŸ¥å…³æ³¨ä¸åŒçš„ä¸»è¦ç›®æ ‡ï¼ˆå³å®ç°ç‰¹å®šé¢†åŸŸçš„ä»»åŠ¡ï¼Œè€Œä¸æ˜¯å­¦ä¹ ç¬¦å·è¯­è¨€ï¼‰ã€‚æˆ‘ä»¬è¿›ä¸€æ­¥åœ¨ç¬¬ 2.2 èŠ‚ä¸­é˜æ˜å…·æœ‰é€šä¿¡å’Œå­¦ä¹ æ¶Œç°è¯­è¨€çš„å­¦ä¹ ä»»åŠ¡ä¹‹é—´çš„åŒºåˆ«ã€‚</p><p>åœ¨æˆ‘ä»¬çš„è°ƒæŸ¥è®ºæ–‡ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡å…³æ³¨é€šä¿¡å¦‚ä½•è¢«åˆ©ç”¨æ¥æé«˜å¤šæ™ºèƒ½ä½“æ·±åº¦å¼ºåŒ–å­¦ä¹ æŠ€æœ¯çš„æ€§èƒ½ï¼Œå›é¡¾äº† Comm-MADRL æ–‡çŒ®ã€‚å…·ä½“æ¥è¯´ï¼Œæˆ‘ä»¬ä¸“æ³¨äºå¯å­¦ä¹ çš„é€šä¿¡åè®®ï¼Œè¿™äº›åè®®ä¸å¼ºè°ƒé€šè¿‡æ·±åº¦å¼ºåŒ–å­¦ä¹ æŠ€æœ¯å¼€å‘åŠ¨æ€å’Œè‡ªé€‚åº”é€šä¿¡çš„è¿‘æœŸå·¥ä½œç›¸ä¸€è‡´ï¼ŒåŒ…æ‹¬å­¦ä¹ ä½•æ—¶ã€å¦‚ä½•ä»¥åŠä¸è°è¿›è¡Œé€šä¿¡ã€‚é€šè¿‡å¯¹è¿‘æœŸ Comm-MADRL æ–‡çŒ®çš„å…¨é¢å›é¡¾ï¼Œæˆ‘ä»¬æå‡ºäº†ä¸€ç§ç³»ç»Ÿæ€§å’Œç»“æ„åŒ–çš„åˆ†ç±»æ–¹æ³•ï¼Œæ—¨åœ¨åŒºåˆ†å’Œåˆ†ç±»å„ç§ Comm-MADRL æ–¹æ³•ã€‚è¿™ç§æ–¹æ³•è¿˜å°†ä¸ºæ–°çš„ Comm-MADRL ç³»ç»Ÿçš„è®¾è®¡å’Œè¿›æ­¥æä¾›æŒ‡å¯¼ã€‚å‡è®¾æˆ‘ä»¬è®¡åˆ’ä¸ºå½“å‰é¢†åŸŸä»»åŠ¡å¼€å‘ä¸€ä¸ª Comm-MADRL ç³»ç»Ÿã€‚ä»ä½•æ—¶ã€å¦‚ä½•ä»¥åŠä¸è°è¿›è¡Œé€šä¿¡çš„é—®é¢˜å¼€å§‹ï¼Œç³»ç»Ÿå¯ä»¥ä»å¤šä¸ªæ–¹é¢è¿›è¡Œæè¿°ã€‚æ™ºèƒ½ä½“éœ€è¦å­¦ä¹ ä½•æ—¶è¿›è¡Œé€šä¿¡ã€ä¸è°è¿›è¡Œé€šä¿¡ã€ä¼ è¾¾ä»€ä¹ˆä¿¡æ¯ã€å¦‚ä½•æ•´åˆæ¥æ”¶åˆ°çš„ä¿¡æ¯ï¼Œæœ€åï¼Œé€šè¿‡é€šä¿¡å¯ä»¥å®ç°å“ªäº›å­¦ä¹ ç›®æ ‡ã€‚ æˆ‘ä»¬æå‡ºäº† 9 ä¸ªç»´åº¦ï¼Œå¯¹åº”äº Comm-MADRL ç³»ç»Ÿçš„ç‹¬ç‰¹æ–¹é¢ï¼šæ§åˆ¶ç›®æ ‡ã€é€šä¿¡çº¦æŸã€é€šä¿¡è€…ç±»å‹ã€é€šä¿¡ç­–ç•¥ã€ä¼ é€’æ¶ˆæ¯ã€æ¶ˆæ¯ç»„åˆã€å†…éƒ¨æ•´åˆã€å­¦ä¹ æ–¹æ³•ä»¥åŠè®­ç»ƒæ–¹æ¡ˆã€‚è¿™äº›ç»´åº¦æ„æˆäº† Comm-MADRL ç³»ç»Ÿçš„éª¨æ¶ï¼Œå¯ç”¨äºå…¨é¢åˆ†æå’Œæ·±å…¥äº†è§£è®¾è®¡çš„ Comm-MADRL æ–¹æ³•ã€‚é€šè¿‡å°†æœ€è¿‘çš„ Comm-MADRL æ–¹æ³•æ˜ å°„åˆ°è¿™ä¸ªå¤šç»´ç»“æ„ä¸­ï¼Œæˆ‘ä»¬ä¸ä»…æä¾›äº†å¯¹è¯¥é¢†åŸŸå½“å‰æŠ€æœ¯æ°´å¹³çš„æ´å¯Ÿï¼Œè¿˜ç¡®å®šäº†è®¾è®¡æœªæ¥ Comm-MADRL ç³»ç»Ÿçš„ä¸€äº›é‡è¦æ–¹å‘ã€‚</p><p>æœ¬æ–‡å‰©ä½™éƒ¨åˆ†çš„ç»“æ„å¦‚ä¸‹ã€‚ç¬¬ 2 èŠ‚è®¨è®ºäº†å¤šæ™ºèƒ½ä½“å¼ºåŒ–å­¦ä¹ çš„é¢„å¤‡çŸ¥è¯†ï¼Œä»¥åŠå…³äºé€šä¿¡çš„ç°æœ‰æ‰©å±•å’Œè¿‘æœŸè°ƒæŸ¥çš„è¯¦ç»†æ¯”è¾ƒã€‚ç¬¬ 3 èŠ‚ï¼Œæˆ‘ä»¬æå‡ºäº†æˆ‘ä»¬çš„å»ºè®®ç»´åº¦ï¼Œè§£é‡Šäº†å¦‚ä½•å°†è¿‘æœŸçš„å·¥ä½œæŒ‰æ¯ä¸ªç»´åº¦çš„ç±»åˆ«è¿›è¡Œåˆ†ç»„ã€‚ç¬¬ 4 èŠ‚ï¼Œæˆ‘ä»¬è®¨è®ºäº†æ–‡çŒ®ä¸­å‘ç°çš„è¶‹åŠ¿ï¼Œå¹¶å—å»ºè®®ç»´åº¦é©±åŠ¨ï¼Œæå‡ºäº†è¯¥ç ”ç©¶é¢†åŸŸçš„å¯èƒ½ç ”ç©¶æ–¹å‘ã€‚ç¬¬ 5 èŠ‚ï¼Œæˆ‘ä»¬æ€»ç»“äº†æœ¬æ–‡çš„ç»“è®ºã€‚</p><h3 id="2-èƒŒæ™¯"><a href="#2-èƒŒæ™¯" class="headerlink" title="2. èƒŒæ™¯"></a>2. èƒŒæ™¯</h3><p>åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆæä¾›å…³äºå¤šæ™ºèƒ½ä½“å¼ºåŒ–å­¦ä¹ çš„å¿…è¦èƒŒæ™¯çŸ¥è¯†ã€‚ç„¶åï¼Œæˆ‘ä»¬å±•ç¤ºå¦‚ä½•å°†å¤šæ™ºèƒ½ä½“å¼ºåŒ–å­¦ä¹ æ‰©å±•åˆ°è€ƒè™‘æ™ºèƒ½ä½“ä¹‹é—´çš„é€šä¿¡ã€‚æœ€åï¼Œæˆ‘ä»¬ä»‹ç»å¹¶æ¯”è¾ƒäº†æ¶‰åŠé€šä¿¡çš„è¿‘æœŸè°ƒæŸ¥ï¼Œä»ä¸­æˆ‘ä»¬å¯ä»¥ç›´æ¥çœ‹åˆ°æˆ‘ä»¬å¡«è¡¥ç°æœ‰è°ƒæŸ¥ä¸­ç©ºç™½çš„åŸå› ã€‚</p><h4 id="2-1-å¤šæ™ºèƒ½ä½“å¼ºåŒ–å­¦ä¹ "><a href="#2-1-å¤šæ™ºèƒ½ä½“å¼ºåŒ–å­¦ä¹ " class="headerlink" title="2.1 å¤šæ™ºèƒ½ä½“å¼ºåŒ–å­¦ä¹ "></a>2.1 å¤šæ™ºèƒ½ä½“å¼ºåŒ–å­¦ä¹ </h4><p>ç°å®ä¸–ç•Œçš„åº”ç”¨é€šå¸¸åŒ…å«å¤šä¸ªåœ¨ç¯å¢ƒä¸­è¿è¡Œçš„æ™ºèƒ½ä½“ã€‚æ™ºèƒ½ä½“é€šå¸¸è¢«è®¤ä¸ºæ˜¯è‡ªä¸»çš„ï¼Œå¹¶ä¸”éœ€è¦å­¦ä¹ ç­–ç•¥ä»¥å®ç°å…¶ç›®æ ‡ã€‚å¤šæ™ºèƒ½ä½“ç¯å¢ƒå¯ä»¥æ ¹æ®ç¯å¢ƒæ˜¯å¦å®Œå…¨å¯è§‚æµ‹ã€æ™ºèƒ½ä½“çš„ç›®æ ‡å¦‚ä½•ç›¸å…³è”ç­‰å› ç´ ä»¥å¤šç§æ–¹å¼å½¢å¼åŒ–[6]ã€‚å…¶ä¸­ï¼Œéƒ¨åˆ†å¯è§‚æµ‹éšæœºåšå¼ˆï¼ˆPOSGï¼‰[19, 20]æ˜¯æœ€çµæ´»çš„å½¢å¼åŒ–ä¹‹ä¸€ã€‚POSG ç”±ä¸€ä¸ªå…ƒç»„å®šä¹‰ï¼Œå…¶ä¸­ I æ˜¯ï¼ˆæœ‰é™ï¼‰æ™ºèƒ½ä½“é›†åˆï¼ŒæŒ‰{1, â€¦, n}ç´¢å¼•ï¼ŒS æ˜¯ç¯å¢ƒçŠ¶æ€é›†åˆï¼ŒğœŒæ˜¯çŠ¶æ€ç©ºé—´ S ä¸Šçš„åˆå§‹çŠ¶æ€åˆ†å¸ƒï¼ŒA æ˜¯æ™ºèƒ½ä½“ i å¯ç”¨çš„åŠ¨ä½œé›†åˆï¼ŒO æ˜¯æ™ºèƒ½ä½“ i çš„è§‚å¯Ÿé›†åˆã€‚æˆ‘ä»¬è¡¨ç¤ºè”åˆåŠ¨ä½œç©ºé—´ä¸º A = Ã—Aï¼Œæ™ºèƒ½ä½“è”åˆè§‚å¯Ÿç©ºé—´ä¸º O = Ã—Oã€‚å› æ­¤ï¼ŒP âˆ¶ S Ã— A â†’ Î”(S)è¡¨ç¤ºä»çŠ¶æ€ s âˆˆ S åˆ°æ–°çŠ¶æ€ sâˆˆ S çš„è½¬ç§»æ¦‚ç‡ï¼Œç»™å®šæ™ºèƒ½ä½“çš„è”åˆåŠ¨ä½œâƒ— a = âŸ¨a, â€¦, a âŸ©ï¼Œå…¶ä¸­âƒ— a âˆˆ Aã€‚å½“ç¯å¢ƒè¿‡æ¸¡åˆ°æ–°çŠ¶æ€ s æ—¶ï¼Œç»™å®šè”åˆåŠ¨ä½œâƒ—</p><p>a æ ¹æ®è§‚å¯Ÿæ¦‚ç‡å‡½æ•° O âˆ¶ S Ã— A â†’ Î”(O)ç¡®å®šã€‚ç„¶åï¼Œæ¯ä¸ªæ™ºèƒ½ä½“æ ¹æ®å…¶è‡ªèº«çš„å¥–åŠ±å‡½æ•° Râˆ¶ S Ã— A Ã— S â†’ â„è·å¾—å³æ—¶å¥–åŠ±ã€‚ä¸è”åˆåŠ¨ä½œå’Œè§‚å¯Ÿç±»ä¼¼ï¼Œæˆ‘ä»¬å¯ä»¥å°†âƒ— r = âŸ¨r, â€¦, râŸ©è¡¨ç¤ºä¸ºè”åˆå¥–åŠ±ã€‚å¦‚æœæ™ºèƒ½ä½“çš„å¥–åŠ±å‡½æ•°æ°å¥½ç›¸åŒï¼Œå³å®ƒä»¬å…·æœ‰ç›¸åŒçš„ç›®æ ‡ï¼Œé‚£ä¹ˆå¯¹äºæ¯ä¸ªæ—¶é—´æ­¥ï¼Œr= r= â€¦ = r éƒ½æˆç«‹ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒPOSG ç®€åŒ–ä¸º Dec-POMDP [6]ã€‚å¦‚æœæ¯ä¸ªæ—¶é—´æ­¥çš„çŠ¶æ€å¯ä»¥ä»æ™ºèƒ½ä½“çš„å½“å‰è§‚å¯Ÿé›†ä¸­å”¯ä¸€ç¡®å®šï¼Œå³ s â‰¡âƒ— oï¼Œåˆ™ Dec-POMDP ç®€åŒ–ä¸º Dec-MDPã€‚å¦‚æœæ¯ä¸ªæ™ºèƒ½ä½“éƒ½çŸ¥é“çœŸå®çš„ç¯å¢ƒçŠ¶æ€ï¼Œåˆ™ Dec-MDP ç®€åŒ–ä¸ºå¤šæ™ºèƒ½ä½“ MDPã€‚å¦‚æœæ™ºèƒ½ä½“é›†åˆä¸­åªæœ‰ä¸€ä¸ªæ™ºèƒ½ä½“ï¼Œå³ I = {1}ï¼Œåˆ™å¤šæ™ºèƒ½ä½“ MDP ç®€åŒ–ä¸º MDPï¼Œè€Œ DecPOMDP ç®€åŒ–ä¸º POMDPã€‚ç”±äºéƒ¨åˆ†å¯è§‚æµ‹æ€§ï¼ŒMARL æ–¹æ³•é€šå¸¸ä½¿ç”¨æ¯ä¸ªæ™ºèƒ½ä½“çš„è§‚å¯Ÿ-åŠ¨ä½œå†å²ğœ= {o , a, o, â€¦, o }ç›´åˆ°æ—¶é—´æ­¥ t æ¥è¿‘ä¼¼ç¯å¢ƒçŠ¶æ€ã€‚è¯·æ³¨æ„ï¼Œä¸ºäº†ç®€åŒ–ï¼Œæ—¶é—´æ­¥ t é€šå¸¸è¢«çœç•¥ã€‚</p><p>åœ¨å¤šæ™ºèƒ½ä½“å¼ºåŒ–å­¦ä¹ ç¯å¢ƒä¸­ï¼Œæ™ºèƒ½ä½“å¯ä»¥ä»¥å»ä¸­å¿ƒåŒ–æˆ–ä¸­å¿ƒåŒ–çš„æ–¹å¼å­¦ä¹ å…¶ç­–ç•¥ã€‚åœ¨å»ä¸­å¿ƒåŒ–å­¦ä¹ ä¸­ï¼ˆä¾‹å¦‚ï¼Œå»ä¸­å¿ƒåŒ– Q å­¦ä¹ [21, 22]ï¼‰ï¼Œn ä¸ªæ™ºèƒ½ä½“çš„å¤šæ™ºèƒ½ä½“å¼ºåŒ–å­¦ä¹ é—®é¢˜è¢«åˆ†è§£ä¸º n ä¸ªå»ä¸­å¿ƒåŒ–çš„å•æ™ºèƒ½ä½“é—®é¢˜ï¼Œå…¶ä¸­æ¯ä¸ªæ™ºèƒ½ä½“é€šè¿‡å°†æ‰€æœ‰å…¶ä»–æ™ºèƒ½ä½“è§†ä¸ºç¯å¢ƒçš„ä¸€éƒ¨åˆ†æ¥å­¦ä¹ è‡ªå·±çš„ç­–ç•¥[23, 24]ã€‚åœ¨è¿™æ ·çš„å»ä¸­å¿ƒåŒ–è®¾ç½®ä¸­ï¼Œæ¯ä¸ªæ™ºèƒ½ä½“å­¦ä¹ çš„ç­–ç•¥å–å†³äºå…¶å±€éƒ¨è§‚å¯Ÿå’Œå†å²ã€‚å»ä¸­å¿ƒåŒ–å­¦ä¹ çš„ä¸€ä¸ªä¸»è¦é—®é¢˜æ˜¯ç¯å¢ƒçš„æ‰€è°“éå¹³ç¨³æ€§ï¼Œå³æ¯ä¸ªæ™ºèƒ½ä½“åœ¨ä¸€ä¸ªå…¶ä»–æ™ºèƒ½ä½“åŒæ—¶æ¢ç´¢å’Œå­¦ä¹ çš„ç¯å¢ƒä¸­å­¦ä¹ ã€‚ä¸­å¿ƒåŒ–å­¦ä¹ å¯ä»¥è®­ç»ƒæ‰€æœ‰æ™ºèƒ½ä½“çš„å•ä¸ªè”åˆç­–ç•¥æˆ–ä¸­å¿ƒåŒ–çš„ä»·å€¼å‡½æ•°ï¼Œä»¥ä¿ƒè¿› n ä¸ªå»ä¸­å¿ƒåŒ–ç­–ç•¥çš„å­¦ä¹ ã€‚è™½ç„¶ä¸­å¿ƒåŒ–ï¼ˆè”åˆï¼‰å­¦ä¹ æ¶ˆé™¤äº†æˆ–å‡è½»äº†éƒ¨åˆ†å¯è§‚å¯Ÿæ€§å’Œéå¹³ç¨³æ€§é—®é¢˜ï¼Œä½†å®ƒé¢ä¸´ç€è”åˆè¡ŒåŠ¨ï¼ˆå’Œè§‚å¯Ÿï¼‰ç©ºé—´éšç€æ™ºèƒ½ä½“æ•°é‡åŠå…¶è¡ŒåŠ¨çš„æŒ‡æ•°çº§æ‰©å±•çš„æŒ‘æˆ˜ã€‚ æƒ³è¦æ·±å…¥äº†è§£å¤šæ™ºèƒ½ä½“å¼ºåŒ–å­¦ä¹ ï¼ˆMARLï¼‰ä¸­ä½¿ç”¨çš„å„ç§è®­ç»ƒæ–¹æ¡ˆï¼Œæˆ‘ä»¬æ¨èé˜…è¯»[17]çš„å…¨é¢ç»¼è¿°ï¼Œè¯¥ç»¼è¿°ä¸ºç­–ç•¥çš„è®­ç»ƒå’Œæ‰§è¡Œæä¾›äº†å®è´µçš„è§è§£ã€‚æ ¹æ®ç­–ç•¥æ˜¯ä»å€¼å‡½æ•°å¯¼å‡ºè¿˜æ˜¯ç›´æ¥å­¦ä¹ ï¼Œå¤šæ™ºèƒ½ä½“å¼ºåŒ–å­¦ä¹ æ–¹æ³•å¯ä»¥åˆ†ä¸ºåŸºäºå€¼çš„æ–¹æ³•å’ŒåŸºäºç­–ç•¥çš„æ–¹æ³•ã€‚è¿™ä¸¤ç§æ–¹æ³•åœ¨é€šä¿¡å¤šæ™ºèƒ½ä½“æ·±åº¦å¼ºåŒ–å­¦ä¹ ï¼ˆComm-MADRLï¼‰ä¸­å¾—åˆ°äº†å¹¿æ³›çš„åº”ç”¨ã€‚</p><h5 id="åŸºäºå€¼"><a href="#åŸºäºå€¼" class="headerlink" title="åŸºäºå€¼"></a>åŸºäºå€¼</h5><p>åœ¨å¤šæ™ºèƒ½ä½“æƒ…å†µä¸‹ï¼ŒåŸºäºå€¼çš„æ–¹æ³•å€Ÿé‰´äº†å•æ™ºèƒ½ä½“æ¡ˆä¾‹ä¸­çš„è®¸å¤šæƒ³æ³•ã€‚ä½œä¸ºæœ€æµè¡Œçš„åŸºäºå€¼çš„æ–¹æ³•ä¹‹ä¸€ï¼Œåˆ†å¸ƒå¼ Q å­¦ä¹ ä¸ºæ¯ä¸ªæ™ºèƒ½ä½“å­¦ä¹ ä¸€ä¸ªå±€éƒ¨ Q å‡½æ•°ã€‚åœ¨æ™ºèƒ½ä½“å…±äº«å…±åŒå¥–åŠ±çš„åä½œè®¾ç½®ä¸­ï¼Œæ™ºèƒ½ä½“ i çš„æ›´æ–°è§„åˆ™å¦‚ä¸‹ï¼š<br>å…¶ä¸­ r æ˜¯å…±äº«å¥–åŠ±ï¼Œais æ˜¯ä¸‹ä¸€ä¸ªçŠ¶æ€ s ä¸­å…·æœ‰æœ€é«˜ Q å€¼çš„åŠ¨ä½œã€‚åœ¨éƒ¨åˆ†å¯è§‚å¯Ÿç¯å¢ƒä¸­ï¼Œç¯å¢ƒçŠ¶æ€ä¸æ˜¯å®Œå…¨å¯è§‚å¯Ÿçš„ï¼Œé€šå¸¸ç”±æ¯ä¸ªä»£ç†çš„ä¸ªä½“è§‚å¯Ÿæˆ–å†å²è®°å½•æ¥ä»£æ›¿ã€‚æ¯ä¸ªçŠ¶æ€-åŠ¨ä½œå¯¹çš„ Q å€¼æ ¹æ® TD è¯¯å·®é€æ­¥æ›´æ–°ã€‚è¿™ä¸ªè¯¯å·®ï¼Œå³ r + ğ›¾ maxQ(s, a) âˆ’ Q(s, a )ï¼Œè¡¨ç¤ºåŸºäº Bellman æ–¹ç¨‹[25]çš„æ–°ä¼°è®¡ï¼ˆå³ r + ğ›¾ maxQ(s, a)ï¼‰å’Œå½“å‰ä¼°è®¡ï¼ˆå³ Q(s, a)ï¼‰ä¹‹é—´çš„å·®å¼‚ã€‚ç”±äºçŠ¶æ€å’ŒåŠ¨ä½œç©ºé—´å¯èƒ½å¤ªå¤§ï¼Œéš¾ä»¥é¢‘ç¹é‡åˆ°ä»¥è¿›è¡Œå‡†ç¡®ä¼°è®¡ï¼Œå› æ­¤å‡½æ•°é€¼è¿‘æ–¹æ³•ï¼Œå¦‚æ·±åº¦ç¥ç»ç½‘ç»œï¼Œå·²ç»å˜å¾—æµè¡Œï¼Œä¸ºä»·å€¼æˆ–ç­–ç•¥æ¨¡å‹èµ‹äºˆåœ¨ç¦»æ•£å’Œè¿ç»­çŠ¶æ€å’ŒåŠ¨ä½œä¸Šçš„æ³›åŒ–èƒ½åŠ›[12]ã€‚ä¾‹å¦‚ï¼Œæ·±åº¦ Q ç½‘ç»œï¼ˆDQNï¼‰[12]æœ€å°åŒ–ä»é‡‡æ ·å¥–åŠ±è®¡ç®—çš„æ–°ä¼°è®¡ä¸å‚æ•°åŒ– Q å‡½æ•°çš„å½“å‰ä¼°è®¡ä¹‹é—´çš„å·®å¼‚ã€‚åœ¨åŸºäº DQN çš„æ–¹æ³•ä¸­ï¼Œæ–¹ç¨‹ 1 ä¸­çš„ Q å‡½æ•°è¡¨ç¤ºä¸º Q(s, a ;ğœƒ)ï¼Œå®ƒä¾èµ–äºå¯å­¦ä¹ çš„å‚æ•°ğœƒã€‚ ç„¶è€Œï¼ŒåŸºäºä»·å€¼çš„é›†ä¸­å¼å­¦ä¹ æ–¹æ³•å­¦ä¹ ä¸€ä¸ªè”åˆ Q å‡½æ•° Q(s,âƒ— a;ğœƒ)ä¸å‚æ•°ğœƒã€‚ç„¶è€Œï¼Œè¿™ç§æ–¹æ³•åœ¨ä»£ç†æ•°é‡å¢åŠ æ—¶éš¾ä»¥æ‰©å±•ã€‚å€¼åˆ†è§£æ–¹æ³•[26-29]æ˜¯æµè¡Œçš„å¤šæ™ºèƒ½ä½“å¼ºåŒ–å­¦ä¹ ï¼ˆMARLï¼‰æ–¹æ³•ï¼Œå¯ä»¥å°†è”åˆ Q å‡½æ•°åˆ†è§£ä»¥å®ç°é«˜æ•ˆçš„è®­ç»ƒã€‚è¿™äº›æ–¹æ³•ä¹Ÿå¹¿æ³›åº”ç”¨äº Comm-MADRL çš„ç ”ç©¶å·¥ä½œä¸­[30-32]ã€‚åœ¨éƒ¨åˆ†å¯è§‚å¯Ÿç¯å¢ƒä¸­ï¼Œçº¿æ€§å€¼åˆ†è§£æ–¹æ³•å°†åŸºäºå†å²çš„è”åˆ Q å‡½æ•°åˆ†è§£å¦‚ä¸‹ï¼š<br>å…¶ä¸­ï¼Œè”åˆ Q å‡½æ•°åŸºäºæ‰€æœ‰ä»£ç†çš„è”åˆå†å²ï¼Œå¹¶åŸºäºä¸ªä½“å†å²åˆ†è§£ä¸ºå±€éƒ¨ Q å‡½æ•°ã€‚æƒé‡ w å¯ä»¥æ˜¯å›ºå®šå€¼[26, 28]æˆ–å—ç‰¹å®šçº¦æŸçš„å¯å­¦ä¹ å‚æ•°[29]ã€‚ä¼˜åŠ¿å‡½æ•°ä¹Ÿå¯ä»¥æ›¿æ¢ä¸Šè¿°æ–¹ç¨‹ä¸­çš„ Q å‡½æ•°ä»¥å‡å°‘æ–¹å·®[33]ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;å¤šæ™ºèƒ½ä½“å¼ºåŒ–å­¦ä¹ é€šä¿¡æ–¹æ³•ç»¼è¿°&quot;&gt;&lt;a href=&quot;#å¤šæ™ºèƒ½ä½“å¼ºåŒ–å­¦ä¹ é€šä¿¡æ–¹æ³•ç»¼è¿°&quot; class=&quot;headerlink&quot; title=&quot;å¤šæ™ºèƒ½ä½“å¼ºåŒ–å­¦ä¹ é€šä¿¡æ–¹æ³•ç»¼è¿°&quot;&gt;&lt;/a&gt;å¤šæ™ºèƒ½ä½“å¼ºåŒ–å­¦ä¹ é€šä¿¡æ–¹æ³•ç»¼è¿°&lt;/h2&gt;&lt;h3 id=&quot;æ‘˜è¦&quot;&gt;&lt;a href=&quot;#æ‘˜è¦&quot;</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>DRL Algorithms</title>
    <link href="http://zcl0219.github.io/2024/10/30/DRL-Algorithms/"/>
    <id>http://zcl0219.github.io/2024/10/30/DRL-Algorithms/</id>
    <published>2024-10-29T16:26:54.000Z</published>
    <updated>2024-10-29T17:20:24.879Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨æ·±åº¦å¼ºåŒ–å­¦ä¹ ä¸­ï¼Œ(\mathbb{E}_{S}[V(S, \theta)]) è¡¨ç¤ºå¯¹çŠ¶æ€ (S) çš„æœŸæœ›å€¼ã€‚è™½ç„¶ (S) æ˜¯çŠ¶æ€ï¼Œå…·ä½“ç†è§£ä¸Šå¯ä»¥è¿™æ ·è€ƒè™‘ï¼š</p><ol><li><p><strong>çŠ¶æ€çš„åˆ†å¸ƒ</strong>ï¼šåœ¨å¼ºåŒ–å­¦ä¹ ä¸­ï¼ŒçŠ¶æ€ (S) æ˜¯éšæœºå˜é‡ï¼Œå®ƒéµå¾ªä¸€ä¸ªåˆ†å¸ƒ (p(S))ï¼Œè¯¥åˆ†å¸ƒåæ˜ äº†çŠ¶æ€åœ¨ç¯å¢ƒä¸­çš„å‡ºç°æ¦‚ç‡ã€‚è¿™ä¸ªåˆ†å¸ƒå¯ä»¥æ˜¯åˆå§‹çŠ¶æ€åˆ†å¸ƒï¼Œä¹Ÿå¯ä»¥æ˜¯ç­–ç•¥æ‰§è¡Œæ—¶ç»è¿‡å„ä¸ªçŠ¶æ€çš„è®¿é—®åˆ†å¸ƒã€‚æˆ‘ä»¬å¯ä»¥ç†è§£ä¸ºæœŸæœ›å€¼ (\mathbb{E}_{S}[V(S, \theta)]) æ˜¯å¯¹çŠ¶æ€åˆ†å¸ƒ (p(S)) çš„åŠ æƒå¹³å‡ã€‚</p></li><li><p><strong>æ±‚æœŸæœ›çš„å«ä¹‰</strong>ï¼šå½“æˆ‘ä»¬æ±‚ (\mathbb{E}_{S}[V(S, \theta)]) æ—¶ï¼Œå®é™…ä¸Šæ˜¯åœ¨æ‰€æœ‰å¯èƒ½çš„çŠ¶æ€ä¸Šè®¡ç®—ä¸€ä¸ªåŠ æƒå¹³å‡å€¼ï¼Œå³æŠŠæ¯ä¸ªçŠ¶æ€çš„ä»·å€¼å‡½æ•° (V(S, \theta)) æŒ‰å…¶å‡ºç°çš„æ¦‚ç‡ (p(S)) æ¥è¿›è¡ŒåŠ æƒã€‚è¿™ç§æœŸæœ›å€¼é€šå¸¸ç”¨äºä¼°è®¡æ¨¡å‹åœ¨æ•´ä¸ªçŠ¶æ€ç©ºé—´ä¸Šçš„è¡¨ç°ã€‚</p></li><li><p><strong>æ ·æœ¬ä¼°è®¡</strong>ï¼šåœ¨å®é™…ä¸­ï¼Œè¿™ç§æœŸæœ›å€¼å¯ä»¥é€šè¿‡é‡‡æ ·å®ç°ï¼Œæ¯”å¦‚é€šè¿‡ä» (p(S)) ä¸­é‡‡æ ·å¾—åˆ°ä¸€ç³»åˆ—çŠ¶æ€ (\{S_i\})ï¼Œç„¶åè®¡ç®—è¿™äº›çŠ¶æ€ä¸Š (V(S, \theta)) çš„å¹³å‡å€¼æ¥é€¼è¿‘ (\mathbb{E}_{S}[V(S, \theta)])ã€‚</p></li></ol><p>ç»¼ä¸Šï¼Œ(\mathbb{E}_{S}[V(S, \theta)]) æ˜¯å¯¹çŠ¶æ€ç©ºé—´ä¸­çš„æ¯ä¸ªçŠ¶æ€ä»·å€¼çš„åŠ æƒå¹³å‡ï¼Œæƒé‡æ¥è‡ªçŠ¶æ€çš„åˆ†å¸ƒ (p(S))ã€‚è¿™ç§æ–¹æ³•åœ¨å¼ºåŒ–å­¦ä¹ ä¸­å¸®åŠ©æˆ‘ä»¬é€šè¿‡å…¨å±€çŠ¶æ€åˆ†å¸ƒæ¥è¯„ä¼°ä»·å€¼å‡½æ•°ï¼Œä»è€Œæ›´æœ‰æ•ˆåœ°è®­ç»ƒæ¨¡å‹ã€‚</p><p>éšæœºæ¢¯åº¦æ˜¯å¯¹æœŸæœ›çš„è’™ç‰¹å¡æ´›è¿‘ä¼¼</p><p><img src="Users\zcl\AppData\Roaming\Typora\typora-user-images\image-20241030002933171.png" alt="image-20241030002933171"></p><p>é€šå¸¸æ¥è¯´ï¼ŒJ(\theta)æ˜¯ä¸€ä¸ªå¾ˆå¤æ‚çš„å‡½æ•°ï¼Œè€ŒL(\theta | \theta_{old})æ˜¯ä¸€ä¸ªç›¸å¯¹ç®€å•çš„å‡½æ•°</p><p>æ„å»ºLçš„æ–¹æ³•å¤šç§å¤šæ ·ï¼Œå¯ä»¥æ˜¯Jçš„äºŒé˜¶æ³°å‹’å±•å¼€ï¼Œä¹Ÿå¯ä»¥æ˜¯Jçš„è’™ç‰¹å¡æ´›è¿‘ä¼¼</p><p>è¦maximizationï¼Œå³ç›¸å½“äºæ±‚è§£ä¸€ä¸ªå¸¦ç½®ä¿¡åŸŸçº¦æŸçš„æœ€ä¼˜åŒ–é—®é¢˜ï¼Œæ±‚è§£é€Ÿåº¦æ²¡æœ‰æ¢¯åº¦ä¸Šå‡å’Œéšæœºæ¢¯åº¦ä¸Šå‡ç®—æ³•å¿«</p><p>ä½†ç½®ä¿¡åŸŸç®—æ³•å¼ºåœ¨æ¯”è¿™ä¸¤ç§ç®—æ³•è¡¨ç°ç¨³å®šï¼Œå“ªæ€•æœ€ä¼˜åŒ–é—®é¢˜æ±‚è§£ä¸æ˜¯å¾ˆå‡†ç¡®ã€‚</p><p><img src="Users\zcl\AppData\Roaming\Typora\typora-user-images\image-20241030003652735.png" alt="image-20241030003652735"></p><p>J(\theta) = E_{S}[V_{\pi}(S)]ä¸­å¯¹Sæ±‚æœŸæœ›ï¼Œç›¸å½“äºæ¶ˆé™¤äº†Sï¼Œåªå‰©ä¸‹ç­–ç•¥ç½‘ç»œå‚æ•°\theta</p><p><img src="Users\zcl\AppData\Roaming\Typora\typora-user-images\image-20241030004813870.png" alt="image-20241030004813870"></p><p><img src="Users\zcl\AppData\Roaming\Typora\typora-user-images\image-20241030005237667.png" alt="image-20241030005237667"></p><p><img src="Users\zcl\AppData\Roaming\Typora\typora-user-images\image-20241030005401769.png" alt="image-20241030005401769"></p><p><img src="Users\zcl\AppData\Roaming\Typora\typora-user-images\image-20241030010211366.png" alt="image-20241030010211366"></p><p><img src="Users\zcl\AppData\Roaming\Typora\typora-user-images\image-20241030010802155.png" alt="image-20241030010802155"></p><p>ç¬¬å››æ­¥éœ€è¦å†…å±‚å¾ªç¯æ±‚è§£æœ€å¤§åŒ–é—®é¢˜ï¼Œç¬¬å››æ­¥ä¸¤ä¸ªè¶…å‚æ•°ï¼Œä¸€ä¸ª\deltaï¼Œä¸€ä¸ªå­¦ä¹ æ­¥é•¿ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;åœ¨æ·±åº¦å¼ºåŒ–å­¦ä¹ ä¸­ï¼Œ(&#92;mathbb{E}_{S}[V(S, &#92;theta)]) è¡¨ç¤ºå¯¹çŠ¶æ€ (S) çš„æœŸæœ›å€¼ã€‚è™½ç„¶ (S) æ˜¯çŠ¶æ€ï¼Œå…·ä½“ç†è§£ä¸Šå¯ä»¥è¿™æ ·è€ƒè™‘ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;çŠ¶æ€çš„åˆ†å¸ƒ&lt;/strong&gt;ï¼šåœ¨å¼ºåŒ–å­¦ä¹ ä¸­ï¼ŒçŠ¶æ€ (S) æ˜¯éšæœºå˜é‡</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>DiaDSP</title>
    <link href="http://zcl0219.github.io/2024/10/22/DiaDSP/"/>
    <id>http://zcl0219.github.io/2024/10/22/DiaDSP/</id>
    <published>2024-10-22T13:38:57.000Z</published>
    <updated>2024-10-27T11:06:54.954Z</updated>
    
    <content type="html"><![CDATA[<h3 id="Differentially-Private-Distributed-Optimization-via-State-and-Direction-Perturbation-in-Multiagent-Systems"><a href="#Differentially-Private-Distributed-Optimization-via-State-and-Direction-Perturbation-in-Multiagent-Systems" class="headerlink" title="Differentially Private Distributed Optimization via State and Direction Perturbation in Multiagent Systems"></a>Differentially Private Distributed Optimization via State and Direction Perturbation in Multiagent Systems</h3><span id="more"></span><h4 id="Source"><a href="#Source" class="headerlink" title="Source"></a>Source</h4><p><a href="https://differential-privacy.cn/">Differential privacy</a> <i class="fa fa-external-link"></i></p><h4 id="Prerequisite-Knowledge"><a href="#Prerequisite-Knowledge" class="headerlink" title="Prerequisite Knowledge"></a>Prerequisite Knowledge</h4><p>What is state perturbation ?</p><ul><li>State perturbation refers to the intentional modification of an agentâ€™s current state by introducing randomness or noise.</li></ul><p>What is differential privacy ?</p><ul><li>Differential privacy is a formal framework designed to ensure the privacy of individualâ€™s data. <a href="https://arxiv.org/pdf/1401.2596">Achieving differential privacy requires that any change in the statistics of the messages</a>.<i class="fa fa-external-link"></i></li></ul><p>What is direction perturbation ?</p><p>Direction perturbation involves introducing randomness or noise into the direction of the optimization process in a distributed algorithm. This technique modifies the gradient or update direction that agents use when adjusting their parameters during optimization.<br>By perturbing the direction, the algorithm can maintain privacy by making it more challenging for other agents or observers to infer the true gradient information, thereby protecting individual agentsâ€™ objective functions. Additionally, direction perturbation can help enhance the robustness of the optimization process and contribute to convergence properties, particularly in scenarios where privacy is a critical concern.</p><p>What is differential privacy ?</p><p>In simple terms, Laplace noise refers to a random variable that follows a Laplace distribution. The probability density function of Laplace noise is represented as follows:<br>$$f(x \mid \mu, b) = \frac{1}{2b} e^{-\frac{|x-\mu|}{b}}.$$<br>Now, let us introduce the concept of $\epsilon$-differential privacy. Consider a mapping network $\mathbf{A}$ and two sibling datasets $\mathbf{D}$ and $\mathbf{D^{\prime}}$. Note that $\mathbf{D}$ and $\mathbf{Dâ€™}$ differ by at most one data point. The mathematical condition for the mapping network $\mathbf{A}$ to satisfy $\epsilon$-differential privacy is as follows<br>$$\operatorname{Pr}\left[A(\mathbf{D})=O\right] \leq e^{\varepsilon} \operatorname{Pr}\left[A\left(\mathbf{D^{\prime}}\right)=O\right].$$<br>The proof is provided here: <a href="https://blog.csdn.net/A13526_/article/details/121300367">$\epsilon$-differential privacy proof</a>.<i class="fa fa-external-link"></i></p><p>$x \in \mathbb{R}^u$ represents local observation.</p><p>$\mathbf{x} \in \mathbb{R}^{n \times u},$ The rows of $\mathbf{x}$ represent the local observation of each agent $i$.</p><p>$\min \sum_{i=1}^{n} f_{i}(x_{i})$ represents the objective function, associated with four properties as below</p><ol><li><p>$\textit{Existence}$ : </p><p>$$\mathbf{x}^{*}= \mathbf{1} \left( x^{*} \right)^{T} \text{ and } \sum_{i=1}^{n} \nabla f_{i} \left( x^{*} \right) = 0.$$</p></li><li></li></ol><h4 id="Abstract"><a href="#Abstract" class="headerlink" title="Abstract"></a>Abstract</h4><p>The article focuses on the distributed optimization problem in multi-agent system, where the objective is to minimize the sum of cost functions. It demonstrates that achieving both convergence and differential privacy is impossible through state perturbation in existing algorithms. The authors propose a new algorithm called DiaDSP, which utilizes both state and direction perturbations with decaying Laplace noise to ensure differential privacy. Unlike many prior methods that require diminishing step sizes for convergence, DiaDSP converges in mean and almost surely with a constant step size. The authors establish conditions for linear convergence under strong convexity of the cost functions and R-linear convergence with Lipschitz gradients. The authors also analyze the trade-off between privacy and convergence accuracy and validate their findings through simulations in a sensor fusion context.</p><h4 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h4><h4 id="Problem-Formulation"><a href="#Problem-Formulation" class="headerlink" title="Problem Formulation"></a>Problem Formulation</h4><p>The objectives of this article are twofold:</p><ol><li>Design a fully distributed update rule $h(\cdot)$ and a noise adding mechanism $g(\cdot)$ only based on local information to solve the DO problem $\min \sum_{i=1}^{n} f_{i}(x_{i})$ while preserving the differential privacy.</li><li>Characterize the trade-off between the accuracy of convergence and the level of differential privacy.</li></ol><p>Notes:</p><ol><li>The update rule can be represented in a compact form as follows: $$\mathbf{x}(k + 1) = h(\mathbf{x}(k), \mathbf{z}(k), \textbf(A), \mathcal{F}).$$</li><li>The attacker has access to all the transmitted messages, which are usually masked by noise $\zeta(k)$, i.e.,<br>$$\mathbf{z}(k) = g(\mathbf{x}(k), \zeta(k)).$$</li><li>The privacy level of $\epsilon$-differential privacy is generally determined by $\epsilon$. The smaller $\epsilon$ is, the higher the privacy level. In other words, it becomes more challenging to distinguish between the two target functions when $\epsilon$ is small.</li></ol><h4 id="DiaDSP-Algorithm"><a href="#DiaDSP-Algorithm" class="headerlink" title="DiaDSP Algorithm"></a>DiaDSP Algorithm</h4><p>A. Motivation: An Impossibility Result</p><p>Summary: The result shows that the convergence and differential privacy cannot be guaranteed simultaneously for any global exact DO algorithm.</p><p>Proof of Proposition 1 (convergence ($\surd$))</p><p>$\mathbf{x}^{(l)}(k) \rightarrow$ the convergence point by $\mathbf{x}_{l}^{\infty}$. Hence, there is $\delta^{*} &gt; 0$, satisfying $\big| g(\mathbf{x}_{1}^{*}, \mathbf{0}) - g(\mathbf{x}_{2}^{*}, \mathbf{0})\big|_{\textit{F}}$ We set an upper threshold $\frac{\delta^{*}}{3}$. Therefore, there exists $k_{\delta^{*}}^{(l)} &gt; 0$ such that $\big| \mathbf{z}^{l}(k) - g(\mathbf{x}_{l}^{*}, \mathbf{0})\big| &lt; \frac{\delta^{*}}{3}.$<br>$$\big| z^{(1)}(k) - z^{(2)}(k)| \geq |g(x_1^{*}, 0) - g(x_2^{*}, 0)| - |g(x_1^{*}, 0) - z^{(1)}(k)| - |g(x_2^{*}, 0) - z^{(2)}(k)\big|.$$<br>$$|a + b + c| \geq |b| - |a| - |c|.$$<br>$$a = z^{(1)}(k) - g(x_1^{*}, 0), \quad b = g(x_1^{*}, 0) - g(x_2^{*}, 0), \quad c = g(x_2^{*}, 0) - z^{(2)}(k).$$<br>$$|z^{(1)}(k) - z^{(2)}(k)| \geq |g(x_1^{*}, 0) - g(x_2^{*}, 0)| - |z^{(1)}(k) - g(x_1^{*}, 0)| - |g(x_2^{*}, 0) - z^{(2)}(k)|.$$<br>$$|z^{(1)}(k) - z^{(2)}(k)| \geq |g(x_i^{*}, 0) - g(x_2^{*}, 0)| - \frac{2\delta^{*}}{3}.$$</p><p>B. Development of DiaDSP</p><p>We employ the combine-then-adapt strategy for each agent $i$, which is expressed as $$x_{i}(k+1) = \sum_{j=1}^{n} a_{ij} x_{j}(k) - \alpha_{i} y_{i}(k).$$ This formula is analogous to the parameter update mechanism in neural networks. $x_i(k)$ can be considered as the transition between different states. $y_i(k)$  is regarded as the gradient of the cost function. Therefore, $y_i(k)$ is supposed to have the same direction as $\sum_{i=1}^{n} \nabla f_i(x_i(k)).$ One advantage of adopting the GT method is that the iterations $$x_{i}(k+1) = \sum_{j=1}^{n} a_{ij} x_{j}(k) - \alpha_{i} y_{i}(k).$$ and $$y_i(k+1) = \sum_{j=1}^{n} a_{ij} y_j(k) + \nabla f_i(x_i(k+1)) - \nabla f_i(x_i(k)).$$ share the same network and we do not need to generate another network for the GT iteration. The reason is that they have the same input dimension and both update around the gradient of the cost function with respect to $f_i(x_i(k))$.</p><h4 id="Convergence-Analysis-of-DiaDSP"><a href="#Convergence-Analysis-of-DiaDSP" class="headerlink" title="Convergence Analysis of DiaDSP"></a>Convergence Analysis of DiaDSP</h4><p>This section mainly include three key points:</p><ol><li>Analyze the convergence of DiaDSP</li><li>Prove the R-linear convergence of DiaDSP</li><li>Determine the optimal step size</li></ol><p>Differential Privacy</p><p>Simulations</p><p>Conclusion</p><p>Questions and Insights</p><ol><li>What is R-linear convergence ?</li></ol>    <style>    #refplus, #refplus li{         padding:0;        margin:0;        list-style:none;    }ï¼›    </style>    <script src="https://unpkg.com/@popperjs/core@2"></script>    <script src="https://unpkg.com/tippy.js@6"></script>    <script>    document.querySelectorAll(".refplus-num").forEach((ref) => {        let refid = ref.firstChild.href.replace(location.origin+location.pathname,'');        let refel = document.querySelector(refid);        let refnum = refel.dataset.num;        let ref_content = refel.innerText.replace(`[${refnum}]`,'');        tippy(ref, {            content: ref_content,        });    });    </script>    ]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;Differentially-Private-Distributed-Optimization-via-State-and-Direction-Perturbation-in-Multiagent-Systems&quot;&gt;&lt;a href=&quot;#Differentially-Private-Distributed-Optimization-via-State-and-Direction-Perturbation-in-Multiagent-Systems&quot; class=&quot;headerlink&quot; title=&quot;Differentially Private Distributed Optimization via State and Direction Perturbation in Multiagent Systems&quot;&gt;&lt;/a&gt;Differentially Private Distributed Optimization via State and Direction Perturbation in Multiagent Systems&lt;/h3&gt;</summary>
    
    
    
    <category term="Scholarly Reads" scheme="http://zcl0219.github.io/categories/Scholarly-Reads/"/>
    
    
    <category term="Distributed Optimization Algorithm" scheme="http://zcl0219.github.io/tags/Distributed-Optimization-Algorithm/"/>
    
  </entry>
  
  <entry>
    <title>ç®—æ³•</title>
    <link href="http://zcl0219.github.io/2023/11/10/%E7%AE%97%E6%B3%95/"/>
    <id>http://zcl0219.github.io/2023/11/10/%E7%AE%97%E6%B3%95/</id>
    <published>2023-11-10T10:44:01.000Z</published>
    <updated>2024-10-20T12:40:55.432Z</updated>
    
    <content type="html"><![CDATA[<p>2023-11-10</p><p>å¹¶æŸ¥é›†ï¼š<a href="https://blog.csdn.net/YSJ367635984/article/details/113504723">https://blog.csdn.net/YSJ367635984/article/details/113504723</a></p><span id="more"></span><p>C++ä»£ç å®ç°</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">DisjointSets</span>&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">DisjointSets</span>();</span><br><span class="line">    ~<span class="built_in">DisjointSets</span>();</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">findParentNode</span><span class="params">(<span class="type">int</span> x)</span></span>;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">unionSetNode</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span></span>;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    std::vector&lt;<span class="type">int</span>&gt; parent;</span><br><span class="line">    <span class="type">int</span> count;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">DisjointSets::<span class="built_in">DisjointSets</span>(): <span class="built_in">count</span>(<span class="number">10</span>) &#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; count; ++i)&#123;</span><br><span class="line">        parent[i] = i;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">DisjointSets::~<span class="built_in">DisjointSets</span>() &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">int DisjointSets::findParentNode(int x)&#123;</span></span><br><span class="line"><span class="comment">    if(x != parent[x])&#123;</span></span><br><span class="line"><span class="comment">        findParentNode(parent[x]);</span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment">    return x;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¼˜åŒ–ç‰ˆæœ¬çš„å¹¶æŸ¥é›†ï¼Œå‡å°ä»¥åæŸ¥æ‰¾æ—¶é—´</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">DisjointSets::findParentNode</span><span class="params">(<span class="type">int</span> x)</span></span>&#123;</span><br><span class="line">    <span class="keyword">while</span>(x != parent[x])&#123;</span><br><span class="line">        <span class="comment">// æ‰¾ä¸€æ¬¡xåªæ˜¯å‹ç¼©ä¸€æ¬¡ï¼Œå¤šæ‰¾å‡ æ¬¡å°±ä¼šå¯¼è‡´çˆ¶èŠ‚ç‚¹ä¸ºæ ¹èŠ‚ç‚¹</span></span><br><span class="line">        parent[x] = parent[parent[x]];</span><br><span class="line">        x = parent[x];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> x;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">DisjointSets::unionSetNode</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span></span>&#123;</span><br><span class="line">    <span class="type">int</span> parent_x = <span class="built_in">findParentNode</span>(x);</span><br><span class="line">    <span class="type">int</span> parent_y = <span class="built_in">findParentNode</span>(y);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(parent_x == parent_y) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">    parent[parent_y] = parent_x;</span><br><span class="line">    </span><br><span class="line">    --count;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;2023-11-10&lt;/p&gt;
&lt;p&gt;å¹¶æŸ¥é›†ï¼š&lt;a href=&quot;https://blog.csdn.net/YSJ367635984/article/details/113504723&quot;&gt;https://blog.csdn.net/YSJ367635984/article/details/113504723&lt;/a&gt;&lt;/p&gt;</summary>
    
    
    
    
  </entry>
  
  <entry>
    <title>Zookeeper</title>
    <link href="http://zcl0219.github.io/2023/10/22/Zookeeper/"/>
    <id>http://zcl0219.github.io/2023/10/22/Zookeeper/</id>
    <published>2023-10-22T10:27:16.000Z</published>
    <updated>2023-10-22T12:52:38.677Z</updated>
    
    <content type="html"><![CDATA[<p>ä¸€ã€Zookeeperç‰¹ç‚¹</p><ol><li>Zookeeper:ä¸€ä¸ªé¢†å¯¼è€…(Leader)ï¼Œå¤šä¸ªè·Ÿéšè€…(Follower)ç»„æˆçš„é›†ç¾¤ã€‚<br>2)é›†ç¾¤ä¸­åªè¦æœ‰åŠæ•°ä»¥ä¸ŠèŠ‚ç‚¹å­˜æ´»ï¼ŒZookeeperé›†ç¾¤å°±èƒ½æ­£å¸¸æœåŠ¡ã€‚æ‰€ä»¥Zookeeperé€‚åˆå®‰è£…å¥‡æ•°å°æœåŠ¡å™¨ã€‚<br>3)å…¨å±€æ•°æ®ä¸€è‡´:æ¯ä¸ªServerä¿å­˜ä¸€ä»½ç›¸åŒçš„æ•°æ®å‰¯æœ¬ï¼Œ Clientæ— è®ºè¿æ¥åˆ°å“ªä¸ªServerï¼Œæ•°æ®éƒ½æ˜¯ä¸€è‡´çš„ã€‚<br>4)æ›´æ–°è¯·æ±‚é¡ºåºæ‰§è¡Œï¼Œæ¥è‡ªåŒä¸€ä¸ªClientçš„æ›´æ–°è¯·æ±‚æŒ‰å…¶å‘é€é¡ºåºä¾æ¬¡æ‰§è¡Œã€‚<br>5)æ•°æ®æ›´æ–°åŸå­æ€§ï¼Œä¸€æ¬¡æ•°æ®æ›´æ–°è¦ä¹ˆæˆåŠŸï¼Œè¦ä¹ˆå¤±è´¥ã€‚<br>6)å®æ—¶æ€§ï¼Œåœ¨ä¸€å®šæ—¶é—´èŒƒå›´å†…ï¼ŒClientèƒ½è¯»åˆ°æœ€æ–°æ•°æ®ã€‚</li></ol><p>äºŒã€æ•°æ®ç»“æ„<br>ZooKeeperæ•°æ®æ¨¡å‹çš„ç»“æ„ä¸Unixæ–‡ä»¶ç³»ç»Ÿå¾ˆç±»ä¼¼ï¼Œæ•´ä½“ä¸Šå¯ä»¥çœ‹ä½œæ˜¯ä¸€æ£µæ ‘ï¼Œæ¯ä¸ªèŠ‚ç‚¹ç§°åšä¸€ä¸ªZNodeã€‚æ¯ä¸€ä¸ªZNodeé»˜è®¤èƒ½å¤Ÿå­˜å‚¨1MB çš„æ•°æ®ï¼Œæ¯ä¸ªZNodeéƒ½å¯ä»¥é€šè¿‡å…¶è·¯å¾„å”¯ä¸€æ ‡è¯†ã€‚</p><p>ä¸‰ã€åº”ç”¨åœºæ™¯</p><p>æä¾›çš„æœåŠ¡åŒ…æ‹¬ï¼šç»Ÿä¸€å‘½åæœåŠ¡ã€ç»Ÿä¸€é…ç½®ç®¡ç†ã€ç»Ÿä¸€é›†ç¾¤ç®¡ç†ã€æœåŠ¡å™¨èŠ‚ç‚¹åŠ¨æ€ä¸Šä¸‹çº¿ã€è½¯è´Ÿè½½å‡è¡¡ç­‰ã€‚</p><p>å››ã€é…ç½®å‚æ•°</p><p>tickTime &#x3D; 2000ï¼šé€šä¿¡å¿ƒè·³æ—¶é—´ï¼ŒZookeeperæœåŠ¡å™¨ä¸å®¢æˆ·ç«¯å¿ƒè·³æ—¶é—´ï¼Œå•ä½æ¯«ç§’</p><p>initLimit &#x3D; 10ï¼šLFåˆå§‹é€šä¿¡æ—¶é™ï¼Œ10æ¬¡å¿ƒè·³ï¼Œä¹Ÿå°±æ˜¯20sï¼ŒLeaderå’ŒFolloweråˆå§‹é“¾æ¥æ—¶é™</p><p>syncLimit &#x3D; 5ï¼šLFåŒæ­¥é€šä¿¡æ—¶é™ï¼Œä¸¤è€…ä¹‹é—´çš„é€šä¿¡æ—¶é—´ï¼ˆ5sï¼‰</p><p>dataDirï¼šä¿å­˜Zookeeperä¸­çš„æ•°æ®ï¼Œå¯ä»¥ä¿®æ”¹</p><p>clientPort &#x3D; 2181ï¼šå®¢æˆ·ç«¯è¿æ¥ç«¯å£ï¼Œé€šå¸¸ä¸åšä¿®æ”¹</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ä¸€ã€Zookeeperç‰¹ç‚¹&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Zookeeper:ä¸€ä¸ªé¢†å¯¼è€…(Leader)ï¼Œå¤šä¸ªè·Ÿéšè€…(Follower)ç»„æˆçš„é›†ç¾¤ã€‚&lt;br&gt;2)é›†ç¾¤ä¸­åªè¦æœ‰åŠæ•°ä»¥ä¸ŠèŠ‚ç‚¹å­˜æ´»ï¼ŒZookeeperé›†ç¾¤å°±èƒ½æ­£å¸¸æœåŠ¡ã€‚æ‰€ä»¥Zookeeperé€‚åˆå®‰è£…å¥‡æ•°å°æœåŠ¡å™¨ã€‚&lt;br&gt;</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>å¯¹è±¡çš„ä¼˜åŒ–</title>
    <link href="http://zcl0219.github.io/2023/10/22/%E5%AF%B9%E8%B1%A1%E7%9A%84%E4%BC%98%E5%8C%96/"/>
    <id>http://zcl0219.github.io/2023/10/22/%E5%AF%B9%E8%B1%A1%E7%9A%84%E4%BC%98%E5%8C%96/</id>
    <published>2023-10-22T08:31:53.000Z</published>
    <updated>2023-10-22T10:26:35.842Z</updated>
    
    <content type="html"><![CDATA[<p>ä¸€ã€æ‹·è´æ„é€ ã€èµ‹å€¼è¿ç®—ç¬¦é‡è½½çš„ç›¸å…³çŸ¥è¯†</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Test</span>&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Test</span>(<span class="type">int</span> a = <span class="number">10</span>): <span class="built_in">ma</span>(a) &#123; cout &lt;&lt; <span class="string">&quot;Test()&quot;</span> &lt;&lt; endl; &#125;</span><br><span class="line">    <span class="built_in">Test</span>(<span class="type">const</span> Test &amp;t): <span class="built_in">ma</span>(t.ma) &#123; cout &lt;&lt; <span class="string">&quot;Test(const Test&amp;)&quot;</span> &lt;&lt; endl; &#125;</span><br><span class="line">    Test&amp; <span class="keyword">operator</span>=(<span class="type">const</span> Test &amp;t)&#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;operator=&quot;</span> &lt;&lt; endl;</span><br><span class="line">        ma = t.ma;</span><br><span class="line">        <span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    ~<span class="built_in">Test</span>() &#123; cout &lt;&lt; <span class="string">&quot;~Test()&quot;</span> &lt;&lt; endl; &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="type">int</span> ma;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    Test t1;</span><br><span class="line">    <span class="function">Test <span class="title">t2</span><span class="params">(t1)</span></span>;</span><br><span class="line">    Test t3 = t1;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//Test(20)æ˜¾å¼ç”Ÿæˆä¸´æ—¶å¯¹è±¡ ç”Ÿå­˜å‘¨æœŸï¼šæ‰€åœ¨çš„è¯­å¥</span></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    c++ç¼–è¯‘å™¨å¯¹äºå¯¹è±¡æ„é€ çš„ä¼˜åŒ–ï¼š</span></span><br><span class="line"><span class="comment">    ç”¨ä¸´æ—¶å¯¹è±¡ç”Ÿæˆæ–°å¯¹è±¡çš„æ—¶å€™ï¼Œä¸´æ—¶å¯¹è±¡å°±ä¸äº§ç”Ÿäº†ï¼Œç›´æ¥æ„é€ æ–°å¯¹è±¡å°±å¯ä»¥äº†ã€‚</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    Test t4 = <span class="built_in">Test</span>(<span class="number">20</span>); <span class="comment">// Test t4(20)æ²¡æœ‰åŒºåˆ«çš„!</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;-----------------&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    t4 = t2; <span class="comment">// t4å·²ç»å­˜åœ¨ï¼Œè¿™æ˜¯èµ‹å€¼</span></span><br><span class="line">    t4 = <span class="built_in">Test</span>(<span class="number">30</span>); <span class="comment">// t4.operator=(const Test &amp;t)</span></span><br><span class="line">    t4 = (Test)<span class="number">30</span>; <span class="comment">// int -&gt; Test,å¼ºåˆ¶è½¬æ¢ç¼–è¯‘å™¨ä¼šçœ‹æœ‰æ²¡æœ‰åˆé€‚çš„æ„é€ å‡½æ•°</span></span><br><span class="line">    t4 = <span class="number">30</span>; <span class="comment">// éšå¼ç”Ÿæˆä¸´æ—¶å¯¹è±¡ éšå¼ç±»å‹è½¬æ¢ï¼Œæ³¨æ„å¦‚æœ30æ¢æˆä¸€ä¸ªcharç±»å‹å˜é‡ï¼Œé‚£å°±ä¸è¡Œäº†ï¼Œå› ä¸ºæ²¡æœ‰å¯¹åº”çš„æ„é€   å‡½æ•°ã€‚</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;-----------------&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    Test *p = &amp;<span class="built_in">Test</span>(<span class="number">40</span>); <span class="comment">// pæŒ‡å‘çš„æ˜¯ä¸€ä¸ªå·²ç»ææ„çš„ä¸´æ—¶å¯¹è±¡</span></span><br><span class="line">    <span class="type">const</span> Test &amp;ref = <span class="built_in">Test</span>(<span class="number">50</span>);</span><br><span class="line">    <span class="comment">// ä½¿ç”¨å¼•ç”¨å¼•ç”¨ä¸€ä¸ªä¸´æ—¶å˜é‡ï¼Œä¸´æ—¶å˜é‡çš„å‘¨æœŸå°±å˜ä¸ºäº†å˜é‡çš„ç”Ÿå‘½å‘¨æœŸ</span></span><br><span class="line">    <span class="comment">// è‡ªå·±æ€è€ƒä¸ºå¼•ç”¨ç»™å˜é‡èµ·äº†ä¸€ä¸ªåˆ«åï¼Œåœ¨å¼•ç”¨çš„ç”Ÿå‘½å‘¨æœŸå†…ï¼Œå°±å¯ä»¥ç»§ç»­è®¿é—®è¿™ä¸ªä¸´æ—¶å˜é‡äº†</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;-----------------&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Test</span>&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Test</span>(<span class="type">int</span> a = <span class="number">5</span>, <span class="type">int</span> b = <span class="number">5</span>): <span class="built_in">ma</span>(a), <span class="built_in">mb</span>(b)&#123; </span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;Test(int, int)&quot;</span> &lt;&lt; endl; </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">Test</span>(<span class="type">const</span> Test &amp;src): <span class="built_in">ma</span>(src.ma), <span class="built_in">mb</span>(src.mb)&#123; </span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;Test(const Test&amp;)&quot;</span> &lt;&lt; endl; </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">void</span> <span class="keyword">operator</span>=(<span class="type">const</span> Test &amp;src)&#123;</span><br><span class="line">        ma = src.ma;</span><br><span class="line">        mb = src.mb;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;operator=&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    ~<span class="built_in">Test</span>() &#123; cout &lt;&lt; <span class="string">&quot;~Test()&quot;</span> &lt;&lt; endl; &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="type">int</span> ma;</span><br><span class="line">    <span class="type">int</span> mb;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function">Test <span class="title">t1</span><span class="params">(<span class="number">10</span>, <span class="number">10</span>)</span></span>;  <span class="comment">//1. Test(int , int)</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="function">Test <span class="title">t2</span><span class="params">(<span class="number">20</span>, <span class="number">20</span>)</span></span>;  <span class="comment">//3. Test(int , int)</span></span><br><span class="line">    Test t3 = t2; <span class="comment">// 4.Test(const Test&amp;)</span></span><br><span class="line">    <span class="type">static</span> Test t4 = <span class="built_in">Test</span>(<span class="number">30</span>, <span class="number">30</span>); <span class="comment">//5. Test(int, int)</span></span><br><span class="line">    t2 = <span class="built_in">Test</span>(<span class="number">40</span>, <span class="number">40</span>); <span class="comment">//6.Test(int, int), operetor=, ~Test()</span></span><br><span class="line">    t2 = (Test)(<span class="number">50</span>, <span class="number">50</span>); <span class="comment">//7.Test(int, int), operetor=, ~Test()</span></span><br><span class="line">    t2 = <span class="number">60</span>; <span class="comment">//8.Test(int, int), operetor=, ~Test()</span></span><br><span class="line">    Test *p1 = <span class="keyword">new</span> <span class="built_in">Test</span>(<span class="number">70</span>, <span class="number">70</span>); <span class="comment">// 9.Test(int, int),å †ä¸Šéœ€è¦æ˜¾å¼é‡Šæ”¾</span></span><br><span class="line">    Test *p2 = <span class="keyword">new</span> Test[<span class="number">2</span>]; <span class="comment">// 10.Test(int, int), Test(int, int)</span></span><br><span class="line">    Test *p3 = &amp;<span class="built_in">Test</span>(<span class="number">80</span>, <span class="number">80</span>); <span class="comment">//11.Test(int, int), ~Test()</span></span><br><span class="line">    <span class="type">const</span> Test &amp;p4 = <span class="built_in">Test</span>(<span class="number">90</span>, <span class="number">90</span>); <span class="comment">//12.Test(int, int)</span></span><br><span class="line">    <span class="keyword">delete</span> p1; <span class="comment">// 13.~Test()</span></span><br><span class="line">    <span class="keyword">delete</span> []p2; <span class="comment">// 14. ~Test(), ~Test()</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function">Test <span class="title">t5</span><span class="params">(<span class="number">100</span>, <span class="number">100</span>)</span></span>;  <span class="comment">//2. Test(int , int)</span></span><br><span class="line"><span class="comment">// æ³¨æ„ï¼Œt4çš„ææ„æœ€æ™šï¼Œå®ƒåœ¨æ•°æ®æ®µï¼Œéœ€è¦ç­‰ç¨‹åºç»“æŸã€‚</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ä¸€ã€æ‹·è´æ„é€ ã€èµ‹å€¼è¿ç®—ç¬¦é‡è½½çš„ç›¸å…³çŸ¥è¯†&lt;/p&gt;
&lt;figure class=&quot;highlight cpp&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>OS_ucore</title>
    <link href="http://zcl0219.github.io/2023/10/18/OS-ucore/"/>
    <id>http://zcl0219.github.io/2023/10/18/OS-ucore/</id>
    <published>2023-10-18T02:11:15.000Z</published>
    <updated>2023-12-25T18:08:19.076Z</updated>
    
    <content type="html"><![CDATA[<p>1ã€æ“ä½œç³»ç»Ÿè¦å¹²å•¥ï¼Ÿå“ªäº›æ“ä½œ&#x2F;ä»»åŠ¡ä¸å±äºæ“ä½œç³»ç»Ÿçš„ç®¡ç†èŒƒç•´ï¼Ÿ</p><p>2ã€å·¥å…·ä½¿ç”¨</p><p>é˜…è¯»æºç å·¥å…·ï¼š<code>understannd</code></p><p>æºç æ–‡æ¡£è‡ªåŠ¨ç”Ÿæˆå·¥å…·ï¼š<code>doxygen</code></p><p>è™šæ‹Ÿè¿è¡Œç¯å¢ƒï¼š<code>qemu</code></p><p><code>Lab0</code></p><p>1ã€äº†è§£æ±‡ç¼–</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> count = <span class="number">1</span>;</span><br><span class="line"><span class="type">int</span> value = <span class="number">1</span>;</span><br><span class="line"><span class="type">int</span> buf[<span class="number">10</span>];</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">main</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">asm</span>(</span><br><span class="line">        <span class="string">&quot;cld \n\t&quot;</span></span><br><span class="line">            <span class="string">&quot;rep \n\t&quot;</span></span><br><span class="line">            <span class="string">&quot;stosl&quot;</span></span><br><span class="line">        :</span><br><span class="line">        : <span class="string">&quot;c&quot;</span> (count), <span class="string">&quot;a&quot;</span>(value), <span class="string">&quot;D&quot;</span> (buf[<span class="number">0</span>])</span><br><span class="line">        :</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">è¿™æ®µ C ä»£ç ç»™å‡ºäº†ä¸€ä¸ªç®€å•çš„å‡½æ•°ï¼Œå…¶ä¸­åŒ…æ‹¬äº†ä¸€æ®µå†…è”æ±‡ç¼–ã€‚</span></span><br><span class="line"><span class="comment">è¯¥ä»£ç è¯•å›¾å±•ç¤ºå¦‚ä½•ä½¿ç”¨ `rep stos` æŒ‡ä»¤æ¥å¡«å……ä¸€ä¸ªç¼“å†²åŒºï¼Œä½†å­˜åœ¨ä¸€äº›é—®é¢˜å’Œé”™è¯¯ã€‚</span></span><br><span class="line"><span class="comment">æˆ‘ä¼šé€æ­¥è§£é‡Šä»£ç ï¼Œç„¶åæå‡ºå»ºè®®çš„æ›´æ­£ã€‚</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">1. å˜é‡å®šä¹‰:</span></span><br><span class="line"><span class="comment">    ```c</span></span><br><span class="line"><span class="comment">    int count = 1;</span></span><br><span class="line"><span class="comment">    int value = 1;</span></span><br><span class="line"><span class="comment">    int buf[10];</span></span><br><span class="line"><span class="comment">    ```</span></span><br><span class="line"><span class="comment">    ä½ å®šä¹‰äº†ä¸‰ä¸ªå˜é‡ï¼šä¸€ä¸ª `count` ç”¨äºè®°å½•è¦é‡å¤çš„æ¬¡æ•°ï¼Œ</span></span><br><span class="line"><span class="comment">                    ä¸€ä¸ª `value` ç”¨äºæŒ‡å®šè¦å­˜å‚¨çš„å€¼ï¼Œ</span></span><br><span class="line"><span class="comment">                    ä»¥åŠä¸€ä¸ª `buf` æ•°ç»„ç”¨äºå­˜å‚¨æ•°æ®ã€‚</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">2. ä¸»å‡½æ•°å’Œå†…è”æ±‡ç¼–:</span></span><br><span class="line"><span class="comment">    ```c</span></span><br><span class="line"><span class="comment">    void main()&#123;</span></span><br><span class="line"><span class="comment">        asm(</span></span><br><span class="line"><span class="comment">            &quot;cld \n\t&quot;</span></span><br><span class="line"><span class="comment">            &quot;rep \n\t&quot;</span></span><br><span class="line"><span class="comment">            &quot;stsol&quot;</span></span><br><span class="line"><span class="comment">            :</span></span><br><span class="line"><span class="comment">            : &quot;c&quot; (count), &quot;a&quot;(value), &quot;D&quot; (buf[0])</span></span><br><span class="line"><span class="comment">        );</span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment">    ```</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    - `cld`: æ¸…é™¤æ–¹å‘æ ‡å¿—ï¼ˆDirection Flagï¼‰ã€‚è¿™ç¡®ä¿äº†å­—ç¬¦ä¸²æ“ä½œï¼ˆå¦‚ `stos`ï¼‰ä»ä½åœ°å€å‘é«˜åœ°å€æ“ä½œã€‚</span></span><br><span class="line"><span class="comment">    - `rep stos`: è¿™åº”è¯¥æ˜¯ä¸€ä¸ªç»„åˆçš„æŒ‡ä»¤ï¼Œæ„æ€æ˜¯&quot;é‡å¤å­˜å‚¨&quot;ã€‚</span></span><br><span class="line"><span class="comment">      ä½ è¯•å›¾ä½¿ç”¨è¿™ä¸ªæŒ‡ä»¤å°† `value` çš„å†…å®¹å­˜å‚¨åˆ° `buf` æŒ‡å®šçš„å†…å­˜ä½ç½®ï¼Œ</span></span><br><span class="line"><span class="comment">      å¹¶æ ¹æ® `count` çš„å€¼é‡å¤è¯¥æ“ä½œã€‚ä½†è¿™é‡Œæœ‰ä¸ªå°é”™è¯¯: ä½ å†™çš„æ˜¯ `&quot;stsol&quot;`ï¼Œå®ƒæ˜¯ä¸æ­£ç¡®çš„ã€‚åº”è¯¥æ˜¯ `&quot;stosl&quot;`ã€‚</span></span><br><span class="line"><span class="comment">    - è¾“å‡ºçº¦æŸï¼ˆOutput operandsï¼‰: è¿™é‡Œæ²¡æœ‰åˆ—å‡ºè¾“å‡ºæ“ä½œæ•°ï¼Œæ‰€ä»¥ä½ åªæœ‰ä¸€ä¸ªå†’å·ã€‚</span></span><br><span class="line"><span class="comment">    - è¾“å…¥çº¦æŸï¼ˆInput operandsï¼‰: `&quot;c&quot; (count), &quot;a&quot;(value), &quot;D&quot; (buf[0])`ï¼Œè¿™é‡Œ:</span></span><br><span class="line"><span class="comment">        * `&quot;c&quot; (count)`ï¼šæŠŠ `count` æ”¾å…¥ `ECX` å¯„å­˜å™¨ï¼ˆè¿™æ˜¯ `rep` æŒ‡ä»¤ä½¿ç”¨çš„è®¡æ•°å¯„å­˜å™¨ï¼‰ã€‚</span></span><br><span class="line"><span class="comment">        * `&quot;a&quot;(value)`ï¼šæŠŠ `value` æ”¾å…¥ `EAX` å¯„å­˜å™¨ï¼ˆè¿™æ˜¯ `stosl` æŒ‡ä»¤ä½¿ç”¨çš„æºæ•°æ®å¯„å­˜å™¨ï¼‰ã€‚</span></span><br><span class="line"><span class="comment">        * `&quot;D&quot; (buf[0])`ï¼šæŠŠ `buf` çš„é¦–åœ°å€æ”¾å…¥ `EDI` å¯„å­˜å™¨ï¼ˆè¿™æ˜¯ `stosl` æŒ‡ä»¤ä½¿ç”¨çš„ç›®æ ‡åœ°å€å¯„å­˜å™¨ï¼‰ã€‚</span></span><br><span class="line"><span class="comment">          ä½†è¿™æ ·å†™æ˜¯ä¸å‡†ç¡®çš„ï¼Œåº”è¯¥æ˜¯ `&quot;D&quot; (buf)`ã€‚</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">ä¿®æ­£åçš„ä»£ç å¦‚ä¸‹ï¼š</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">```c</span></span><br><span class="line"><span class="comment">int count = 1;</span></span><br><span class="line"><span class="comment">int value = 1;</span></span><br><span class="line"><span class="comment">int buf[10];</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">void main()&#123;</span></span><br><span class="line"><span class="comment">    asm(</span></span><br><span class="line"><span class="comment">        &quot;cld \n\t&quot;</span></span><br><span class="line"><span class="comment">        &quot;rep \n\t&quot;</span></span><br><span class="line"><span class="comment">        &quot;stosl&quot;</span></span><br><span class="line"><span class="comment">        :</span></span><br><span class="line"><span class="comment">        : &quot;c&quot; (count), &quot;a&quot;(value), &quot;D&quot; (buf)</span></span><br><span class="line"><span class="comment">    );</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">```</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">æ³¨æ„ï¼šä½¿ç”¨å†…è”æ±‡ç¼–é€šå¸¸æ˜¯å¹³å°å’Œç¼–è¯‘å™¨ç‰¹å®šçš„ã€‚</span></span><br><span class="line"><span class="comment">ä¸Šè¿°ä»£ç å‡å®šä½ æ­£åœ¨ä½¿ç”¨ GCC æˆ–å…¶å®ƒæ”¯æŒ GNU æ±‡ç¼–è¯­æ³•çš„ç¼–è¯‘å™¨ï¼Œå¹¶ä¸”åœ¨ä¸€ä¸ª x86 æ¶æ„çš„æœºå™¨ä¸Šè¿è¡Œã€‚</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">åœ¨ GCC çš„å†…è”æ±‡ç¼–ä¸­ï¼Œç¬¬ä¸‰ä¸ªå†’å·åé¢çš„éƒ¨åˆ†æ˜¯ç”¨äºæŒ‡å®šè¢«æ±‡ç¼–ä»£ç ä¿®æ”¹çš„å¯„å­˜å™¨åˆ—è¡¨çš„ï¼Œä¹Ÿå«åšâ€œClobber Listâ€ã€‚</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">ä»¥ä¸‹æ˜¯ `asm` çš„åŸºæœ¬æ ¼å¼ï¼š</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">asm ( assembly code </span></span><br><span class="line"><span class="comment">     : output operands                  // optional</span></span><br><span class="line"><span class="comment">     : input operands                   // optional</span></span><br><span class="line"><span class="comment">     : list of clobbered registers      // optional</span></span><br><span class="line"><span class="comment">     );</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">1. Assembly Code: åŒ…å«æ±‡ç¼–æŒ‡ä»¤çš„å­—ç¬¦ä¸²ã€‚</span></span><br><span class="line"><span class="comment">2. Output Operands: è¾“å‡ºæ“ä½œæ•°åˆ—è¡¨ã€‚</span></span><br><span class="line"><span class="comment">3. Input Operands: è¾“å…¥æ“ä½œæ•°åˆ—è¡¨ã€‚</span></span><br><span class="line"><span class="comment">4. Clobber List: è¡¨ç¤ºæ±‡ç¼–æŒ‡ä»¤å¯èƒ½ä¼šæ›´æ”¹çš„å¯„å­˜å™¨åˆ—è¡¨ï¼Œ</span></span><br><span class="line"><span class="comment">   è¿™å‘Šè¯‰ç¼–è¯‘å™¨è¿™äº›å¯„å­˜å™¨çš„å€¼å¯èƒ½ä¼šè¢«ä¿®æ”¹ï¼Œæ‰€ä»¥ä¸è¦ä¾èµ–å®ƒä»¬çš„åŸå§‹å€¼ã€‚</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">åœ¨ä½ çš„ä¾‹å­ä¸­ï¼Œä½ ä½¿ç”¨äº† `&quot;c&quot; (count), &quot;a&quot;(value), &quot;D&quot; (buf[0])` ä¸ºæ±‡ç¼–æŒ‡ä»¤æä¾›è¾“å…¥æ“ä½œæ•°ï¼Œ</span></span><br><span class="line"><span class="comment">ä½†ä½ å¹¶æ²¡æœ‰æŒ‡å®šè¾“å‡ºæ“ä½œæ•°ï¼Œä¹Ÿæ²¡æœ‰åˆ—å‡ºä»»ä½•å¯èƒ½è¢«ä¿®æ”¹çš„å¯„å­˜å™¨ã€‚</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">è™½ç„¶åœ¨æ­¤ä¾‹ä¸­ï¼Œä½ çŸ¥é“ `ECX`, `EAX`, å’Œ `EDI` å¯„å­˜å™¨ä¼šè¢«ä¿®æ”¹ï¼Œ</span></span><br><span class="line"><span class="comment">ä½†åœ¨è®¸å¤šæƒ…å†µä¸‹ï¼Œåˆ—å‡ºclobbered registersæ˜¯å¾ˆæœ‰å¿…è¦çš„ï¼Œå› ä¸ºå®ƒå¯ä»¥å¸®åŠ©ç¼–è¯‘å™¨æ›´å¥½åœ°ä¼˜åŒ–ç”Ÿæˆçš„ä»£ç ã€‚</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">æ‰€ä»¥ï¼Œç†è®ºä¸Šï¼Œä½ çš„ä»£ç åº”è¯¥åƒè¿™æ ·ï¼š</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">int count = 1;</span></span><br><span class="line"><span class="comment">int value = 1;</span></span><br><span class="line"><span class="comment">int buf[10];</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">void main()&#123;</span></span><br><span class="line"><span class="comment">    asm(</span></span><br><span class="line"><span class="comment">        &quot;cld \n\t&quot;</span></span><br><span class="line"><span class="comment">        &quot;rep \n\t&quot;</span></span><br><span class="line"><span class="comment">        &quot;stosl&quot;</span></span><br><span class="line"><span class="comment">        :</span></span><br><span class="line"><span class="comment">        : &quot;c&quot; (count), &quot;a&quot;(value), &quot;D&quot; (buf)</span></span><br><span class="line"><span class="comment">        : &quot;ecx&quot;, &quot;eax&quot;, &quot;edi&quot;</span></span><br><span class="line"><span class="comment">    );</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">è¿™é‡Œï¼Œ`&quot;ecx&quot;, &quot;eax&quot;, &quot;edi&quot;` æ˜¯clobber listï¼Œå‘Šè¯‰ç¼–è¯‘å™¨è¿™äº›å¯„å­˜å™¨çš„å€¼å·²ç»è¢«æ±‡ç¼–ä»£ç ä¿®æ”¹äº†ã€‚</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><p>3ã€æŒæ¡æŒ‡é’ˆå’Œç±»å‹è½¬æ¢ç›¸å…³çš„ï¼£ç¼–ç¨‹</p><p>å®éªŒæºç å¦‚ä¸‹</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> STS_IG32 0xE</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> STS_TG32 0xF</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">unsigned</span> <span class="type">uint32_t</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> SETGATE(gate, istrap, sel, off, dpl)&#123;\</span></span><br><span class="line"><span class="meta">    (gate).gd_off_15_0 = (uint32_t)(off) &amp; 0xffff;\</span></span><br><span class="line"><span class="meta">    (gate).gd_ss = (sel);\</span></span><br><span class="line"><span class="meta">    (gate).gd_args = 0;\</span></span><br><span class="line"><span class="meta">    (gate).gd_rsv1 = 0;\</span></span><br><span class="line"><span class="meta">    (gate).gd_type = (istrap) ? STS_TG32 : STS_IG32;\</span></span><br><span class="line"><span class="meta">    (gate).gd_s = 0;\</span></span><br><span class="line"><span class="meta">    (gate).gd_dpl = (dpl);\</span></span><br><span class="line"><span class="meta">    (gate).gd_p = 1;\</span></span><br><span class="line"><span class="meta">    (gate).gd_off_31_16 = (uint32_t)(off) &gt;&gt; 16;\</span></span><br><span class="line"><span class="meta">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">gatedesc</span>&#123;</span></span><br><span class="line">    <span class="type">unsigned</span> gd_off_15_0: <span class="number">16</span>;</span><br><span class="line">    <span class="type">unsigned</span> gd_ss: <span class="number">16</span>;</span><br><span class="line">    <span class="type">unsigned</span> gd_args: <span class="number">5</span>;</span><br><span class="line">    <span class="type">unsigned</span> gd_rsv1: <span class="number">3</span>;</span><br><span class="line">    <span class="type">unsigned</span> gd_type: <span class="number">4</span>;</span><br><span class="line">    <span class="type">unsigned</span> gd_s: <span class="number">1</span>;</span><br><span class="line">    <span class="type">unsigned</span> gd_dpl: <span class="number">2</span>;</span><br><span class="line">    <span class="type">unsigned</span> gd_p: <span class="number">1</span>;</span><br><span class="line">    <span class="type">unsigned</span> gd_off_31_16: <span class="number">16</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">void</span>)</span>&#123;</span><br><span class="line">    <span class="type">unsigned</span> before;</span><br><span class="line">    <span class="type">unsigned</span> intr;</span><br><span class="line">    <span class="type">unsigned</span> after;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">gatedesc</span> <span class="title">gintr</span>;</span></span><br><span class="line"></span><br><span class="line">    intr = <span class="number">8</span>;</span><br><span class="line">    before = after = <span class="number">0</span>;</span><br><span class="line">    gintr = *((<span class="keyword">struct</span> gatedesc*)&amp;intr);</span><br><span class="line">    SETGATE(gintr, <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>);</span><br><span class="line">    intr = *((<span class="type">unsigned</span>*)&amp;(gintr));</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;intr is 0x%x\n&quot;</span>, intr);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;gintr is 0x%llx\n&quot;</span>, gintr);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è‡ªå·±æ ¹æ®è¾“å‡ºå³å¯æ¨å‡ºæ¥æ˜¯æ€ä¹ˆåšçš„ã€‚æ³¨æ„ï¼Œ<code>gintr</code>ç­‰äº<code>0xee0000010002</code>ä¸­ï¼Œæœ€é«˜16ä½å…¨éƒ¨ç­‰äº0æ²¡æœ‰å±•ç¤ºå‡ºæ¥ã€‚è€Œ%xåªèƒ½å±•ç¤º32ä½ï¼Œæ‰€ä»¥<code>intr</code>çš„è¾“å‡ºç»“æœä¸ºï¼š<code>0x10002</code>ã€‚</p><h4 id="ä¸€ä¸ªè¢«ç³»ç»Ÿè®¤ä¸ºæ˜¯ç¬¦åˆè§„èŒƒçš„ç¡¬ç›˜ä¸»å¼•å¯¼æ‰‡åŒºçš„ç‰¹å¾æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#ä¸€ä¸ªè¢«ç³»ç»Ÿè®¤ä¸ºæ˜¯ç¬¦åˆè§„èŒƒçš„ç¡¬ç›˜ä¸»å¼•å¯¼æ‰‡åŒºçš„ç‰¹å¾æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="ä¸€ä¸ªè¢«ç³»ç»Ÿè®¤ä¸ºæ˜¯ç¬¦åˆè§„èŒƒçš„ç¡¬ç›˜ä¸»å¼•å¯¼æ‰‡åŒºçš„ç‰¹å¾æ˜¯ä»€ä¹ˆï¼Ÿ"></a>ä¸€ä¸ªè¢«ç³»ç»Ÿè®¤ä¸ºæ˜¯ç¬¦åˆè§„èŒƒçš„ç¡¬ç›˜ä¸»å¼•å¯¼æ‰‡åŒºçš„ç‰¹å¾æ˜¯ä»€ä¹ˆï¼Ÿ</h4><p>ç¡¬ç›˜ä¸»å¼•å¯¼æ‰‡åŒºï¼ˆMaster Boot Recordï¼ŒMBRï¼‰æ˜¯ä½äºç¡¬ç›˜ç¬¬ä¸€ä¸ªæ‰‡åŒºï¼ˆé€šå¸¸æ˜¯é€»è¾‘åœ°å€0å·æ‰‡åŒºï¼‰çš„512å­—èŠ‚çš„æ•°æ®ç»“æ„ï¼Œç”¨äºå¼•å¯¼è®¡ç®—æœºæ“ä½œç³»ç»Ÿã€‚ä¸€ä¸ªç¬¦åˆè§„èŒƒçš„ç¡¬ç›˜ä¸»å¼•å¯¼æ‰‡åŒºåº”è¯¥åŒ…å«ä»¥ä¸‹å‡ ä¸ªç‰¹å¾ï¼š</p><ol><li><p><strong>å¼•å¯¼ä»£ç ï¼ˆBoot Codeï¼‰ï¼š</strong> å‰446ä¸ªå­—èŠ‚ç”¨äºå­˜å‚¨å¼•å¯¼ä»£ç ï¼Œè¿™æ˜¯å¼•å¯¼åŠ è½½ç¨‹åºï¼ˆBoot Loaderï¼‰çš„ä»£ç ï¼Œè´Ÿè´£åŠ è½½æ“ä½œç³»ç»Ÿã€‚è¿™æ®µä»£ç å¿…é¡»æ˜¯æœ‰æ•ˆçš„æ±‡ç¼–ä»£ç ï¼Œèƒ½å¤Ÿå¯åŠ¨è®¡ç®—æœºã€‚</p></li><li><p><strong>åˆ†åŒºè¡¨ï¼ˆPartition Tableï¼‰ï¼š</strong> æ¥ä¸‹æ¥çš„64å­—èŠ‚ç”¨äºå­˜å‚¨åˆ†åŒºè¡¨ï¼Œæ¯ä¸ªåˆ†åŒºè¡¨é¡¹å 16å­—èŠ‚ã€‚ä¸€ä¸ªç¡¬ç›˜å¯ä»¥åˆ†ä¸ºæœ€å¤š4ä¸ªä¸»åˆ†åŒºï¼Œæ¯ä¸ªåˆ†åŒºè¡¨é¡¹æè¿°ä¸€ä¸ªåˆ†åŒºçš„èµ·å§‹ä½ç½®ã€å¤§å°å’Œåˆ†åŒºç±»å‹ç­‰ä¿¡æ¯ã€‚</p></li><li><p><strong>ç­¾åå­—èŠ‚ï¼ˆSignatureï¼‰ï¼š</strong> æœ€åçš„ä¸¤ä¸ªå­—èŠ‚ï¼ˆ0x55AAï¼‰æ˜¯MBRçš„ç­¾åï¼Œæ ‡å¿—è¿™ä¸ªæ‰‡åŒºæ˜¯æœ‰æ•ˆçš„MBRæ‰‡åŒºã€‚è¿™ä¸ªç­¾åæ˜¯ä¸ªå°ç«¯å­—èŠ‚åºçš„16ä½å€¼ï¼Œå®ƒå‘Šè¯‰æ“ä½œç³»ç»Ÿè¿™ä¸ªæ‰‡åŒºåŒ…å«äº†å¼•å¯¼ä¿¡æ¯ï¼Œæ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„MBRã€‚</p></li></ol><p>æ€»ç»“èµ·æ¥ï¼Œä¸€ä¸ªè¢«ç³»ç»Ÿè®¤ä¸ºæ˜¯ç¬¦åˆè§„èŒƒçš„ç¡¬ç›˜ä¸»å¼•å¯¼æ‰‡åŒºåº”è¯¥åŒ…å«å¼•å¯¼ä»£ç ã€åˆ†åŒºè¡¨å’Œç­¾åå­—èŠ‚ã€‚è¿™äº›ç‰¹å¾æ˜¯ä¸ºäº†ç¡®ä¿å¼•å¯¼åŠ è½½ç¨‹åºå¯ä»¥æ­£ç¡®åœ°è¯»å–åˆ†åŒºä¿¡æ¯ï¼Œä»è€Œå¯åŠ¨æ“ä½œç³»ç»Ÿã€‚å¦‚æœè¿™äº›ç‰¹å¾ä¸­çš„ä»»ä½•ä¸€ä¸ªç¼ºå¤±æˆ–æŸåï¼Œå¯èƒ½å¯¼è‡´ç³»ç»Ÿæ— æ³•æ­£ç¡®å¼•å¯¼ã€‚</p><p>å¼•å¯¼æ‰‡åŒºä»£ç ï¼ˆ<code>tools/sign.c</code>ï¼‰</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;errno.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sys/stat.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span> &#123; </span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">stat</span> <span class="title">st</span>;</span> </span><br><span class="line">    <span class="keyword">if</span>(argc != <span class="number">3</span>) &#123;</span><br><span class="line">        <span class="built_in">fprintf</span>(<span class="built_in">stderr</span>, <span class="string">&quot;Usage: &lt;input filename&gt; &lt;output filename&gt;\n&quot;</span>); </span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (stat(argv[<span class="number">1</span>], &amp;st) != <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="built_in">fprintf</span>(<span class="built_in">stderr</span>, <span class="string">&quot;Error opening file &#x27;%s&#x27;: %s\n&quot;</span>, argv[<span class="number">1</span>], strerror(errno)); </span><br><span class="line">        <span class="keyword">return</span><span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;&#x27;%s&#x27; size: %lld bytes\n&quot;</span>, argv[<span class="number">1</span>], (<span class="type">long</span> <span class="type">long</span>)st.st_size); </span><br><span class="line">    <span class="keyword">if</span> (st.st_size &gt; <span class="number">510</span>) &#123;</span><br><span class="line">        <span class="built_in">fprintf</span>(<span class="built_in">stderr</span>, <span class="string">&quot;%lld &gt;&gt; 510!!\n&quot;</span>, (<span class="type">long</span> <span class="type">long</span>)st.st_size); </span><br><span class="line">        <span class="keyword">return</span><span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">char</span> buf[<span class="number">512</span>];</span><br><span class="line">    <span class="built_in">memset</span>(buf, <span class="number">0</span>, <span class="keyword">sizeof</span>(buf)); </span><br><span class="line">    FILE*ifp=fopen(argv[<span class="number">1</span>], <span class="string">&quot;rb&quot;</span>);</span><br><span class="line">    <span class="type">int</span> size = fread(buf, <span class="number">1</span>,st.st_size, ifp); </span><br><span class="line">    <span class="keyword">if</span> (size != st.st_size) &#123;</span><br><span class="line">        <span class="built_in">fprintf</span>(<span class="built_in">stderr</span>, <span class="string">&quot;read &#x27;%s&#x27; error, size is %d.\n&quot;</span>, argv[<span class="number">1</span>], size); </span><br><span class="line">        <span class="keyword">return</span><span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    fclose(ifp);</span><br><span class="line">    buf[<span class="number">510</span>]= <span class="number">0x55</span>; </span><br><span class="line">    buf[<span class="number">511</span>] =<span class="number">0xAA</span>;</span><br><span class="line">    FILE*ofp = fopen(argv[<span class="number">2</span>], <span class="string">&quot;wb+&quot;</span>);</span><br><span class="line">    size = fwrite(buf, <span class="number">1</span>, <span class="number">512</span>, ofp); </span><br><span class="line">    <span class="keyword">if</span> (size != <span class="number">512</span>) &#123;</span><br><span class="line">        <span class="built_in">fprintf</span>(<span class="built_in">stderr</span>, <span class="string">&quot;write &#x27;%s&#x27; error, size is %d.\n&quot;</span>, argv[<span class="number">2</span>], size); </span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    fclose(ofp);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;build 512 bytes boot sector: &#x27;%s&#x27; success!\n&quot;</span>, argv[<span class="number">2</span>]); </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">æ³¨é‡Š</span></span><br><span class="line"><span class="comment">è¿™æ˜¯ä¸€ä¸ªç®€å•çš„Cç¨‹åºï¼Œç”¨äºç”Ÿæˆä¸€ä¸ªåŒ…å«å¼•å¯¼ä»£ç çš„512å­—èŠ‚çš„å¼•å¯¼æ‰‡åŒºï¼ˆBoot Sectorï¼‰ã€‚è¿™æ ·çš„å¼•å¯¼æ‰‡åŒºé€šå¸¸ç”¨äºåˆ›å»ºå¯å¼•å¯¼çš„å­˜å‚¨ä»‹è´¨ï¼Œä¾‹å¦‚ç¡¬ç›˜ã€Uç›˜ç­‰ã€‚ä»¥ä¸‹æ˜¯ç¨‹åºçš„ä¸»è¦åŠŸèƒ½å’Œæµç¨‹ï¼š</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">1. ä½¿ç”¨ `stat` å‡½æ•°è·å–æŒ‡å®šè¾“å…¥æ–‡ä»¶ï¼ˆ`argv[1]`ï¼‰çš„ä¿¡æ¯ï¼Œä¸»è¦æ˜¯æ–‡ä»¶å¤§å°ã€‚</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">2. æ‰“å°è¾“å…¥æ–‡ä»¶çš„å¤§å°ã€‚</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">3. æ£€æŸ¥æ–‡ä»¶å¤§å°æ˜¯å¦è¶…è¿‡äº†510å­—èŠ‚ã€‚å¦‚æœè¶…è¿‡ï¼Œæ‰“å°é”™è¯¯ä¿¡æ¯å¹¶é€€å‡ºç¨‹åºã€‚</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">4. è¯»å–è¾“å…¥æ–‡ä»¶çš„å†…å®¹ï¼ˆæœ€å¤š510å­—èŠ‚ï¼‰ï¼Œå°†å†…å®¹å­˜å‚¨åœ¨ä¸€ä¸ªå¤§å°ä¸º512å­—èŠ‚çš„ç¼“å†²åŒºä¸­ã€‚</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">5. åœ¨ç¼“å†²åŒºçš„å€’æ•°ç¬¬äºŒä¸ªå­—èŠ‚ï¼ˆç¬¬510å­—èŠ‚ï¼‰å†™å…¥0x55ï¼Œå€’æ•°ç¬¬ä¸€ä¸ªå­—èŠ‚ï¼ˆç¬¬511å­—èŠ‚ï¼‰å†™å…¥0xAAã€‚è¿™æ˜¯å¼•å¯¼æ‰‡åŒºçš„æ ‡å¿—ï¼Œç”¨äºå‘Šè¯‰è®¡ç®—æœºç³»ç»Ÿè¿™æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„å¼•å¯¼æ‰‡åŒºã€‚</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">6. æ‰“å¼€è¾“å‡ºæ–‡ä»¶ï¼ˆ`argv[2]`ï¼‰ï¼Œå°†ä¿®æ”¹åçš„ç¼“å†²åŒºå†™å…¥æ–‡ä»¶ã€‚</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">7. æ‰“å°æˆåŠŸä¿¡æ¯å¹¶è¿”å›0ã€‚</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">è¿™ä¸ªç¨‹åºçš„ç›®çš„æ˜¯åˆ›å»ºä¸€ä¸ªç¬¦åˆæ ‡å‡†çš„å¼•å¯¼æ‰‡åŒºï¼Œå…¶ä¸­åŒ…å«å¼•å¯¼ä»£ç å’Œæ ‡å¿—å­—èŠ‚ã€‚è¯·æ³¨æ„ï¼Œç”Ÿæˆçš„å¼•å¯¼æ‰‡åŒºåœ¨å®é™…ä½¿ç”¨æ—¶éœ€è¦æŒ‰ç…§å¼•å¯¼æ‰‡åŒºçš„è§„èŒƒè¿›è¡Œè¿›ä¸€æ­¥é…ç½®ï¼Œä»¥ç¡®ä¿å®ƒèƒ½å¤Ÿæ­£ç¡®åœ°å¼•å¯¼è®¡ç®—æœºç³»ç»Ÿã€‚</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">ä»¥ä¸‹æ˜¯ç¨‹åºçš„ä¸€äº›å¯èƒ½çš„æ”¹è¿›å’Œæ³¨æ„äº‹é¡¹ï¼š</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">- æ·»åŠ æ›´å¤šçš„é”™è¯¯æ£€æŸ¥ï¼Œä¾‹å¦‚æ£€æŸ¥æ–‡ä»¶æ˜¯å¦æˆåŠŸæ‰“å¼€ã€‚</span></span><br><span class="line"><span class="comment">- è€ƒè™‘å¤„ç†æ›´å¤šçš„è¾¹ç•Œæƒ…å†µï¼Œä¾‹å¦‚æ–‡ä»¶æ˜¯å¦ä¸ºç©ºã€‚</span></span><br><span class="line"><span class="comment">- è€ƒè™‘ä½¿ç”¨äºŒè¿›åˆ¶æ–‡ä»¶è¯»å†™æ¨¡å¼ï¼ˆ&quot;rb&quot; å’Œ &quot;wb+&quot;ï¼‰è€Œä¸æ˜¯æ–‡æœ¬æ¨¡å¼ã€‚</span></span><br><span class="line"><span class="comment">- è€ƒè™‘ä½¿ç”¨ `perror` å‡½æ•°æ¥æ‰“å°ä¸ `fopen`ã€`fread`ã€`fwrite` ç›¸å…³çš„é”™è¯¯ä¿¡æ¯ã€‚</span></span><br><span class="line"><span class="comment">- è€ƒè™‘å¤„ç†å¤§ç«¯å’Œå°ç«¯å­—èŠ‚åºçš„é—®é¢˜ï¼Œç‰¹åˆ«æ˜¯å½“æ¶‰åŠåˆ°äºŒè¿›åˆ¶æ–‡ä»¶æ—¶ã€‚</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;1ã€æ“ä½œç³»ç»Ÿè¦å¹²å•¥ï¼Ÿå“ªäº›æ“ä½œ&amp;#x2F;ä»»åŠ¡ä¸å±äºæ“ä½œç³»ç»Ÿçš„ç®¡ç†èŒƒç•´ï¼Ÿ&lt;/p&gt;
&lt;p&gt;2ã€å·¥å…·ä½¿ç”¨&lt;/p&gt;
&lt;p&gt;é˜…è¯»æºç å·¥å…·ï¼š&lt;code&gt;understannd&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;æºç æ–‡æ¡£è‡ªåŠ¨ç”Ÿæˆå·¥å…·ï¼š&lt;code&gt;doxygen&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;è™šæ‹Ÿ</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>è®¾è®¡æ¨¡å¼</title>
    <link href="http://zcl0219.github.io/2023/10/07/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    <id>http://zcl0219.github.io/2023/10/07/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/</id>
    <published>2023-10-06T18:57:06.000Z</published>
    <updated>2023-10-06T18:57:06.148Z</updated>
    
    
    
    
    
  </entry>
  
  <entry>
    <title>Linuxé«˜æ€§èƒ½æœåŠ¡å™¨-ç¬¬å…«ç« </title>
    <link href="http://zcl0219.github.io/2023/09/07/Linux%E9%AB%98%E6%80%A7%E8%83%BD%E6%9C%8D%E5%8A%A1%E5%99%A8-%E7%AC%AC%E5%85%AB%E7%AB%A0/"/>
    <id>http://zcl0219.github.io/2023/09/07/Linux%E9%AB%98%E6%80%A7%E8%83%BD%E6%9C%8D%E5%8A%A1%E5%99%A8-%E7%AC%AC%E5%85%AB%E7%AB%A0/</id>
    <published>2023-09-07T01:30:19.000Z</published>
    <updated>2023-09-07T01:44:27.621Z</updated>
    
    <content type="html"><![CDATA[<p>è¿™é‡Œå› ä¸ºåšé¡¹ç›®çš„éœ€è¦ï¼Œæˆ‘å…ˆå†™ä¸‹8.6èŠ‚æœ‰å…³æœ‰é™çŠ¶æ€æœºçš„å†…å®¹</p><p>è¿™ä¸€èŠ‚æˆ‘ä»¬ä»‹ç»é€»è¾‘å•å…ƒå†…éƒ¨çš„ä¸€ç§é«˜æ•ˆç¼–ç¨‹æ–¹æ³•ï¼šæœ‰é™çŠ¶æ€æœºã€‚æœ‰çš„åº”ç”¨å±‚åè®®å¤´éƒ¨åŒ…å«æ•°æ®åŒ…ç±»å‹å­—æ®µï¼Œæ¯ç§ç±»å‹å¯ä»¥æ˜ å°„ä¸ºé€»è¾‘å•å…ƒçš„ä¸€ç§æ‰§è¡ŒçŠ¶æ€ï¼ŒæœåŠ¡å™¨å¯ä»¥æ ¹æ®å®ƒæ¥ç¼–å†™ç›¸åº”çš„å¤„ç†é€»è¾‘ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;è¿™é‡Œå› ä¸ºåšé¡¹ç›®çš„éœ€è¦ï¼Œæˆ‘å…ˆå†™ä¸‹8.6èŠ‚æœ‰å…³æœ‰é™çŠ¶æ€æœºçš„å†…å®¹&lt;/p&gt;
&lt;p&gt;è¿™ä¸€èŠ‚æˆ‘ä»¬ä»‹ç»é€»è¾‘å•å…ƒå†…éƒ¨çš„ä¸€ç§é«˜æ•ˆç¼–ç¨‹æ–¹æ³•ï¼šæœ‰é™çŠ¶æ€æœºã€‚æœ‰çš„åº”ç”¨å±‚åè®®å¤´éƒ¨åŒ…å«æ•°æ®åŒ…ç±»å‹å­—æ®µï¼Œæ¯ç§ç±»å‹å¯ä»¥æ˜ å°„ä¸ºé€»è¾‘å•å…ƒçš„ä¸€ç§æ‰§è¡ŒçŠ¶æ€ï¼ŒæœåŠ¡å™¨å¯ä»¥æ ¹æ®å®ƒæ¥ç¼–å†™ç›¸åº”çš„å¤„ç†é€»è¾‘ã€‚&lt;/p&gt;
</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>CMake</title>
    <link href="http://zcl0219.github.io/2023/08/29/CMake/"/>
    <id>http://zcl0219.github.io/2023/08/29/CMake/</id>
    <published>2023-08-29T14:34:47.000Z</published>
    <updated>2023-09-06T02:00:51.820Z</updated>
    
    <content type="html"><![CDATA[<p>è¿™é‡Œç”»ä¸€ä¸ªå›¾ç›´æ¥ç›´æ¥å±•ç¤ºä¸€ä¸‹CMakeå’ŒMakefileçš„ä½¿ç”¨è¿‡ç¨‹</p><p><img src="png1.png"></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">g++ *.cpp -o app  <span class="comment">//ç›´æ¥ç¼–è¯‘    </span></span><br></pre></td></tr></table></figure><p>ä½¿ç”¨#æ³¨é‡Š</p><p>å—æ³¨é‡Š#[[ ]]</p><p>camke_minimum_requiredï¼šæŒ‡å®šä½¿ç”¨çš„cmakeçš„æœ€ä½ç‰ˆæœ¬</p><p>projectï¼šå®šä¹‰å·¥ç¨‹åç§°</p><p>add_executableï¼šå®šä¹‰å·¥ç¨‹ä¼šç”Ÿæˆä¸€ä¸ªå¯æ‰§è¡Œç¨‹åº add_executable(å¯æ‰§è¡Œç¨‹åºåç§° æºæ–‡ä»¶åç§°ï¼ˆç©ºæ ¼æˆ–è€…åˆ†å·éš”ç¦»æºæ–‡ä»¶)ï¼‰</p><p>cmake CMakeLists.txtï¼šæ–‡ä»¶æ‰€åœ¨è·¯å¾„</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cmake_minimum_required</span>(VERSION <span class="number">3.15</span>)</span><br><span class="line"><span class="keyword">project</span>(<span class="keyword">test</span>)</span><br><span class="line"><span class="keyword">add_executable</span>(app, add.cpp div.cpp mult.cpp main.cpp sub.cpp)</span><br><span class="line"></span><br><span class="line"><span class="comment">#å¦‚æœCMakeLists.txtæ–‡ä»¶å°±åœ¨å½“å‰ç›®å½•ä¸‹ï¼Œç›´æ¥æ‰§è¡Œä»¥ä¸‹å‘½ä»¤</span></span><br><span class="line">cmake .</span><br><span class="line">make</span><br><span class="line"><span class="comment">#å°±ä¼šå‡ºç°appå¯æ‰§è¡Œæ–‡ä»¶</span></span><br></pre></td></tr></table></figure><p>ç”Ÿæˆäº†å¾ˆå¤šå…¶ä»–æ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠè¿™äº›ä¸´æ—¶æ–‡ä»¶æ”¾åœ¨ä¸€ä¸ªæ–‡ä»¶å¤¹é‡Œï¼Œä¸€èˆ¬ä¸ºbuildæ–‡ä»¶å¤¹ã€‚åˆ›å»ºbuildæ–‡ä»¶åï¼Œcdè¿›buildæ–‡ä»¶ï¼Œæ‰§è¡Œcamke ..ï¼Œåˆ™cmakeæ‰§è¡Œåç”Ÿæˆçš„æ–‡ä»¶éƒ½æ”¾åœ¨äº†buildæ–‡ä»¶å¤¹é‡Œã€‚</p><h3 id="setçš„ä½¿ç”¨"><a href="#setçš„ä½¿ç”¨" class="headerlink" title="setçš„ä½¿ç”¨"></a><code>set</code>çš„ä½¿ç”¨</h3><p>setæ˜¯ä¸ºäº†ç®€åŒ–add_executable(app, add.cpp div.cpp mult.cpp main.cpp sub.cpp)çš„ç¼–å†™ï¼Œè¦ä¸ç„¶è¿™æ ·å’Œç›´æ¥ç¼–è¯‘æ„Ÿè§‰æ²¡å•¥åŒºåˆ«ã€‚setç»™ä¸€ä¸ªå˜é‡èµ‹å€¼éƒ½æ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼Œè¿™äº›æ–‡ä»¶çš„åå­—ä¼šä½œä¸ºä¸€ä¸ªå­—ç¬¦ä¸²å­˜åœ¨å˜é‡é‡Œã€‚</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># setæŒ‡ä»¤çš„è¯­æ³•æ˜¯ï¼š</span></span><br><span class="line"><span class="comment"># [] ä¸­çš„å‚æ•°ä¸ºå¯é€‰é¡¹ï¼Œå¦‚ä¸éœ€è¦å¯ä»¥ä¸å†™</span></span><br><span class="line"><span class="keyword">set</span>(VAR [VALUE] [CACHE TYPE DOCSTRING [FORCE]])</span><br><span class="line"></span><br><span class="line"><span class="comment"># VARï¼šå˜é‡å</span></span><br><span class="line"><span class="comment"># VALUEï¼šå˜é‡å€¼</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ–¹å¼ä¸€ï¼šå„ä¸ªæºæ–‡ä»¶ä¹‹é—´ä½¿ç”¨ç©ºæ ¼é—´éš”</span></span><br><span class="line"><span class="keyword">set</span>(SRC_LIST add.c div.c main.c mult.c sub.c)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ–¹å¼äºŒï¼šå„ä¸ªæºæ–‡ä»¶ä¹‹é—´ä½¿ç”¨;é—´éš”</span></span><br><span class="line"><span class="keyword">set</span>(SRC_LIST add.c;div.c;main.c;mult.c;sub.c)</span><br><span class="line"></span><br><span class="line"><span class="keyword">add_executable</span>(app <span class="variable">$&#123;SRC_LIST&#125;</span>)</span><br></pre></td></tr></table></figure><p>å–å˜é‡å€¼å¿…é¡»ä»¥è¿™ç§æ–¹å¼ã€‚</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># &quot;$ + &#123;å˜é‡å&#125;&quot;</span></span><br><span class="line"><span class="variable">$&#123;SRC_LIST&#125;</span></span><br></pre></td></tr></table></figure><p>è¿˜å¯ä»¥é€šè¿‡setè®¾ç½®ä½¿ç”¨C++çš„æ ‡å‡†ï¼ˆC++11ï¼ŒC++17ï¼‰ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ­£å¸¸ç¼–è¯‘é€‰å®šc++æ ‡å‡†</span></span><br><span class="line">g++ *.cpp -std=c++11 -o app</span><br></pre></td></tr></table></figure><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä½¿ç”¨camkeæŒ‡å®šc++æ ‡å‡†ï¼Œå¯¹åº”æœ‰ä¸€ä¸ªå®å«åšDCMAKE_Cxx_STANDARD</span></span><br><span class="line"><span class="comment"># ç”±ä¸¤ç§æ–¹å¼æŒ‡å®šC++æ ‡å‡†</span></span><br><span class="line"><span class="comment"># ç¬¬ä¸€ç§ï¼šåœ¨CMakeLists.txtä¸­é€šè¿‡setå‘½ä»¤æŒ‡å®š</span></span><br><span class="line"><span class="keyword">set</span>(CAMKE_CXX_STANDARD <span class="number">11</span>)  <span class="comment"># ç­‰ä»·äºå¢åŠ  -std=c++11</span></span><br><span class="line"><span class="keyword">set</span>(CAMKE_CXX_STANDARD <span class="number">14</span>)</span><br><span class="line"><span class="keyword">set</span>(CAMKE_CXX_STANDARD <span class="number">17</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¬¬äºŒç§ï¼šåœ¨æ‰§è¡Œcamkeå‘½ä»¤çš„æ—¶å€™åˆ¶å®šå‡ºè¿™ä¸ªå®çš„å€¼</span></span><br><span class="line">camke CMakeLists.txtæ–‡ä»¶è·¯å¾„ -DCMAKE_CXX_STANDARD=<span class="number">11</span></span><br><span class="line">cmake CMakeLists.txtæ–‡ä»¶è·¯å¾„ -DCMAKE_CXX_STANDARD=<span class="number">14</span></span><br><span class="line">cmake CMakeLists.txtæ–‡ä»¶è·¯å¾„ -DCMAKE_CXX_STANDARD=<span class="number">17</span></span><br></pre></td></tr></table></figure><p>setè¿˜å¯ä»¥æŒ‡å®šè¾“å‡ºè·¯å¾„ï¼Œå»ºè®®ä½¿ç”¨ç»å¯¹è·¯å¾„ï¼Œå¦‚æœè¿™ä¸ªè·¯å¾„ä¸­çš„å­ç›®å½•ä¸å­˜åœ¨ï¼Œä¼šè‡ªåŠ¨ç”Ÿæˆï¼Œæ— éœ€è‡ªå·±æ‰‹åŠ¨åˆ›å»ºã€‚</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åœ¨CMakeä¸­æŒ‡å®šå¯æ‰§è¡Œç¨‹åºè¾“å‡ºçš„è·¯å¾„ï¼Œä¹Ÿå¯¹åº”ä¸€ä¸ªå®ï¼Œå«åšEXECUTABLE_OUTPUT_PATHï¼Œå®ƒçš„å€¼è¿˜æ˜¯é€šè¿‡setå‘½ä»¤è®¾ç½®</span></span><br><span class="line"><span class="keyword">set</span>(HOME /home/zcl/linux/soft)</span><br><span class="line"><span class="keyword">set</span>(EXECUTABLE_UOTPUT_PATH <span class="variable">$&#123;HOME&#125;</span>/bin)</span><br><span class="line"><span class="comment"># ç¬¬ä¸€è¡Œï¼šå®šä¹‰ä¸€ä¸ªå˜é‡ç”¨äºå­˜å‚¨ä¸€ä¸ªç»å¯¹è·¯å¾„</span></span><br><span class="line"><span class="comment"># ç¬¬äºŒè¡Œï¼šå°†æ‹¼æ¥å¥½çš„è·¯å¾„å€¼è®¾ç½®ç»™EXECUTABLE_OUTPUT_PATHå®</span></span><br></pre></td></tr></table></figure><h3 id="æœç´¢è·¯å¾„"><a href="#æœç´¢è·¯å¾„" class="headerlink" title="æœç´¢è·¯å¾„"></a>æœç´¢è·¯å¾„</h3><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æˆ‘ä»¬ä¸Šé¢æ‰€è®²çš„ä½¿ç”¨setå¹¶æ²¡æœ‰è§£å†³è¦å°†æ‰€æœ‰æºæ–‡ä»¶åå­—å†™å‡ºæ¥çš„æœ¬è´¨é—®é¢˜ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œè¿™é‡Œæˆ‘ä»¬è®²ä¸€ä¸‹é€šè¿‡æœç´¢æŸä¸ªç›®å½•ä¸‹çš„æ–‡ä»¶æ¥å¼•å…¥æºæ–‡ä»¶çš„æ–¹æ³•ã€‚CMakeç»™æˆ‘ä»¬æä¾›äº†ä¸¤ç§æ–¹æ³•æ¥æœç´¢æ–‡ä»¶ï¼Œaux_source_directoryå‘½ä»¤æˆ–è€…fileå‘½ä»¤ã€‚</p><h4 id="æ–¹å¼ä¸€"><a href="#æ–¹å¼ä¸€" class="headerlink" title="æ–¹å¼ä¸€"></a>æ–¹å¼ä¸€</h4><p>åœ¨CMakeä¸­ä½¿ç”¨aux_source_directoryå‘½ä»¤å¯ä»¥æŸ¥æ‰¾æŸä¸ªè·¯å¾„ä¸‹çš„æ‰€æœ‰æºæ–‡ä»¶ã€‚</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å‘½ä»¤æ ¼å¼</span></span><br><span class="line"><span class="keyword">aux_source_directory</span>(&lt;dir&gt; &lt;variable&gt;)</span><br><span class="line"><span class="comment"># dirï¼šè¦æœç´¢çš„ç›®å½•</span></span><br><span class="line"><span class="comment"># variableï¼šå°†ä»dirç›®å½•ä¸‹æœç´¢åˆ°çš„æºæ–‡ä»¶åˆ—è¡¨å­˜å‚¨åˆ°è¯¥å˜é‡ä¸­</span></span><br><span class="line"><span class="comment"># è¿™é‡Œä»‹ç»ä¸€ä¸ªå®ï¼ŒPROJECT_SOURCE_DIRå®ä»£è¡¨çš„å°±æ˜¯æˆ‘ä»¬åœ¨camkeå‘½ä»¤åæºå¸¦çš„é‚£ä¸ªè·¯å¾„ã€‚æ¯”å¦‚camke ..ï¼ŒPROJECT_SORCE_DIRå®ä»£è¡¨çš„å°±æ˜¯`..`</span></span><br><span class="line"><span class="comment"># å†ä»‹ç»å¦å¤–ä¸€ä¸ªå®ï¼ŒCMAKE_CURRENT_SOURCE_DIRå®ä»£è¡¨çš„å°±æ˜¯å½“å‰CMakelists.txtæ–‡ä»¶æ‰€åœ¨çš„è·¯å¾„</span></span><br><span class="line"><span class="comment"># ä¸‹é¢è¿›å…¥å®æ“ï¼Œæ¯”å¦‚æœç´¢å½“å‰CMakelists.txtæ–‡ä»¶æ‰€åœ¨ç›®å½•ä¸‹çš„srcç›®å½•</span></span><br><span class="line"><span class="keyword">aux_source_directory</span>(<span class="variable">$&#123;PROJECT_SOURCE_DIR&#125;</span>/src SRC_LIST)</span><br><span class="line"><span class="keyword">add_executable</span>(app <span class="variable">$&#123;SRC_LIST&#125;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="æ–¹å¼äºŒ"><a href="#æ–¹å¼äºŒ" class="headerlink" title="æ–¹å¼äºŒ"></a>æ–¹å¼äºŒ</h4><p>é€šè¿‡fileå‘½ä»¤æ¥æœç´¢å‡ºæ‰€æœ‰éœ€è¦çš„æºæ–‡ä»¶</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å‘½ä»¤æ ¼å¼</span></span><br><span class="line"><span class="keyword">file</span>(GLOB å˜é‡å è¦æœç´¢çš„æ–‡ä»¶è·¯å¾„å’Œæ–‡ä»¶ç±»å‹)</span><br><span class="line"><span class="keyword">file</span>(GLOB_RECURSE å˜é‡å è¦æœç´¢çš„æ–‡ä»¶è·¯å¾„å’Œæ–‡ä»¶ç±»å‹)</span><br><span class="line"><span class="comment"># GLOBï¼šå°†æŒ‡å®šç›®å½•ä¸‹æœç´¢åˆ°çš„æ»¡è¶³æ¡ä»¶çš„æ‰€æœ‰æ–‡ä»¶åç”Ÿæˆä¸€ä¸ªåˆ—è¡¨ï¼Œå¹¶å°†å…¶å­˜å‚¨åˆ°å˜é‡ä¸­</span></span><br><span class="line"><span class="comment"># GLOB_RECURSEï¼šé€’å½’æœç´¢æŒ‡å®šç›®å½•ï¼Œå°†æœç´¢åˆ°çš„æ»¡è¶³æ¡ä»¶çš„æ–‡ä»¶åç”Ÿæˆä¸€ä¸ªåˆ—è¡¨ï¼Œå¹¶å°†å…¶å­˜å‚¨åˆ°å˜é‡ä¸­</span></span><br><span class="line"><span class="comment"># æ¯”å¦‚ï¼šæœç´¢å½“å‰ç›®å½•çš„srcç›®å½•ä¸‹æ‰€æœ‰çš„æºæ–‡ä»¶ï¼Œå¹¶å°†å…¶å­˜å‚¨åˆ°å˜é‡ä¸­</span></span><br><span class="line"><span class="keyword">file</span>(GLOB MAIN_SRC <span class="variable">$&#123;CMAKE_CURRENT_SOURCE_DIR&#125;</span>/src/*.cpp)</span><br><span class="line"><span class="keyword">file</span>(GLOB MAIN_HEAD <span class="variable">$&#123;CAMKE_CURRENT_SOURCE_DIR&#125;</span>/<span class="keyword">include</span>/*.h)</span><br><span class="line"><span class="comment"># æ³¨ï¼šå…³äºè¦æœç´¢çš„æ–‡ä»¶è·¯å¾„å’Œç±»å‹å¯ä»¥åŠ åŒå¼•å·ï¼Œä¹Ÿå¯ä¸åŠ </span></span><br><span class="line"><span class="keyword">file</span>(GLOB MAIN_SRC <span class="string">&quot;$&#123;CMAKE_CURRENT_SOURCE_DIR&#125;/src/*.cpp&quot;</span>)</span><br></pre></td></tr></table></figure><h3 id="æœç´¢å¤´æ–‡ä»¶è·¯å¾„"><a href="#æœç´¢å¤´æ–‡ä»¶è·¯å¾„" class="headerlink" title="æœç´¢å¤´æ–‡ä»¶è·¯å¾„"></a>æœç´¢å¤´æ–‡ä»¶è·¯å¾„</h3><p>åœ¨ç¼–è¯‘é¡¹ç›®æºæ–‡ä»¶çš„æ—¶å€™ï¼Œå¾ˆå¤šæ—¶å€™éƒ½éœ€è¦å°†æºæ–‡ä»¶å¯¹åº”çš„å¤´æ–‡ä»¶è·¯å¾„æŒ‡å®šå‡ºæ¥ï¼Œè¿™æ ·æ‰èƒ½ä¿è¯åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­ç¼–è¯‘å™¨èƒ½æ‰¾åˆ°è¿™äº›å¤´æ–‡ä»¶ã€‚åœ¨CMakeé‡Œæœç´¢å¤´æ–‡ä»¶çš„å‘½ä»¤ä¹Ÿå¾ˆç®€å•</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">include_directories</span>(headpath)</span><br><span class="line"><span class="comment"># headpathå°±æ˜¯å¤´æ–‡ä»¶è·¯å¾„ï¼Œè¿™é‡Œå»ºè®®å†™ç»å¯¹è·¯å¾„</span></span><br><span class="line"><span class="comment"># å®æ“</span></span><br><span class="line"><span class="keyword">include_directories</span>(<span class="variable">$&#123;PROJECT_SOURCE_DIR&#125;</span>/<span class="keyword">include</span>)</span><br></pre></td></tr></table></figure><h3 id="é€šè¿‡CMakeåˆ¶ä½œåº“æ–‡ä»¶"><a href="#é€šè¿‡CMakeåˆ¶ä½œåº“æ–‡ä»¶" class="headerlink" title="é€šè¿‡CMakeåˆ¶ä½œåº“æ–‡ä»¶"></a>é€šè¿‡CMakeåˆ¶ä½œåº“æ–‡ä»¶</h3><p>æœ‰äº›æ—¶å€™æˆ‘ä»¬ç¼–å†™çš„æºä»£ç å¹¶ä¸éœ€è¦å°†ä»–ä»¬ç¼–è¯‘ç”Ÿæˆå¯æ‰§è¡Œç¨‹åºï¼Œè€Œæ˜¯ç”Ÿæˆä¸€äº›é™æ€åº“æˆ–åŠ¨æ€åº“æä¾›ç»™ç¬¬ä¸‰æ–¹ä½¿ç”¨ï¼Œä¸‹é¢æ¥è®²è§£åœ¨cmakeä¸­ç”Ÿæˆè¿™ä¸¤ç±»åº“æ–‡ä»¶çš„æ–¹æ³•ã€‚</p><h4 id="åˆ¶ä½œé™æ€åº“"><a href="#åˆ¶ä½œé™æ€åº“" class="headerlink" title="åˆ¶ä½œé™æ€åº“"></a>åˆ¶ä½œé™æ€åº“</h4><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åœ¨cmakeä¸­ï¼Œå¦‚æœè¦åˆ¶ä½œé™æ€åº“ï¼Œéœ€è¦ä½¿ç”¨çš„å‘½ä»¤å¦‚ä¸‹ï¼š</span></span><br><span class="line"><span class="keyword">add_library</span>(åº“åç§° STATIC æºæ–‡ä»¶<span class="number">1</span> [æºæ–‡ä»¶<span class="number">2</span>] ...) </span><br><span class="line"><span class="comment"># æ³¨ï¼šåœ¨Linuxä¸­ï¼Œé™æ€åº“åå­—åˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼šlib+åº“åå­—+.aï¼Œæ­¤å¤„åªéœ€è¦æŒ‡å®šå‡ºåº“çš„åå­—å°±å¯ä»¥äº†ï¼Œå¦å¤–ä¸¤éƒ¨åˆ†åœ¨ç”Ÿæˆè¯¥æ–‡ä»¶çš„æ—¶å€™ä¼šè‡ªåŠ¨å¡«å……ã€‚</span></span><br><span class="line"><span class="comment"># å¦‚æœæ˜¯åŠ¨æ€åº“ï¼Œæœ€ç»ˆç”Ÿæˆçš„åº“çš„åå­—å°±æ˜¯ï¼šlibXXX.so(Linux)ï¼ŒlibXXX.dll(Windows)ï¼›</span></span><br><span class="line"><span class="comment"># å¦‚æœæ˜¯é™æ€åº“ï¼Œæœ€ç»ˆç”Ÿæˆçš„åº“çš„åå­—å°±æ˜¯ï¼šlibXXX.a(Linux)ï¼ŒlibXXX.lib(Windows)ï¼›</span></span><br><span class="line"><span class="comment"># ä¸‹é¢æœ‰ä¸€ä¸ªç›®å½•ï¼Œéœ€è¦å°†srcç›®å½•ä¸­çš„æºæ–‡ä»¶ç¼–è¯‘æˆé™æ€åº“ï¼Œç„¶åå†ä½¿ç”¨ï¼š</span></span><br><span class="line">.</span><br><span class="line">â”œâ”€â”€ build</span><br><span class="line">â”œâ”€â”€ CMakeLists.txt</span><br><span class="line">â”œâ”€â”€ <span class="keyword">include</span>           <span class="comment"># å¤´æ–‡ä»¶ç›®å½•</span></span><br><span class="line">â”‚Â Â  â””â”€â”€ head.h</span><br><span class="line">â”œâ”€â”€ main.cpp          <span class="comment"># ç”¨äºæµ‹è¯•çš„æºæ–‡ä»¶</span></span><br><span class="line">â””â”€â”€ src               <span class="comment"># æºæ–‡ä»¶ç›®å½•</span></span><br><span class="line">    â”œâ”€â”€ add.cpp</span><br><span class="line">    â”œâ”€â”€ div.cpp</span><br><span class="line">    â”œâ”€â”€ mult.cpp</span><br><span class="line">    â””â”€â”€ sub.cpp</span><br><span class="line"><span class="comment"># æ ¹æ®ä¸Šé¢çš„ç›®å½•ç»“æ„ï¼Œå¯ä»¥è¿™æ ·ç¼–å†™CMakeLists.txtæ–‡ä»¶:</span></span><br><span class="line"><span class="keyword">cmake_minimum_required</span>(VERSION <span class="number">3.0</span>)</span><br><span class="line"><span class="keyword">project</span>(CALC)</span><br><span class="line"><span class="keyword">include_directories</span>(<span class="variable">$&#123;PROJECT_SOURCE_DIR&#125;</span>/<span class="keyword">include</span>)</span><br><span class="line"><span class="keyword">file</span>(GLOB SRC_LIST <span class="string">&quot;$&#123;CMAKE_CURRENT_SOURCE_DIR&#125;/src/*.cpp&quot;</span>)</span><br><span class="line"><span class="keyword">add_library</span>(calc STATIC <span class="variable">$&#123;SRC_LIST&#125;</span>)</span><br><span class="line"><span class="comment"># æ³¨ï¼šSTATICå¯¹åº”çš„æ˜¯é™æ€åº“ï¼ŒSHAREDå¯¹åº”çš„æ˜¯åŠ¨æ€åº“</span></span><br></pre></td></tr></table></figure><h4 id="åˆ¶ä½œåŠ¨æ€åº“"><a href="#åˆ¶ä½œåŠ¨æ€åº“" class="headerlink" title="åˆ¶ä½œåŠ¨æ€åº“"></a>åˆ¶ä½œåŠ¨æ€åº“</h4><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cmake_minimum_required</span>(VERSION <span class="number">3.0</span>)</span><br><span class="line"><span class="keyword">project</span>(CALC)</span><br><span class="line"><span class="keyword">include_directories</span>(<span class="variable">$&#123;PROJECT_SOURCE_DIR&#125;</span>/<span class="keyword">include</span>)</span><br><span class="line"><span class="keyword">file</span>(GLOB SRC_LIST <span class="string">&quot;$&#123;CMAKE_CURRENT_SOURCE_DIR&#125;/src/*.cpp&quot;</span>)</span><br><span class="line"><span class="keyword">add_library</span>(calc SHARED <span class="variable">$&#123;SRC_LIST&#125;</span>)</span><br></pre></td></tr></table></figure><h4 id="æŒ‡å®šè¾“å‡ºè·¯å¾„"><a href="#æŒ‡å®šè¾“å‡ºè·¯å¾„" class="headerlink" title="æŒ‡å®šè¾“å‡ºè·¯å¾„"></a>æŒ‡å®šè¾“å‡ºè·¯å¾„</h4><p>å¯¹äºç”Ÿæˆçš„åº“æ–‡ä»¶æ¥è¯´å’Œå¯æ‰§è¡Œç¨‹åºä¸€æ ·éƒ½å¯ä»¥æŒ‡å®šè¾“å‡ºè·¯å¾„ã€‚è¿™é‡Œä½¿ç”¨LIBRARY_OUTPUT_PATHå®ï¼Œè¿™ä¸ªå®å¯¹åº”é™æ€åº“æ–‡ä»¶å’ŒåŠ¨æ€åº“æ–‡ä»¶éƒ½é€‚ç”¨ã€‚</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cmake_minimum_required</span>(VERSION <span class="number">3.0</span>)</span><br><span class="line"><span class="keyword">project</span>(CALC)</span><br><span class="line"><span class="keyword">include_directories</span>(<span class="variable">$&#123;PROJECT_SOURCE_DIR&#125;</span>/<span class="keyword">include</span>)</span><br><span class="line"><span class="keyword">file</span>(GLOB SRC_LIST <span class="string">&quot;$&#123;CMAKE_CURRENT_SOURCE_DIR&#125;/src/*.cpp&quot;</span>)</span><br><span class="line"><span class="comment"># è®¾ç½®åŠ¨æ€åº“/é™æ€åº“ç”Ÿæˆè·¯å¾„</span></span><br><span class="line"><span class="keyword">set</span>(LIBRARY_OUTPUT_PATH <span class="variable">$&#123;PROJECT_SOURCE_DIR&#125;</span>/lib)</span><br><span class="line"><span class="comment"># ç”ŸæˆåŠ¨æ€åº“</span></span><br><span class="line"><span class="comment">#add_library(calc SHARED $&#123;SRC_LIST&#125;)</span></span><br><span class="line"><span class="comment"># ç”Ÿæˆé™æ€åº“</span></span><br><span class="line"><span class="keyword">add_library</span>(calc STATIC <span class="variable">$&#123;SRC_LIST&#125;</span>)</span><br></pre></td></tr></table></figure><h3 id="åŒ…å«åº“æ–‡ä»¶"><a href="#åŒ…å«åº“æ–‡ä»¶" class="headerlink" title="åŒ…å«åº“æ–‡ä»¶"></a>åŒ…å«åº“æ–‡ä»¶</h3><p>åœ¨ç¼–å†™ç¨‹åºçš„è¿‡ç¨‹ä¸­ï¼Œå¯èƒ½ä¼šç”¨åˆ°ä¸€äº›ç³»ç»Ÿæä¾›çš„åŠ¨æ€åº“æˆ–è€…è‡ªå·±åˆ¶ä½œå‡ºçš„åŠ¨æ€åº“æˆ–è€…é™æ€åº“æ–‡ä»¶ï¼Œcmakeä¸­ä¹Ÿä¸ºæˆ‘ä»¬æä¾›äº†ç›¸å…³çš„åŠ è½½åŠ¨æ€åº“çš„å‘½ä»¤ã€‚</p><h4 id="é“¾æ¥é™æ€åº“"><a href="#é“¾æ¥é™æ€åº“" class="headerlink" title="é“¾æ¥é™æ€åº“"></a>é“¾æ¥é™æ€åº“</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">src</span><br><span class="line">â”œâ”€â”€ add.cpp</span><br><span class="line">â”œâ”€â”€ div.cpp</span><br><span class="line">â”œâ”€â”€ main.cpp</span><br><span class="line">â”œâ”€â”€ mult.cpp</span><br><span class="line">â””â”€â”€ sub.cpp</span><br></pre></td></tr></table></figure><p>ç°åœ¨æˆ‘ä»¬æŠŠä¸Šé¢srcç›®å½•ä¸­çš„add.cppã€div.cppã€mult.cppã€sub.cppç¼–è¯‘æˆä¸€ä¸ªé™æ€åº“æ–‡ä»¶libcalc.aã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æµ‹è¯•ç›®å½•ç»“æ„</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">tree</span> </span><br><span class="line">.</span><br><span class="line">â”œâ”€â”€ build</span><br><span class="line">â”œâ”€â”€ CMakeLists.txt</span><br><span class="line">â”œâ”€â”€ include</span><br><span class="line">â”‚Â Â  â””â”€â”€ head.h</span><br><span class="line">â”œâ”€â”€ lib</span><br><span class="line">â”‚Â Â  â””â”€â”€ libcalc.a     # åˆ¶ä½œå‡ºçš„é™æ€åº“çš„åå­—</span><br><span class="line">â””â”€â”€ src</span><br><span class="line">    â””â”€â”€ main.cpp</span><br><span class="line"></span><br><span class="line">4 directories, 4 files</span><br></pre></td></tr></table></figure><p>åœ¨cmakeä¸­ï¼Œé“¾æ¥é™æ€åº“çš„å‘½ä»¤å¦‚ä¸‹ï¼š</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">link_libraries</span>(&lt;static lib&gt; [&lt;static lib&gt;...])</span><br><span class="line"><span class="comment"># å‚æ•°1ï¼šæŒ‡å®šå‡ºè¦é“¾æ¥çš„é™æ€åº“çš„åå­—ï¼Œå¯ä»¥æ˜¯å…¨å libxxx.aï¼Œä¹Ÿå¯ä»¥æ˜¯æå¤´ï¼ˆlibï¼‰å»å°¾ï¼ˆ.aï¼‰ä¹‹åçš„åå­— xxx</span></span><br><span class="line"><span class="comment"># å‚æ•°2-Nï¼šè¦é“¾æ¥çš„å…¶å®ƒé™æ€åº“çš„åå­—</span></span><br></pre></td></tr></table></figure><p>å¦‚æœè¯¥é™æ€åº“ä¸æ˜¯ç³»ç»Ÿæä¾›çš„ï¼ˆè‡ªå·±åˆ¶ä½œæˆ–è€…ä½¿ç”¨ç¬¬ä¸‰æ–¹æä¾›çš„é™æ€åº“ï¼‰å¯èƒ½å‡ºç°é™æ€åº“æ‰¾ä¸åˆ°çš„æƒ…å†µï¼Œæ­¤æ—¶å¯ä»¥å°†é™æ€åº“çš„è·¯å¾„ä¹ŸæŒ‡å®šå‡ºæ¥ï¼š</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">link_directories</span>(&lt;lib path&gt;)</span><br></pre></td></tr></table></figure><p>è¿™æ ·ï¼Œä¿®æ”¹ä¹‹åçš„CMakeLists.txtæ–‡ä»¶å†…å®¹å¦‚ä¸‹:</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cmake_minimum_required</span>(VERSION <span class="number">3.0</span>)</span><br><span class="line"><span class="keyword">project</span>(CALC)</span><br><span class="line"><span class="comment"># æœç´¢æŒ‡å®šç›®å½•ä¸‹æºæ–‡ä»¶</span></span><br><span class="line"><span class="keyword">file</span>(GLOB SRC_LIST <span class="variable">$&#123;CMAKE_CURRENT_SOURCE_DIR&#125;</span>/src/*.cpp)</span><br><span class="line"><span class="comment"># åŒ…å«å¤´æ–‡ä»¶è·¯å¾„</span></span><br><span class="line"><span class="keyword">include_directories</span>(<span class="variable">$&#123;PROJECT_SOURCE_DIR&#125;</span>/<span class="keyword">include</span>)</span><br><span class="line"><span class="comment"># åŒ…å«é™æ€åº“è·¯å¾„ æ·»åŠ äº†è¿™è¡Œä»£ç ï¼Œå°±å¯ä»¥æ ¹æ®å‚æ•°æŒ‡å®šçš„è·¯å¾„æ‰¾åˆ°è¿™ä¸ªé™æ€åº“äº†ã€‚</span></span><br><span class="line"><span class="keyword">link_directories</span>(<span class="variable">$&#123;PROJECT_SOURCE_DIR&#125;</span>/lib)</span><br><span class="line"><span class="comment"># é“¾æ¥é™æ€åº“</span></span><br><span class="line"><span class="keyword">link_libraries</span>(calc)</span><br><span class="line"><span class="keyword">add_executable</span>(app <span class="variable">$&#123;SRC_LIST&#125;</span>)</span><br></pre></td></tr></table></figure><h4 id="é“¾æ¥åŠ¨æ€åº“"><a href="#é“¾æ¥åŠ¨æ€åº“" class="headerlink" title="é“¾æ¥åŠ¨æ€åº“"></a>é“¾æ¥åŠ¨æ€åº“</h4><p>targetä¸çŸ¥é“è¿™ä¸ªç¬¦å·æ˜¯æ¥è‡ªå®ƒé“¾æ¥çš„å¤šä¸ªåº“ä¸­çš„å“ªä¸€ä¸ªåº“ï¼Œå®ƒåªçŸ¥é“æœ‰è¿™ä¹ˆä¸€ä¸ªåº“ã€‚</p><p>FATAL_ERRORï¼šCMake é”™è¯¯, ç»ˆæ­¢æ‰€æœ‰å¤„ç†è¿‡ç¨‹ï¼ˆCMakeåœ¨ç”Ÿæˆâ€message to displayâ€è¿™æ¡æ¶ˆæ¯ä¹‹åå°±ä¸åœ¨æ‰§è¡Œäº†ï¼Œç›´æ¥ä¸­æ–­ï¼‰</p><p>CMakeåœ¨åº•å±‚ç®¡ç†çš„æ—¶å€™ä¼šå°†å­å­—ç¬¦ä¸²é€šè¿‡åˆ†å·éš”å¼€ï¼Œä½†é€šè¿‡messageæ‰“å°å˜é‡å€¼çš„æ—¶å€™ï¼Œçœ‹ä¸åˆ°è¿™ä¸ªåˆ†å·ã€‚è¿™ä¸ªåˆ†å·æœ‰åŠ©äºcmakeè¿›è¡Œå­—ç¬¦ä¸²åˆ é™¤æ“ä½œã€‚åªèƒ½åˆ é™¤ç»„æˆå˜é‡çš„å­ä¸²ã€‚æ¯”å¦‚ä¸€å¼€å§‹SRC&#x3D;â€A123â€ï¼Œåæ¥apeendäº†â€œ456â€, â€œ789â€ï¼Œå¦‚æœæ²¡æœ‰åˆ†å·ï¼Œä½ å¯èƒ½å¯ä»¥åˆ é™¤â€345â€ï¼Œä½†æœ‰äº†åˆ†å·åï¼Œå°±åˆ é™¤ä¸äº†äº†ï¼Œä½ åªèƒ½åˆ é™¤ç»„æˆSRCçš„å®Œæ•´çš„å­ä¸²ï¼Œæ¯”å¦‚â€A123â€, â€œ456â€ç­‰ã€‚</p><p>æ³¨æ„ï¼Œå­˜å‚¨åˆ—è¡¨é•¿åº¦çš„output variableä¾æ—§æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;è¿™é‡Œç”»ä¸€ä¸ªå›¾ç›´æ¥ç›´æ¥å±•ç¤ºä¸€ä¸‹CMakeå’ŒMakefileçš„ä½¿ç”¨è¿‡ç¨‹&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;png1.png&quot;&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight cpp&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span </summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>MySQL</title>
    <link href="http://zcl0219.github.io/2023/08/29/MySQL/"/>
    <id>http://zcl0219.github.io/2023/08/29/MySQL/</id>
    <published>2023-08-29T13:56:11.000Z</published>
    <updated>2023-10-09T08:27:20.733Z</updated>
    
    <content type="html"><![CDATA[<h3 id="DAY1"><a href="#DAY1" class="headerlink" title="DAY1"></a><code>DAY1</code></h3><p>ä½¿ç”¨æŒ‡ä»¤åˆ›å»ºæ•°æ®åº“ï¼šCREATE DATABASE zcl_db01;</p><p>åˆ é™¤æ•°æ®åº“æŒ‡ä»¤ï¼šDROP DATABASE zcl_db01;</p><p>åˆ›å»ºä¸€ä¸ªä½¿ç”¨utf8å­—ç¬¦é›†çš„zcl_db02æ•°æ®åº“ï¼šCREATE DATABASE zcl_db02 CHARACTER SET utf8</p><p>åˆ›å»ºä¸€ä¸ªä½¿ç”¨utf8å­—ç¬¦é›†ï¼Œå¹¶å¸¦æ ¡å¯¹è§„åˆ™çš„zcl_db03æ•°æ®åº“ï¼šCREATE DATABASE zcl_db03 CHARACTER SET utf8 COLLATE utf8_bin<br>utf8_binåŒºåˆ†å¤§å°å†™ï¼Œutf8_general_ciä¸åŒºåˆ†å¤§å°å†™</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#æŸ¥çœ‹å½“å‰æ•°æ®åº“æœåŠ¡å™¨ä¸­çš„æ‰€æœ‰æ•°æ®åº“</span><br><span class="line"><span class="keyword">SHOW</span> DATABASES</span><br><span class="line"></span><br><span class="line">#æŸ¥çœ‹å‰é¢åˆ›å»ºçš„zcl_db01æ•°æ®åº“çš„å®šä¹‰ä¿¡æ¯</span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">CREATE</span> DATABASE `zcl_db01`</span><br><span class="line"></span><br><span class="line">#åœ¨åˆ›å»ºæ•°æ®åº“ã€è¡¨çš„æ—¶å€™ï¼Œä¸ºäº†è§„é¿å…³é”®å­—ï¼Œå¯ä»¥ä½¿ç”¨``è§£å†³</span><br><span class="line"><span class="keyword">CREATE</span> DATABASE `<span class="keyword">CREATE</span>`</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#å¤‡ä»½æ•°æ®åº“</span><br><span class="line">mysqldump <span class="operator">-</span>u root <span class="operator">-</span>p <span class="operator">-</span>B zcl_db03 <span class="operator">&gt;</span> e:\\tmp.sql (æ–‡ä»¶å)</span><br><span class="line"></span><br><span class="line">#æ¢å¤æ•°æ®åº“</span><br><span class="line">source e:\\tmp.sql</span><br><span class="line"></span><br><span class="line">#å¤‡ä»½æ•°æ®åº“çš„è¡¨</span><br><span class="line">mysqldump <span class="operator">-</span>u root <span class="operator">-</span>p zcl_db03 t1 t2 (t1å’Œt2æ˜¯è¡¨å) <span class="operator">&gt;</span> e:\\tmp1.sql</span><br></pre></td></tr></table></figure><h3 id="DAY2"><a href="#DAY2" class="headerlink" title="DAY2"></a><code>DAY2</code></h3><h4 id="åˆ›å»ºè¡¨"><a href="#åˆ›å»ºè¡¨" class="headerlink" title="åˆ›å»ºè¡¨"></a>åˆ›å»ºè¡¨</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"># åˆ›å»ºè¡¨</span><br><span class="line"># create table table_name</span><br><span class="line"># (</span><br><span class="line"># filed1 datatype,</span><br><span class="line">#filed2 datatype,</span><br><span class="line">#filed3 datatype</span><br><span class="line"># )character set å­—ç¬¦é›† collate æ ¡å¯¹è§„åˆ™ engine å­˜å‚¨å¼•æ“</span><br><span class="line">#  filedï¼šæŒ‡å®šåˆ—å   datatypeï¼šæŒ‡å®šåˆ—ç±»å‹ï¼ˆå­—æ®µç±»å‹ï¼‰</span><br><span class="line">#  character setï¼šå¦‚ä¸æŒ‡å®šåˆ™ä¸ºæ‰€åœ¨æ•°æ®åº“å­—ç¬¦é›†</span><br><span class="line">#  collateï¼šå¦‚ä¸æŒ‡å®šåˆ™ä¸ºæ‰€åœ¨æ•°æ®åº“æ ¡å¯¹è§„åˆ™</span><br><span class="line"></span><br><span class="line"># å®æ“</span><br><span class="line">create table `user`(</span><br><span class="line">id int,</span><br><span class="line">    `name` varchar(255),</span><br><span class="line">    `passward` varchar(255),</span><br><span class="line">    `birthday` date</span><br><span class="line">)character set utf8 collate utf8_general_ci engine innodb; </span><br></pre></td></tr></table></figure><h4 id="Mysqlå¸¸ç”¨æ•°æ®ç±»å‹"><a href="#Mysqlå¸¸ç”¨æ•°æ®ç±»å‹" class="headerlink" title="Mysqlå¸¸ç”¨æ•°æ®ç±»å‹"></a>Mysqlå¸¸ç”¨æ•°æ®ç±»å‹</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># Mysqlåˆ—ç±»å‹å°±æ˜¯Mysqlçš„æ•°æ®ç±»å‹</span><br><span class="line"># æ•°å€¼ç±»å‹ï¼š</span><br><span class="line"># æ•´å‹ï¼štinyint(1ä¸ªå­—èŠ‚)smallint(2ä¸ªå­—èŠ‚)mediumint(3ä¸ªå­—èŠ‚)int(4ä¸ªå­—èŠ‚)bigint(8ä¸ªå­—èŠ‚)</span><br><span class="line"># å°æ•°ç±»å‹ï¼šfloat(å•ç²¾åº¦ 4ä¸ªå­—èŠ‚)double(åŒç²¾åº¦ 8ä¸ªå­—èŠ‚)decimal[M,D](å¤§å°ä¸ç¡®å®šï¼ŒMä»£è¡¨é•¿åº¦ï¼ŒDä»£è¡¨å°æ•°ä½æ•°)</span><br><span class="line"></span><br><span class="line"># æ–‡æœ¬ç±»å‹ï¼ˆå­—ç¬¦ä¸²ç±»å‹ï¼‰</span><br><span class="line"># char(0-255)varchar(0~65535)text(0~2^16-1)longtext(0~2^32-1)</span><br><span class="line"></span><br><span class="line"># äºŒè¿›åˆ¶æ•°æ®ç±»å‹</span><br><span class="line"># blob[0~2^16-1]longblob[0~2^32-1]</span><br><span class="line"></span><br><span class="line"># æ—¥æœŸç±»å‹</span><br><span class="line"># date[æ—¥æœŸ å¹´æœˆæ—¥] time[æ—¶é—´ æ—¶åˆ†ç§’]datetime[å¹´æœˆæ—¥ æ—¶åˆ†ç§’ YYYY-MM-DD HH:MM:SS]timestamp[æ—¶é—´æˆ³]</span><br></pre></td></tr></table></figure><p>åœ¨æ»¡è¶³éœ€æ±‚çš„æƒ…å†µä¸‹ï¼Œå°½é‡é€‰æ‹©å ç”¨ç©ºé—´å°çš„ç±»å‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE t3(</span><br><span class="line">id TINYINT</span><br><span class="line">);</span><br><span class="line"># INSERT INTO t3 VALUES(128); é”™è¯¯ï¼šè¶Šç•Œäº†ï¼Œè¶…è¿‡äº†tinyintèŒƒå›´ã€‚ </span><br><span class="line">INSERT INTO t3 VALUES(127);</span><br><span class="line"># å®šä¹‰æ— ç¬¦å·çš„æ•´æ•° æŒ‡å®šunsigned</span><br><span class="line">CREATE TABLE t4(</span><br><span class="line">id TINYINT UNSIGNED</span><br><span class="line">);</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># BIT(M), Måœ¨1-64ã€‚æ˜¾ç¤ºæŒ‰ç…§bitã€‚</span><br><span class="line">CREATE TABLE t5(</span><br><span class="line">num BIT(8)</span><br><span class="line">);</span><br><span class="line">INSERT INTO t5 VALUES(255);</span><br><span class="line">SELECT * FROM t5;</span><br><span class="line"># è¾“å‡ºï¼š11111111</span><br><span class="line">SELECT * FROM t5 WHERE num = 255;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># DECIMAL[M, D] </span><br><span class="line"># Mæ˜¯å°æ•°ä½æ•°ï¼ˆç²¾åº¦ï¼‰çš„æ€»æ•°ï¼ŒDæ˜¯å°æ•°ç‚¹ï¼ˆæ ‡åº¦ï¼‰åé¢çš„ä½æ•°ã€‚</span><br><span class="line"># å¦‚æœDæ˜¯0ï¼Œåˆ™å€¼æ²¡æœ‰å°æ•°ç‚¹æˆ–åˆ†æ•°éƒ¨åˆ†ï¼ŒMæœ€å¤§æ˜¯65ï¼ŒDæœ€å¤§æ˜¯30ã€‚å¦‚æœDè¢«çœç•¥ï¼Œåˆ™é»˜è®¤æ˜¯0ï¼Œå¦‚æœMè¢«çœç•¥ï¼Œé»˜è®¤æ˜¯10ã€‚</span><br><span class="line">CREATE TABLE t6(</span><br><span class="line">num1 FLOAT,</span><br><span class="line">    num2 DOUBLE,</span><br><span class="line">    num3 DECIMAL(30, 20)</span><br><span class="line">);</span><br><span class="line">INSERT INTO t6 VALUES(88.123456789123456, 88.123456789123456, 88.123456789123456)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># char(4) è¿™ä¸ª4è¡¨ç¤ºå­—ç¬¦æ•°ï¼ˆæœ€å¤§255ï¼‰ï¼Œä¸æ˜¯å­—èŠ‚æ•°ï¼Œä¸ç®¡æ˜¯ä¸­æ–‡è¿˜æ˜¯è‹±æ–‡éƒ½æ˜¯æ”¾å››ä¸ªï¼ŒæŒ‰å­—ç¬¦è®¡ç®—ï¼Œå®šé•¿ï¼Œå³ä½¿ä½ æ’å…¥&#x27;aa&#x27;ï¼Œä¹Ÿä¼šå ç”¨åˆ†é…çš„4ä¸ªå­—ç¬¦çš„ç©ºé—´</span><br><span class="line"># varchar(4) è¿™ä¸ª4è¡¨ç¤ºå­—ç¬¦æ•°ï¼Œæ˜¯å˜é•¿ï¼Œå¦‚æœä½ æ’å…¥&#x27;aa&#x27;ï¼Œå®é™…å ç”¨ç©ºé—´å¹¶ä¸æ˜¯4ä¸ªå­—ç¬¦ï¼Œè€Œæ˜¯å®é™…å ç”¨çš„ç©ºé—´ã€‚</span><br><span class="line"># utf-8ï¼šä¸€ä¸ªå­—ç¬¦å ä¸‰ä¸ªå­—èŠ‚</span><br><span class="line">CREATE TABLE t11(</span><br><span class="line">&#x27;name&#x27; CHAR(4)</span><br><span class="line">);</span><br><span class="line"># INSERT INTO t11 VALUES(&#x27;ABCDE&#x27;) æŠ¥é”™ï¼Œå¤ªé•¿</span><br><span class="line">INSERT INTO t11 VALUES(&#x27;ABCD&#x27;)</span><br><span class="line">INSERT INTO t11 VALUES(&#x27;ä½ å¥½&#x27;)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># æ—¥æœŸç±»å‹ date datetime timestamp</span><br><span class="line">CREATE TABLE birthday11(</span><br><span class="line">birthday DATE,</span><br><span class="line">    worktime DATETIME,</span><br><span class="line">    login_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP</span><br><span class="line">);</span><br><span class="line">INSERT INTO bithday11(birthday, worktime) VALUES(&#x27;2022-11-11&#x27;, &#x27;2022-11-11 10:10:10&#x27;);</span><br></pre></td></tr></table></figure><h4 id="åˆ›å»ºè¡¨çš„è¯¾å ‚ç»ƒä¹ "><a href="#åˆ›å»ºè¡¨çš„è¯¾å ‚ç»ƒä¹ " class="headerlink" title="åˆ›å»ºè¡¨çš„è¯¾å ‚ç»ƒä¹ "></a>åˆ›å»ºè¡¨çš„è¯¾å ‚ç»ƒä¹ </h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE &#x27;emp&#x27;(</span><br><span class="line">id INT,</span><br><span class="line">    &#x27;name&#x27; VARCHAR(32),</span><br><span class="line">    sex CHAR(1),</span><br><span class="line">    birthday DATE,</span><br><span class="line">    entry_date DATETIME,</span><br><span class="line">    job VARCHAR(32),</span><br><span class="line">    saraly DOUBLE,</span><br><span class="line">    &#x27;resume&#x27; TEXT</span><br><span class="line">) CHARSET utf8 COLLATE utf8_bin ENGINE INNODB;</span><br><span class="line">INSERT INTO &#x27;emp&#x27; VALUES(</span><br><span class="line">100, &#x27;å°å¦–æ€ª&#x27;, &#x27;ç”·&#x27;, &#x27;2000-11-11&#x27;, &#x27;å·¡å±±çš„&#x27;, 3000, &#x27;å¤§ç‹å«æˆ‘æ¥å·¡å±±&#x27;</span><br><span class="line">);</span><br><span class="line">SELECT * FROM &#x27;emp&#x27;;</span><br><span class="line"></span><br><span class="line"># å¢åŠ åˆ—</span><br><span class="line">ALTER TABLE emp ADD image VARCHAR(32) NOT NULL DEFAULT &#x27;&#x27; AFTER RESUME</span><br><span class="line"></span><br><span class="line"># æ˜¾ç¤ºè¡¨ç»“æ„</span><br><span class="line">DESC emp</span><br><span class="line"></span><br><span class="line"># ä¿®æ”¹jobé•¿åº¦</span><br><span class="line">ALTER TABLE emp MODIFY job VARCHAR(60) NOT NULL DEFAULT &#x27;&#x27;</span><br><span class="line"></span><br><span class="line"># åˆ é™¤åˆ—</span><br><span class="line">ALTER TABLE emp DROP sex</span><br><span class="line"></span><br><span class="line"># ä¿®æ”¹è¡¨å</span><br><span class="line">RENAME TABLE emp TO employee</span><br><span class="line"></span><br><span class="line"># ä¿®æ”¹è¡¨çš„å­—ç¬¦é›†</span><br><span class="line">ALTER TABLE employee CHARACTER SET utf8</span><br><span class="line"></span><br><span class="line"># ä¿®æ”¹åˆ—å</span><br><span class="line">ALTER TABLE employee CHANGE &#x27;name&#x27; user_name VARCHAR(64) NOT NULL DEFAULT &#x27;&#x27;</span><br></pre></td></tr></table></figure><h4 id="æ•°æ®åº“CRUDè¯­å¥"><a href="#æ•°æ®åº“CRUDè¯­å¥" class="headerlink" title="æ•°æ®åº“CRUDè¯­å¥"></a>æ•°æ®åº“CRUDè¯­å¥</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"># ä½¿ç”¨INSERTè¯­å¥å‘è¡¨ä¸­æ’å…¥æ•°æ®</span><br><span class="line">CREATE TABLE &#x27;goods&#x27;(</span><br><span class="line">id INT,</span><br><span class="line">    goods_name VARCHAR(10),</span><br><span class="line">    price DOUBLE</span><br><span class="line">);</span><br><span class="line">INSERT INTO &#x27;goods&#x27; (id, goods_name, price) VALUES (10, &#x27;åä¸ºæ‰‹æœº&#x27;, 2000);</span><br><span class="line">INSERT INTO &#x27;goods&#x27; (id, goods_name, price) VALUES (20, &#x27;è‹¹æœæ‰‹æœº&#x27;, 20000);</span><br><span class="line"></span><br><span class="line"># INSERTè¯­å¥çš„ç»†èŠ‚</span><br><span class="line">-- æ’å…¥çš„æ•°æ®åº”ä¸å­—æ®µçš„æ•°æ®ç±»å‹ç›¸åŒï¼Œæ¯”å¦‚æŠŠ&#x27;abc&#x27;æ·»åŠ åˆ°intç±»å‹ä¼šé”™è¯¯ã€‚</span><br><span class="line">-- æ•°æ®çš„é•¿åº¦åº”åœ¨åˆ—çš„è§„å®šèŒƒå›´å†…ï¼Œä¸èƒ½å°†ä¸€ä¸ªé•¿åº¦ä¸º80çš„å­—ç¬¦ä¸²åŠ å…¥åˆ°é•¿åº¦ä¸º40çš„åˆ—ä¸­ã€‚</span><br><span class="line">-- åœ¨VALUESä¸­åˆ—å‡ºçš„æ•°æ®ä½ç½®å¿…é¡»ä¸è¢«åŠ å…¥çš„åˆ—çš„æ’åˆ—ä½ç½®ç›¸å¯¹åº”ã€‚</span><br><span class="line">-- å­—ç¬¦å’Œæ—¥æœŸç±»å‹åº”åŒ…å«åœ¨å•å¼•å·ä¸­</span><br><span class="line">-- åˆ—å¯ä»¥æ’å…¥ç©ºå€¼ï¼Œå‰ææ˜¯è¯¥å­—æ®µå…è®¸ä¸ºç©ºï¼ˆæ²¡æœ‰NOT NULLï¼‰</span><br><span class="line">-- INSERT INTO TABLE_NAME (åˆ—å) VALUES (),(),()ï¼Œæ·»åŠ å¤šæ¡æ•°æ®ä¸€æ¬¡æ€§</span><br><span class="line">-- å¦‚æœæ˜¯ç»™è¡¨ä¸­çš„æ‰€æœ‰å­—æ®µæ·»åŠ æ•°æ®ï¼Œ(id, goods_name, price)è¿™ä¸ªå¯ä»¥çœç•¥</span><br><span class="line">-- é»˜è®¤å€¼çš„ä½¿ç”¨ï¼Œå½“ä¸ç»™æŸä¸ªå­—æ®µèµ‹å€¼æ—¶ï¼Œå¦‚æœæœ‰é»˜è®¤å€¼å°±ä¼šæ·»åŠ ï¼Œå¦åˆ™æŠ¥é”™ã€‚</span><br><span class="line">-- å¦‚æœæˆ‘ä»¬å¸Œæœ›æŒ‡å®šæŸä¸ªåˆ—çš„é»˜è®¤å€¼ï¼Œå¯ä»¥åœ¨åˆ›å»ºè¡¨æ—¶æŒ‡å®šã€‚</span><br><span class="line">CREATE TABLE &#x27;goods2&#x27;(</span><br><span class="line">id INT,</span><br><span class="line">    goods_name VARCHAR(10),</span><br><span class="line">    price DOUBLE NOT NULL DEFAULT 100</span><br><span class="line">);</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">-- æ¼”ç¤ºupdateè¯­å¥</span><br><span class="line">-- employeeæ˜¯è¡¨åï¼Œsalaryæ˜¯åˆ—å</span><br><span class="line">-- å°†æ‰€æœ‰å‘˜å·¥è–ªæ°´ä¿®æ”¹ä¸º5000ï¼Œå¦‚æœæ²¡æœ‰å¸¦whereæ¡ä»¶ï¼Œä¼šä¿®æ”¹æ‰€æœ‰çš„è®°å½•ï¼Œå› æ­¤è¦å°å¿ƒ</span><br><span class="line">UPDATE employee SET salary = 5000 </span><br><span class="line">-- å°†å§“åä¸ºå°å¦–æ€ªçš„å‘˜å·¥è–ªæ°´ä¿®æ”¹ä¸º3000</span><br><span class="line">UPDATE employee SET salary = 3000 WHERE user_name = &#x27;å°å¦–æ€ª&#x27;</span><br><span class="line">-- å°†è€å¦–æ€ªçš„è–ªæ°´åœ¨åŸæœ‰åŸºç¡€ä¸Šå¢åŠ 1000</span><br><span class="line">INSERT INTO employee VALUES(200, &#x27;è€å¦–æ€ª&#x27;, &#x27;1990-11-11&#x27;, &#x27;2000-11-11 10:10:10&#x27;, &#x27;æ¶èƒŒçš„&#x27;, 5000,  &#x27;ç»™å¤§ç‹æ¶èƒŒçš„&#x27;);</span><br><span class="line">UPDATE employee SET salary = salary + 1000 WHERE user_name = &#x27;è€å¦–æ€ª&#x27;</span><br><span class="line">UPDATE employee SET salary = salary + 1000, job = &#x27;å‡ºä¸»æ„çš„&#x27; WHERE user_name = &#x27;è€å¦–æ€ª&#x27;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">-- æ¼”ç¤ºdeleteè¯­å¥</span><br><span class="line">-- åˆ é™¤è¡¨ä¸­åç§°ä¸ºâ€˜è€å¦–æ€ªâ€™çš„è®°å½•</span><br><span class="line">DELETE FROM employee WHERE user_name = &#x27;è€å¦–æ€ª&#x27;;</span><br><span class="line">-- åˆ é™¤è¡¨ä¸­æ‰€æœ‰è®°å½•</span><br><span class="line">DELETE FROM employee</span><br><span class="line">-- DELETEåˆ é™¤ä¸äº†ä¸€åˆ—çš„å€¼ï¼Œä½†å¯ä»¥ä½¿ç”¨UPDATEè¯­å¥ç½®ä¸ºnull</span><br><span class="line">UPDATE employee SET job = NULL WHERE user_name = &#x27;è€å¦–æ€ª&#x27;;</span><br><span class="line">-- è¦åˆ é™¤è¿™ä¸ªè¡¨</span><br><span class="line">DROP TABLE employee</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line">-- selectæŒ‡å®šæŸ¥è¯¢å“ªäº›åˆ—çš„æ•°æ®</span><br><span class="line">-- *ä»£è¡¨æŸ¥è¯¢æ‰€æœ‰åˆ—</span><br><span class="line">-- fromæŒ‡å®šæŸ¥è¯¢å“ªå¼ è¡¨</span><br><span class="line">-- DISTINCTå¯é€‰ï¼ŒæŒ‡æ˜¾ç¤ºç»“æœæ—¶ï¼Œæ˜¯å¦å»æ‰é‡å¤æ•°æ®</span><br><span class="line">CREATE TABLE student(</span><br><span class="line">id INT NOT NULL DEFAULT 1,</span><br><span class="line">    NAME VARCHAR(20) NOT NULL DEFAULT &#x27;&#x27;,</span><br><span class="line">    chinese FLOAT NOT NULL DEFAULT 0.0,</span><br><span class="line">    english FLOAT NOT NULL DEFAULT 0.0,</span><br><span class="line">    math FLOAT NOT NULL DEFAULT 0.0</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">INSERT INTO student(id, NAME, chinese, english, math) VALUES(1, &#x27;éŸ©é¡ºå¹³&#x27;, 89, 78, 90);</span><br><span class="line">INSERT INTO student(id, NAME, chinese, english, math) VALUES(2, &#x27;å¼ é£&#x27;, 67, 98, 56);</span><br><span class="line">INSERT INTO student(id, NAME, chinese, english, math) VALUES(3, &#x27;å®‹æ±Ÿ&#x27;, 87, 78, 77);</span><br><span class="line">INSERT INTO student(id, NAME, chinese, english, math) VALUES(4, &#x27;å…³ç¾½&#x27;, 88, 98, 90);</span><br><span class="line">INSERT INTO student(id, NAME, chinese, english, math) VALUES(5, &#x27;èµµäº‘&#x27;, 82, 84, 67);</span><br><span class="line">INSERT INTO student(id, NAME, chinese, english, math) VALUES(6, &#x27;æ¬§é˜³é”‹&#x27;, 55, 85, 45);</span><br><span class="line">INSERT INTO student(id, NAME, chinese, english, math) VALUES(7, &#x27;é»„è“‰&#x27;, 75, 65, 30);</span><br><span class="line"></span><br><span class="line">SELECT * FROM student;</span><br><span class="line"></span><br><span class="line">-- æŸ¥å¯»è¡¨ä¸­æ‰€æœ‰å­¦ç”Ÿçš„ä¿¡æ¯</span><br><span class="line">SELECT * FROM student;</span><br><span class="line"></span><br><span class="line">-- æŸ¥è¯¢è¡¨ä¸­æ‰€æœ‰å­¦ç”Ÿçš„å§“åå’Œå¯¹åº”çš„è‹±è¯­æˆç»©</span><br><span class="line">SELECT &#x27;NAME&#x27;, english FROM student;</span><br><span class="line"></span><br><span class="line">-- è¿‡æ»¤è¡¨ä¸­é‡å¤æ•°æ®distinct</span><br><span class="line">-- è¦æŸ¥è¯¢çš„è®°å½•æ¯ä¸ªå­—æ®µéƒ½ç›¸åŒï¼Œæ‰ä¼šå»é‡</span><br><span class="line">SELECT DISTINCT english FROM student;</span><br><span class="line"></span><br><span class="line">-- ç»Ÿè®¡æ¯ä¸ªå­¦ç”Ÿçš„æ€»åˆ†</span><br><span class="line">SELECT &#x27;NAME&#x27;, (chinese + english + math) FROM student;</span><br><span class="line"></span><br><span class="line">-- åœ¨æ‰€æœ‰å­¦ç”Ÿæ€»åˆ†åŠ 10åˆ†</span><br><span class="line">SELECT &#x27;NAME&#x27;, (chinese + english + math + 10) FROM student;</span><br><span class="line"></span><br><span class="line">-- ä½¿ç”¨åˆ«åè¡¨ç¤ºå­¦ç”Ÿåˆ†æ•°</span><br><span class="line">SELECT &#x27;NAME&#x27;, (chinese + english + math + 10) AS total_score FROM student;</span><br><span class="line">SELECT &#x27;NAME&#x27; AS &#x27;åå­—&#x27;, (chinese + english + math + 10) AS total_score FROM student;</span><br><span class="line"></span><br><span class="line">-- æŸ¥è¯¢å§“åä¸ºèµµäº‘çš„å­¦ç”Ÿæˆç»©</span><br><span class="line">SELECT * FROM student WHERE &#x27;NAME&#x27; = &#x27;èµµäº‘&#x27;;</span><br><span class="line"></span><br><span class="line">-- æŸ¥è¯¢è‹±è¯­æˆç»©å¤§äº90åˆ†çš„åŒå­¦</span><br><span class="line">SELECT * FROM student WHERE english &gt; 90;</span><br><span class="line"></span><br><span class="line">-- æŸ¥è¯¢æ€»åˆ†å¤§äº200åˆ†çš„æ‰€æœ‰åŒå­¦</span><br><span class="line">SELECT * FROM student WHERE (chinese + english + math) &gt; 200;</span><br><span class="line"></span><br><span class="line">-- æŸ¥è¯¢mathå¤§äº60å¹¶ä¸”idå¤§äº4çš„å­¦ç”Ÿæˆç»©</span><br><span class="line">SELECT * FROM student WHERE math &gt; 60 AND id &gt; 4;</span><br><span class="line"></span><br><span class="line">-- æŸ¥è¯¢è‹±è¯­æˆç»©å¤§äºè¯­æ–‡æˆç»©çš„åŒå­¦</span><br><span class="line">SELECT * FROM student WHERE english &gt; chinese;</span><br><span class="line"></span><br><span class="line">-- æŸ¥è¯¢æ€»åˆ†å¤§äº200åˆ†å¹¶ä¸”æ•°å­¦æˆç»©å°äºè¯­æ–‡æˆç»©çš„å§“éŸ©çš„å­¦ç”Ÿ</span><br><span class="line">-- éŸ©% è¡¨ç¤ºåå­—ä»¥éŸ©å¼€å¤´çš„å°±å¯ä»¥</span><br><span class="line">SELECT * FROM student WHERE (chinese + english + math) &gt; 200 AND </span><br><span class="line">  math &lt; chinese AND &#x27;NAME&#x27; LIKE &#x27;éŸ©%&#x27;;</span><br><span class="line">  </span><br><span class="line">-- æŸ¥è¯¢è‹±è¯­åˆ†æ•°åœ¨80-90ä¹‹é—´çš„åŒå­¦</span><br><span class="line">SELECT * FROM student WHERE english &gt;= 80 AND english &lt;= 90;</span><br><span class="line">SELECT * FROM student WHERE english BETWWWN 80 AND 90; -- BETWEEN AND æ˜¯é—­åŒºé—´</span><br><span class="line"></span><br><span class="line">-- æŸ¥è¯¢æ•°å­¦åˆ†æ•°ä¸º89ï¼Œ90ï¼Œ91çš„åŒå­¦</span><br><span class="line">SELECT * FROM student WHERE math = 89 OR math = 90 OR math = 91;</span><br><span class="line">SELECT * FROM student WHERE math IN (89, 90, 91);</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;DAY1&quot;&gt;&lt;a href=&quot;#DAY1&quot; class=&quot;headerlink&quot; title=&quot;DAY1&quot;&gt;&lt;/a&gt;&lt;code&gt;DAY1&lt;/code&gt;&lt;/h3&gt;&lt;p&gt;ä½¿ç”¨æŒ‡ä»¤åˆ›å»ºæ•°æ®åº“ï¼šCREATE DATABASE zcl_db01;&lt;/p&gt;
&lt;p&gt;åˆ é™¤æ•°æ®åº“æŒ‡</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>Linux é«˜æ€§èƒ½æœåŠ¡å™¨--ç¬¬äº”ç« </title>
    <link href="http://zcl0219.github.io/2023/08/27/Linux-%E9%AB%98%E6%80%A7%E8%83%BD%E6%9C%8D%E5%8A%A1%E5%99%A8-%E7%AC%AC%E4%BA%94%E7%AB%A0/"/>
    <id>http://zcl0219.github.io/2023/08/27/Linux-%E9%AB%98%E6%80%A7%E8%83%BD%E6%9C%8D%E5%8A%A1%E5%99%A8-%E7%AC%AC%E4%BA%94%E7%AB%A0/</id>
    <published>2023-08-27T04:45:48.000Z</published>
    <updated>2023-11-08T18:52:29.127Z</updated>
    
    <content type="html"><![CDATA[<h4 id="5-1-1-åˆ¤æ–­ä¸»æœºæ˜¯å°ç«¯å­—èŠ‚åºè¿˜æ˜¯å¤§ç«¯å­—èŠ‚åº"><a href="#5-1-1-åˆ¤æ–­ä¸»æœºæ˜¯å°ç«¯å­—èŠ‚åºè¿˜æ˜¯å¤§ç«¯å­—èŠ‚åº" class="headerlink" title="5.1.1 åˆ¤æ–­ä¸»æœºæ˜¯å°ç«¯å­—èŠ‚åºè¿˜æ˜¯å¤§ç«¯å­—èŠ‚åº"></a>5.1.1 åˆ¤æ–­ä¸»æœºæ˜¯å°ç«¯å­—èŠ‚åºè¿˜æ˜¯å¤§ç«¯å­—èŠ‚åº</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">byteOrder</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">union</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">short</span> value;</span><br><span class="line">        <span class="type">char</span> union_bytes[<span class="built_in">sizeof</span>(<span class="type">short</span>)];</span><br><span class="line">    &#125;test;</span><br><span class="line">    </span><br><span class="line">    test.value = <span class="number">0x0102</span>;</span><br><span class="line">    <span class="keyword">if</span>(test.union_bytes[<span class="number">0</span>] == <span class="number">1</span> &amp;&amp; test.union_bytes[<span class="number">1</span>] == <span class="number">2</span>)&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;å¤§ç«¯å­—èŠ‚åº\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(test.union_bytes[<span class="number">0</span>] == <span class="number">2</span> &amp;&amp; test.union_bytes[<span class="number">1</span>] == <span class="number">1</span>)&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;å°ç«¯å­—èŠ‚åº\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;ä¸æ¸…æ¥š\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="built_in">byteOrder</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="5-1-3ä¸“ç”¨socketåœ°å€"><a href="#5-1-3ä¸“ç”¨socketåœ°å€" class="headerlink" title="5.1.3ä¸“ç”¨socketåœ°å€"></a>5.1.3ä¸“ç”¨<code>socket</code>åœ°å€</h4><p><code>TCP/IP</code>åè®®æ—æœ‰<code>sockaddr_in</code>å’Œ<code>sockaddr_in6</code>ä¸¤ä¸ªä¸“ç”¨<code>socket</code>åœ°å€ç»“æ„ä½“ï¼Œä»–ä»¬åˆ†åˆ«ç”¨äº<code>IPv4</code>å’Œ<code>IPv6</code>ï¼Œè¿™é‡Œæˆ‘åªä»‹ç»<code>sockaddr_in</code>ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">sockaddr_in</span>&#123;</span><br><span class="line">    <span class="type">sa_family_t</span> sin_family;  <span class="comment">// åœ°å€æ—ï¼šAF_INET</span></span><br><span class="line">    <span class="type">u_int16_t</span> sin_port;<span class="comment">// ç«¯å£å·ï¼šè¦ç”¨ç½‘ç»œå­—èŠ‚åºè¡¨ç¤º</span></span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">in_addr</span> sin_addr;<span class="comment">// IPv4åœ°å€ç»“æ„ä½“</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">in_addr</span>&#123;</span><br><span class="line">    <span class="type">u_int32_t</span> s_addr;<span class="comment">// è¦ç”¨ç½‘ç»œå­—èŠ‚åºè¡¨ç¤º</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼šæ‰€æœ‰ä¸“ç”¨<code>socket</code>åœ°å€ç±»å‹çš„å˜é‡åœ¨å®é™…ä½¿ç”¨æ—¶éƒ½éœ€è¦è½¬æ¢ä¸ºé€šç”¨<code>socket</code>åœ°å€ç±»å‹<code>sockaddr</code>ï¼ˆå¼ºåˆ¶è½¬æ¢å³å¯ï¼‰ï¼Œå› ä¸ºæ‰€æœ‰<code>socket</code>ç¼–ç¨‹æ¥å£ä½¿ç”¨çš„åœ°å€å‚æ•°çš„ç±»å‹éƒ½æ˜¯<code>sockaddr</code>ã€‚</p><h4 id="5-1-4IPåœ°å€è½¬æ¢å‡½æ•°"><a href="#5-1-4IPåœ°å€è½¬æ¢å‡½æ•°" class="headerlink" title="5.1.4IPåœ°å€è½¬æ¢å‡½æ•°"></a>5.1.4<code>IP</code>åœ°å€è½¬æ¢å‡½æ•°</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;arpa/inet.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">inet_pton</span><span class="params">(<span class="type">int</span> af, <span class="type">const</span> <span class="type">char</span> *src, <span class="type">void</span> *dst)</span></span>;<span class="comment">// ç”¨äºå°†å­—ç¬¦ä¸²è¡¨ç¤ºçš„IPåœ°å€è½¬æ¢ä¸ºç”¨ç½‘ç»œå­—èŠ‚åºæ•´æ•°è¡¨ç¤ºçš„IPåœ°å€</span></span><br><span class="line"><span class="function"><span class="type">const</span> <span class="type">char</span> *<span class="title">inet_ntop</span><span class="params">(<span class="type">int</span> af, <span class="type">const</span> <span class="type">void</span> *src, <span class="type">char</span> *dst, <span class="type">socklen_t</span> cnt)</span></span>;<span class="comment">// æœ€åä¸€ä¸ªå‚æ•°æŒ‡å®šç›®æ ‡å­˜å‚¨å•å…ƒçš„å¤§å°ï¼Œè¿™ä¸¤ä¸ªå®å¯ä»¥å¸®æˆ‘ä»¬æŒ‡å®š</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">inet_ptonæˆåŠŸæ—¶è¿”å›1ï¼Œå¤±è´¥æ—¶è¿”å›0å¹¶è®¾ç½®errno</span></span><br><span class="line"><span class="comment">inet_ntopæˆåŠŸæ—¶è¿”å›ç›®æ ‡å­˜å‚¨å•å…ƒçš„åœ°å€ï¼Œå¤±è´¥è¿”å›NULLå¹¶è®¾ç½®errno</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;netinet/in.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> INET_ADDRSTRLEN 16</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> INET6_ADDRSTRLEN 64</span></span><br></pre></td></tr></table></figure><h4 id="5-2åˆ›å»ºsocket"><a href="#5-2åˆ›å»ºsocket" class="headerlink" title="5.2åˆ›å»ºsocket"></a>5.2åˆ›å»ºsocket</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sys/types.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sys/socket.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">socket</span><span class="params">(<span class="type">int</span> domain, <span class="type">int</span> type, <span class="type">int</span> protocol)</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="comment">/*</span></span></span><br><span class="line"><span class="comment"><span class="function">domainä¸€èˆ¬ä¸ºPF_INET(IPv4)ï¼Œæˆ–è€…PF_INET6(IPv6)</span></span></span><br><span class="line"><span class="comment"><span class="function">typeå‚æ•°æŒ‡å®šæœåŠ¡ç±»å‹ï¼Œä¸»è¦æœ‰SOCK_STREAMå’ŒSOCK_UGRAM</span></span></span><br><span class="line"><span class="comment"><span class="function">*/</span> </span></span><br></pre></td></tr></table></figure><p>socketç³»ç»Ÿè°ƒç”¨æˆåŠŸæ—¶è¿”å›ä¸€ä¸ªsocketæ–‡ä»¶æè¿°ç¬¦ï¼Œå¤±è´¥è¿”å›-1å¹¶è®¾ç½®errno</p><h4 id="5-3å‘½åsocket"><a href="#5-3å‘½åsocket" class="headerlink" title="5.3å‘½åsocket"></a>5.3å‘½åsocket</h4><p>åˆ›å»ºsocketæ—¶ï¼Œæˆ‘ä»¬ç»™å®ƒæŒ‡å®šäº†åœ°å€æ—ï¼Œä½†æ˜¯å¹¶æœªæŒ‡å®šä½¿ç”¨è¯¥åœ°å€æ—ä¸­çš„å“ªä¸ªå…·ä½“socketåœ°å€ã€‚å°†ä¸€ä¸ªsocketä¸socketåœ°å€ç»‘å®šç§°ä¸ºç»™socketå‘½åã€‚åœ¨æœåŠ¡å™¨ç¨‹åºä¸­ï¼Œæˆ‘ä»¬é€šå¸¸éœ€è¦å‘½åsocketï¼Œ<strong>å› ä¸ºåªæœ‰å‘½ååå®¢æˆ·ç«¯æ‰çŸ¥é“è¯¥å¦‚ä½•è¿æ¥å®ƒ</strong>ã€‚å®¢æˆ·ç«¯é€šå¸¸ä¸éœ€è¦å‘½åsocketï¼Œè€Œæ˜¯é‡‡ç”¨åŒ¿åæ–¹å¼ï¼Œä¹Ÿå°±æ˜¯ä½¿ç”¨æ“ä½œç³»ç»Ÿè‡ªåŠ¨åˆ†é…çš„socketåœ°å€ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sys/types.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sys/socket.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">bind</span><span class="params">(<span class="type">int</span> sockfd, <span class="type">const</span> <span class="keyword">struct</span> sockaddr* my_addr, <span class="type">socklen_t</span> addrlen)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">bindå°†my_addræ‰€æŒ‡çš„socketåœ°å€åˆ†é…ç»™æœªå‘½åçš„socketæ–‡ä»¶æè¿°ç¬¦ï¼Œaddrlenå‚æ•°æŒ‡å‡ºè¯¥socketåœ°å€çš„é•¿åº¦</span></span><br><span class="line"><span class="comment">bindæˆåŠŸæ—¶è¿”å›0ï¼Œå¤±è´¥æ—¶è¿”å›-1å¹¶è®¾ç½®errnoï¼Œå…¶ä¸­ä¸¤ç§å¸¸è§çš„errnoæ˜¯ï¼šEACCESå’ŒEADDRINUSEã€‚</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><h4 id="5-4ç›‘å¬socket"><a href="#5-4ç›‘å¬socket" class="headerlink" title="5.4ç›‘å¬socket"></a>5.4ç›‘å¬socket</h4><p>socketè¢«å‘½åä¹‹åï¼Œè¿˜ä¸èƒ½ç«‹å³æ¥æ”¶å®¢æˆ·ç«¯è¿æ¥ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨å¦‚ä¸‹ç³»ç»Ÿè°ƒç”¨æ¥åˆ›å»ºä¸€ä¸ªç›‘å¬é˜Ÿåˆ—ä»¥å­˜æ”¾å¾…å¤„ç†çš„å®¢æˆ·è¿æ¥</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sys/socket.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">listen</span><span class="params">(<span class="type">int</span> sockfd, <span class="type">int</span> backlog)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">sockfdå‚æ•°æŒ‡å®šè¢«ç›‘å¬çš„socketï¼Œbacklogå‚æ•°æç¤ºå†…æ ¸ç›‘å¬é˜Ÿåˆ—çš„æœ€å¤§é•¿åº¦ã€‚ç›‘å¬é˜Ÿåˆ—çš„é•¿åº¦å¦‚æœè¶…è¿‡backlogï¼ŒæœåŠ¡å™¨å°†ä¸å—ç†æ–°çš„å®¢æˆ·ç«¯è¿æ¥ï¼Œå®¢æˆ·ç«¯ä¹Ÿå°†æ”¶åˆ°ECONNREFUSEDé”™è¯¯ä¿¡æ¯ã€‚ï¼ˆå®é™…ä¸Šæœ€å¤šå¯ä»¥æ¥æ”¶backlog + 1ä¸ªå®¢æˆ·ç«¯è¿æ¥ï¼‰</span></span><br><span class="line"><span class="comment">listenæˆåŠŸæ—¶è¿”å›0ï¼Œå¤±è´¥æ—¶è¿”å›-1å¹¶è®¾ç½®errnoã€‚</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><p>ä¸‹é¢æˆ‘ä»¬ç¼–å†™ä¸€ä¸ªç¨‹åºæµ‹è¯•ä¸€ä¸‹</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sys/types.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sys/socket.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;netinet/in.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;arpa/inet.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;signal.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;assert.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">basenameä½¿ç”¨ç¤ºä¾‹ï¼š</span></span><br><span class="line"><span class="comment">`basename()` æ˜¯ä¸€ä¸ªå¸¸ç”¨äºå¤„ç†æ–‡ä»¶è·¯å¾„å’Œç¨‹åºå‚æ•°çš„åº“å‡½æ•°ã€‚</span></span><br><span class="line"><span class="comment">å®ƒçš„ä¸»è¦ç›®çš„æ˜¯ä»ä¸€ä¸ªç»™å®šçš„è·¯å¾„ä¸­æå–åŸºç¡€åï¼ˆbase nameï¼‰ï¼Œä¹Ÿå°±æ˜¯æœ€åä¸€éƒ¨åˆ†çš„åç§°ï¼Œä¸åŒ…å«ä»»ä½•å‰å¯¼çš„ç›®å½•ã€‚</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">æ¥è‡ª `&lt;libgen.h&gt;`ï¼ˆæˆ–åœ¨æŸäº›ç³»ç»Ÿä¸­æ˜¯ `&lt;string.h&gt;` æˆ– `&lt;strings.h&gt;`ï¼‰ï¼Œ`basename()` å‡½æ•°çš„åŸå‹å¦‚ä¸‹ï¼š</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">char *basename(char *path);</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">è®©æˆ‘ä»¬çœ‹ä¸€äº›ä½¿ç”¨ `basename()` çš„ä¾‹å­ï¼š</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">1. è¾“å…¥ `/home/user/documents/file.txt` è¿”å› `file.txt`</span></span><br><span class="line"><span class="comment">2. è¾“å…¥ `/home/user/documents/folder/` è¿”å› `folder`</span></span><br><span class="line"><span class="comment">3. è¾“å…¥ `/home/user/documents/` è¿”å› `documents`</span></span><br><span class="line"><span class="comment">4. è¾“å…¥ `file.txt` è¿”å› `file.txt`</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">åœ¨ç»™å‡ºçš„ä»£ç ç¤ºä¾‹ä¸­ï¼š</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">printf(&quot;usage: %s ip_address port_num backlog\n&quot;, basename(argv[0]));</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">`argv[0]` é€šå¸¸æ˜¯ç¨‹åºçš„åç§°ï¼ŒåŒ…æ‹¬å®ƒè¢«æ‰§è¡Œæ—¶çš„å®Œæ•´è·¯å¾„ã€‚</span></span><br><span class="line"><span class="comment">ä½¿ç”¨ `basename()` å‡½æ•°ï¼Œä½ å¯ä»¥ä»…æå–ç¨‹åºçš„å®é™…åç§°ï¼Œè€Œä¸åŒ…æ‹¬å…¶è·¯å¾„ï¼Œè¿™åœ¨æ˜¾ç¤ºå¸®åŠ©æˆ–é”™è¯¯æ¶ˆæ¯æ—¶ç‰¹åˆ«æœ‰ç”¨ã€‚</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">ä¸¾ä¸ªä¾‹å­ï¼Œå‡è®¾ç¨‹åºçš„å®Œæ•´è·¯å¾„æ˜¯ `/home/user/my_program`ï¼Œé‚£ä¹ˆ `basename(argv[0])` å°±ä¼šè¿”å› `my_program`ã€‚è¿™æ ·ï¼Œä¸Šè¿°çš„ `printf` è¯­å¥å°†è¾“å‡ºï¼š</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">usage: my_program ip_address port_num backlog</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ`basename()` å‡½æ•°å¯èƒ½ä¼šä¿®æ”¹å…¶å‚æ•°ï¼Œä¹Ÿå¯èƒ½è¿”å›ä¸€ä¸ªæŒ‡å‘é™æ€å­˜å‚¨åŒºçš„æŒ‡é’ˆã€‚</span></span><br><span class="line"><span class="comment">å› æ­¤ï¼Œå¦‚æœåŸå§‹è·¯å¾„å­—ç¬¦ä¸²ä¸åº”è¢«ä¿®æ”¹ï¼Œé‚£ä¹ˆåœ¨è°ƒç”¨ `basename()` ä¹‹å‰ï¼Œæœ€å¥½å…ˆå¤åˆ¶è¿™ä¸ªå­—ç¬¦ä¸²ã€‚</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="type">static</span> <span class="type">bool</span> stop = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">static</span> <span class="type">void</span> <span class="title function_">term_handler</span><span class="params">(<span class="type">int</span> sig)</span>&#123;</span><br><span class="line">    stop = <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span>&#123;</span><br><span class="line">    signal(SIGTERM, term_handler);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(argc &lt;= <span class="number">3</span>)&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;usage: %s ip_address port_num backlog\n&quot;</span>, basename(argv[<span class="number">0</span>]));</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">char</span> *ip = argv[<span class="number">1</span>];</span><br><span class="line">    <span class="type">int</span> port = atoi(argv[<span class="number">2</span>]);</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> sockfd = socket(PF_INET, SOCK_STREAM, <span class="number">0</span>);</span><br><span class="line">    assert(sockfd != <span class="number">-1</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> sign = <span class="number">0</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">sockaddr_in</span> <span class="title">server_addr</span>;</span></span><br><span class="line">    server_addr.sin_family = PF_INET;</span><br><span class="line">    server_addr.sin_port = htons(port);</span><br><span class="line">    inet_pton(PF_INET, ip, &amp;server_addr.sin_addr);</span><br><span class="line"></span><br><span class="line">    sign = bind(sockfd, (<span class="keyword">struct</span> sockaddr*)&amp;server_addr, <span class="keyword">sizeof</span>(server_addr));</span><br><span class="line">    assert(sign != <span class="number">-1</span>);</span><br><span class="line"></span><br><span class="line">    sign = listen(sockfd, <span class="number">5</span>);</span><br><span class="line">    assert(sign != <span class="number">-1</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(!stop)&#123;</span><br><span class="line">        sleep(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    close(sockfd);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">ç»“æœå¿˜è®°æˆªå›¾äº†ï¼Œå¤§å®¶å¯ä»¥è‡ªå·±è¯•ä¸€ä¸‹ï¼Œå…·ä½“æ­¥éª¤</span></span><br><span class="line"><span class="comment">./test 172.30.78.145 8000 5</span></span><br><span class="line"><span class="comment">å¦å¼€ç»ˆç«¯å¤šæ¬¡telnet 172.30.78.145 8000</span></span><br><span class="line"><span class="comment">netstat -nt | grep 8000</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><p>è¿™ä¸ªå‘½ä»¤ç»„åˆä½¿ç”¨äº†ä¸¤ä¸ªå‘½ä»¤ï¼š<code>netstat</code> å’Œ <code>grep</code>ï¼Œå¹¶é€šè¿‡ç®¡é“ï¼ˆ<code>|</code>ï¼‰å°†ç¬¬ä¸€ä¸ªå‘½ä»¤çš„è¾“å‡ºä½œä¸ºç¬¬äºŒä¸ªå‘½ä»¤çš„è¾“å…¥ã€‚æˆ‘ä¼šä¸ºä½ é€æ­¥è§£é‡Šå®ƒï¼š</p><ol><li><p><strong><code>netstat -nt</code></strong>:</p><ul><li><code>netstat</code>: è¿™æ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨äºæ˜¾ç¤ºç½‘ç»œçŠ¶æ€ï¼ŒåŒ…æ‹¬ç½‘ç»œè¿æ¥ã€è·¯ç”±è¡¨ã€æ¥å£ç»Ÿè®¡ç­‰ã€‚</li><li><code>-n</code>: è¡¨ç¤ºä»¥æ•°å­—å½¢å¼æ˜¾ç¤ºåœ°å€å’Œç«¯å£å·ï¼Œè€Œä¸æ˜¯å°è¯•è§£æå®ƒä»¬çš„åç§°ã€‚</li></ul></li></ol><ul><li><code>-t</code>: ä»…æ˜¾ç¤ºTCPè¿æ¥ã€‚</li></ul><p>å› æ­¤ï¼Œ<code>netstat -nt</code> çš„è¾“å‡ºä¼šåˆ—å‡ºç³»ç»Ÿä¸Šæ‰€æœ‰æ´»åŠ¨çš„TCPè¿æ¥ï¼ŒåŒæ—¶æ˜¾ç¤ºå®ƒä»¬çš„æºå’Œç›®æ ‡IPåœ°å€ä»¥åŠç«¯å£å·ï¼Œå¹¶ç›´æ¥æ˜¾ç¤ºæ•°å­—è€Œä¸è¿›è¡Œåç§°è§£æã€‚</p><ol start="2"><li><strong><code>|</code></strong>:</li></ol><ul><li>è¿™æ˜¯ä¸€ä¸ªç®¡é“æ“ä½œç¬¦ï¼Œç”¨äºå°†å‰ä¸€ä¸ªå‘½ä»¤çš„è¾“å‡ºä½œä¸ºåä¸€ä¸ªå‘½ä»¤çš„è¾“å…¥ã€‚</li></ul><ol start="3"><li><p><strong><code>grep 8000</code></strong>:</p><ul><li><code>grep</code>: æ˜¯ä¸€ä¸ªå¼ºå¤§çš„æ–‡æœ¬æœç´¢å·¥å…·ï¼Œç”¨äºæœç´¢åŒ¹é…çš„å­—ç¬¦ä¸²ã€‚</li><li><code>8000</code>: æ˜¯ä½ æƒ³åœ¨ <code>netstat</code> çš„è¾“å‡ºä¸­æœç´¢çš„å­—ç¬¦ä¸²ã€‚</li></ul><p>è¿™ä¸ªå‘½ä»¤ä¼šä» <code>netstat</code> çš„è¾“å‡ºä¸­ç­›é€‰å‡ºæ‰€æœ‰åŒ…å« â€œ8000â€ çš„è¡Œï¼Œè¿™é€šå¸¸æ„å‘³ç€ä½ æ­£åœ¨æŸ¥æ‰¾ä¸ç«¯å£ <code>8000</code> ç›¸å…³çš„æ‰€æœ‰æ´»åŠ¨è¿æ¥ã€‚</p></li></ol><p>ç»¼ä¸Šæ‰€è¿°ï¼Œ<code>netstat -nt | grep 8000</code> ä¼šæ˜¾ç¤ºæ‰€æœ‰åœ¨ç«¯å£ <code>8000</code> ä¸Šçš„æ´»åŠ¨TCPè¿æ¥ã€‚</p><h4 id="5-5æ¥å—è¿æ¥"><a href="#5-5æ¥å—è¿æ¥" class="headerlink" title="5.5æ¥å—è¿æ¥"></a>5.5æ¥å—è¿æ¥</h4><p>ä»£ç ï¼šæ¥å—ä¸€ä¸ªå¼‚å¸¸çš„è¿æ¥</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;libgen.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sys/socket.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;netinet/in.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;arpa/inet.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;assert.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span>* argv[])</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(argc &lt;= <span class="number">2</span>)&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;è¿è¡Œç¨‹åºï¼Œéœ€è¾“å…¥è¿™ä¸‰ä¸ªå‚æ•°ï¼š%s, ip_address, port_num\n&quot;</span>, <span class="built_in">basename</span>(argv[<span class="number">0</span>]));</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">const</span> <span class="type">char</span>* ip = argv[<span class="number">1</span>];</span><br><span class="line">    <span class="type">int</span> port = <span class="built_in">atoi</span>(argv[<span class="number">2</span>]);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">sockaddr_in</span> address;</span><br><span class="line">    address.sin_family = AF_INET;</span><br><span class="line">    <span class="built_in">inet_pton</span>(AF_INET, ip, &amp;address.sin_addr);</span><br><span class="line">    address.sin_port = <span class="built_in">ntohs</span>(port);</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> sock = <span class="built_in">socket</span>(AF_INET, SOCK_STREAM, <span class="number">0</span>);</span><br><span class="line">    <span class="built_in">assert</span>(sock &gt;= <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> ret = <span class="built_in">bind</span>(sock, (<span class="keyword">struct</span> sockaddr*)&amp;address, <span class="built_in">sizeof</span>(address));</span><br><span class="line">    <span class="built_in">assert</span>(ret != <span class="number">-1</span>);</span><br><span class="line"></span><br><span class="line">    ret = <span class="built_in">listen</span>(sock, <span class="number">5</span>);</span><br><span class="line">    <span class="built_in">assert</span>(ret != <span class="number">-1</span>);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">sleep</span>(<span class="number">20</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">sockaddr_in</span> client;</span><br><span class="line">    <span class="type">socklen_t</span> client_len = <span class="built_in">sizeof</span>(client);</span><br><span class="line">    <span class="type">int</span> connfd = <span class="built_in">accept</span>(sock, (<span class="keyword">struct</span> sockaddr*)&amp;client, &amp;client_len);</span><br><span class="line">    <span class="keyword">if</span>(connfd &lt; <span class="number">0</span>)&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;errno is: %d\n&quot;</span>, errno);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="type">char</span> remote[INET_ADDRSTRLEN];</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;connected with ip: %s and port: %d\n&quot;</span>, <span class="built_in">inet_ntop</span>(AF_INET, &amp;client.sin_addr, remote, client_len),</span><br><span class="line">                <span class="built_in">ntohs</span>(client.sin_port));</span><br><span class="line">        <span class="built_in">close</span>(connfd);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">close</span>(sock);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>1ã€ç¬¬ä¸€æ¬¡è¿è¡ŒæŠ¥é”™ï¼Œ<code>undefined reference to main</code>ï¼Œè¿™ç§æƒ…å†µä¸€èˆ¬æœ‰ä¸‰ç§å¯èƒ½ï¼š</p><ul><li>æ²¡æœ‰å®šä¹‰mainå‡½æ•°</li><li>mainå‡½æ•°çš„mainæ‹¼å†™é”™è¯¯</li><li>åˆšå†™çš„ä»£ç å¿˜è®°ä¿å­˜äº†</li></ul><p>2ã€<code>accept</code>å‡½æ•°æ˜¯é˜»å¡çš„ï¼Œä¸Šè¿°ä»£ç å³æœåŠ¡å™¨ç«¯è¿è¡Œçš„æ—¶å€™ï¼Œä¼šé˜»å¡åœ¨<code>accept</code>å¤„ï¼Œä¸€æ—¦å®¢æˆ·ç«¯è¯·æ±‚å»ºç«‹è¿æ¥ï¼ŒæœåŠ¡å™¨ç«‹é©¬ç»ˆæ­¢ç¨‹åºã€‚æ³¨æ„<code>accept</code>åªæ˜¯ä»<code>listen</code>ç›‘å¬é˜Ÿåˆ—ä¸­å–å‡ºè¿æ¥ï¼Œå®ƒä¸ä¼šç†ä¼šå®¢æˆ·ç«¯å¤„äºä»€ä¹ˆçŠ¶æ€ã€‚</p><p>3ã€ä¸€ç›´åœ¨æ€è€ƒ<code>select/poll/epoll</code>è¿™äº›æœ‰ä»€ä¹ˆç”¨ã€‚é¦–å…ˆå› ä¸ºlistenæ˜¯æœ‰ç›‘å¬é˜Ÿåˆ—çš„ï¼ŒåŠ£åŠ¿å°±åœ¨äºåªèƒ½ä¸€ä¸ªä¸ªå¤„ç†ï¼Œå¹¶ä¸”åŒæ—¶æ¥å…¥çš„è¿æ¥æ•°æœ‰é™ã€‚æ¯”å¦‚é˜Ÿåˆ—é•¿åº¦ä¸º5ï¼Œå¤„ç†å®Œä¸€ä¸ªï¼Œå†å»ºç«‹ä¸‹ä¸€ä¸ªè¿æ¥ï¼Œè¿™æ ·å¦‚æœæŸä¸€ä¸ªè¿æ¥å¤„ç†å¾ˆé•¿æ—¶é—´ä¸€ç›´é˜»å¡åœ¨é‚£é‡Œï¼Œå°±å¯¼è‡´åé¢çš„æ–°è¯·æ±‚è¿æ¥å»ºç«‹è¶…æ—¶ã€‚å¾ˆç›´è§‚çš„æƒ³æ³•æ˜¯<code>fork</code>æ–°è¿›ç¨‹æˆ–è€…åˆ›å»ºæ–°çº¿ç¨‹æ¥å¤„ç†æ–°è¿æ¥ï¼Œæ¯æ¥ä¸€ä¸ªè¿æ¥æˆ‘å°±åˆ›å»ºä¸€ä¸ªæ¥è·Ÿä»–å¯¹æ¥ã€‚è¿™æ ·èµ„æºæ¶ˆè€—å¤ªå¤§ã€‚å› æ­¤å°±æœ‰äº†<code>select/poll/epoll</code>ï¼Œå…ˆæŠŠè¿æ¥å»ºç«‹èµ·æ¥å¹¶æ”¾è¿›æ–‡ä»¶æè¿°ç¬¦ï¼Œæœ€åä»è¿™é‡Œé¢å¯»æ‰¾å“ªäº›å‘ç”Ÿäº†å¯è¯»å¯å†™äº‹ä»¶ï¼Œä¹Ÿé¿å…äº†å› ä¸ºè¯»å†™äº‹ä»¶é€ æˆçš„é˜»å¡ï¼ˆæ²¡æœ‰æ•°æ®åˆ°æ¥å°±é˜»å¡äº†ï¼‰ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h4 id=&quot;5-1-1-åˆ¤æ–­ä¸»æœºæ˜¯å°ç«¯å­—èŠ‚åºè¿˜æ˜¯å¤§ç«¯å­—èŠ‚åº&quot;&gt;&lt;a href=&quot;#5-1-1-åˆ¤æ–­ä¸»æœºæ˜¯å°ç«¯å­—èŠ‚åºè¿˜æ˜¯å¤§ç«¯å­—èŠ‚åº&quot; class=&quot;headerlink&quot; title=&quot;5.1.1 åˆ¤æ–­ä¸»æœºæ˜¯å°ç«¯å­—èŠ‚åºè¿˜æ˜¯å¤§ç«¯å­—èŠ‚åº&quot;&gt;&lt;/a&gt;5.1.1 åˆ¤æ–­ä¸»æœºæ˜¯å°ç«¯å­—èŠ‚åºè¿˜</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>C++å†…å­˜ç®¡ç†</title>
    <link href="http://zcl0219.github.io/2023/08/27/C-%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/"/>
    <id>http://zcl0219.github.io/2023/08/27/C-%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/</id>
    <published>2023-08-27T03:48:36.000Z</published>
    <updated>2023-08-28T01:05:57.661Z</updated>
    
    <content type="html"><![CDATA[<p>æœ‰å…³C++å†…å­˜ç®¡ç†é—®é¢˜æ€»ç»“å¦‚ä¸‹</p><h3 id="åŸºç¡€é—®é¢˜"><a href="#åŸºç¡€é—®é¢˜" class="headerlink" title="åŸºç¡€é—®é¢˜"></a>åŸºç¡€é—®é¢˜</h3><h4 id="C-ä¸­å †å’Œæ ˆçš„åŒºåˆ«æ˜¯ä»€ä¹ˆ"><a href="#C-ä¸­å †å’Œæ ˆçš„åŒºåˆ«æ˜¯ä»€ä¹ˆ" class="headerlink" title="C++ä¸­å †å’Œæ ˆçš„åŒºåˆ«æ˜¯ä»€ä¹ˆ"></a><code>C++</code>ä¸­å †å’Œæ ˆçš„åŒºåˆ«æ˜¯ä»€ä¹ˆ</h4><ol><li>æ ˆç”±ç³»ç»Ÿåˆ†é…é‡Šæ”¾ï¼Œæ ˆä¸Šå˜é‡çš„ç”Ÿå‘½å‘¨æœŸæ˜¯ç¡®å®šçš„ï¼Œä¸€èˆ¬ä¸ä½œç”¨åŸŸæœ‰å…³ã€‚æ ˆçš„åœ°å€ç”±é«˜åˆ°ä½ï¼Œæ ˆä¸Šåˆ†é…çš„ç©ºé—´å¤§å°åœ¨ç¼–è¯‘æ—¶é€šå¸¸å·²çŸ¥ã€‚</li><li>å †ç”±ç¨‹åºå‘˜æ‰‹åŠ¨å¼€è¾Ÿé‡Šæ”¾ï¼Œå †ä¸Šçš„å˜é‡é™¤éè¢«æ˜¾ç¤ºé‡Šæ”¾ï¼Œå¦åˆ™ä¼šæŒç»­å­˜åœ¨ã€‚å †çš„åœ°å€ç”±ä½åˆ°é«˜ï¼Œå †ä¸Šå‡ ä¹å¯ä»¥åˆ†é…ä»»æ„å¤§å°çš„å†…å­˜å—ï¼Œä½†å¯èƒ½ä¼šé€ æˆå†…å­˜ç¢ç‰‡ã€‚</li><li>è¿™é‡Œè¯´ä¸€ä¸‹<code>C++</code>çš„å†…å­˜åˆ†åŒºï¼šå †åŒºã€æ ˆåŒºã€<code>data</code>åŒºã€<code>bss</code>æ®µã€ä»£ç æ®µã€‚æ•°æ®<code>data</code>åŒºå­˜æ”¾çš„æ˜¯é™æ€å˜é‡å’Œåˆå§‹åŒ–çš„å…¨å±€å˜é‡ï¼Œ<code>bss</code>æ®µå­˜æ”¾çš„æ˜¯æœªåˆå§‹åŒ–çš„å…¨å±€å˜é‡ã€‚</li></ol><h4 id="ä»€ä¹ˆæ˜¯RAIIï¼Ÿä¸ºä»€ä¹ˆå®ƒåœ¨C-ä¸­å¾ˆé‡è¦"><a href="#ä»€ä¹ˆæ˜¯RAIIï¼Ÿä¸ºä»€ä¹ˆå®ƒåœ¨C-ä¸­å¾ˆé‡è¦" class="headerlink" title="ä»€ä¹ˆæ˜¯RAIIï¼Ÿä¸ºä»€ä¹ˆå®ƒåœ¨C++ä¸­å¾ˆé‡è¦"></a>ä»€ä¹ˆæ˜¯<code>RAII</code>ï¼Ÿä¸ºä»€ä¹ˆå®ƒåœ¨<code>C++</code>ä¸­å¾ˆé‡è¦</h4><p><code>RAII</code>æ˜¯ä¸€ç§ç¼–ç¨‹æ€æƒ³å’Œè®¾è®¡æ¨¡å¼ï¼Œæ ¸å¿ƒæ€æƒ³æ˜¯ï¼šå°†èµ„æºçš„è·å–ä¸å¯¹è±¡çš„åˆå§‹åŒ–æ†ç»‘åœ¨ä¸€èµ·ï¼Œå°†èµ„æºçš„é‡Šæ”¾ä¸å¯¹è±¡çš„é”€æ¯æ†ç»‘åœ¨ä¸€èµ·ã€‚è¿™æ ·ï¼Œèµ„æºç®¡ç†å°±ä¸å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸç´§å¯†å…³è”ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;fstream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">File</span> &#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    std::fstream fs;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">File</span>(<span class="type">const</span> std::string&amp; filename) &#123;</span><br><span class="line">        fs.<span class="built_in">open</span>(filename, std::ios::in | std::ios::out);</span><br><span class="line">        <span class="keyword">if</span> (!fs.<span class="built_in">is_open</span>()) &#123;</span><br><span class="line">            <span class="keyword">throw</span> std::<span class="built_in">runtime_error</span>(<span class="string">&quot;Failed to open the file&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å…¶ä»–ä¸æ–‡ä»¶ç›¸å…³çš„æ“ä½œ...</span></span><br><span class="line"></span><br><span class="line">    ~<span class="built_in">File</span>() &#123;</span><br><span class="line">        <span class="keyword">if</span> (fs.<span class="built_in">is_open</span>()) &#123;</span><br><span class="line">            fs.<span class="built_in">close</span>();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="function">File <span class="title">myFile</span><span class="params">(<span class="string">&quot;sample.txt&quot;</span>)</span></span>;</span><br><span class="line">        <span class="comment">// è¿›è¡Œæ–‡ä»¶æ“ä½œ...</span></span><br><span class="line"></span><br><span class="line">    &#125; <span class="built_in">catch</span> (<span class="type">const</span> std::exception&amp; e) &#123;</span><br><span class="line">        std::cerr &lt;&lt; <span class="string">&quot;Error: &quot;</span> &lt;&lt; e.<span class="built_in">what</span>() &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å½“myFileå¯¹è±¡ç¦»å¼€å…¶ä½œç”¨åŸŸæ—¶ï¼Œå®ƒçš„ææ„å‡½æ•°ä¼šè‡ªåŠ¨è¢«è°ƒç”¨ï¼Œä»è€Œå…³é—­æ–‡ä»¶</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="è§£é‡Šnewå’Œdeleteï¼Œä¸mallocå’Œfreeçš„åŒºåˆ«"><a href="#è§£é‡Šnewå’Œdeleteï¼Œä¸mallocå’Œfreeçš„åŒºåˆ«" class="headerlink" title="è§£é‡Šnewå’Œdeleteï¼Œä¸mallocå’Œfreeçš„åŒºåˆ«"></a>è§£é‡Š<code>new</code>å’Œ<code>delete</code>ï¼Œä¸<code>malloc</code>å’Œ<code>free</code>çš„åŒºåˆ«</h4><ul><li><p>å±æ€§çš„åŒºåˆ«</p><p><code>new/delete</code>ï¼šè¿™ä¸¤ä¸ªæ˜¯<code>C++</code>ä¸­çš„å…³é”®å­—ï¼›</p><p><code>malloc/free</code>ï¼šè¿™ä¸¤ä¸ªæ˜¯åº“å‡½æ•°ï¼›</p></li><li><p>ä½¿ç”¨ä¸Šçš„åŒºåˆ«</p><p><code>malloc</code>ï¼šç”³è¯·ç©ºé—´éœ€è¦æ˜¾å¼å¡«å…¥ç”³è¯·å†…å­˜çš„å¤§å°ï¼›</p><p><code>new</code>ï¼šæ— éœ€æ˜¾å¼å¡«å…¥ç”³è¯·å†…å­˜çš„å¤§å°ï¼Œ<code>new</code>ä¼šæ ¹æ®<code>new</code>çš„ç±»å‹åˆ†é…å†…å­˜ï¼›</p></li><li><p>è¿”å›ç±»å‹çš„åŒºåˆ«</p><p><code>new</code>æ“ä½œç¬¦å†…å­˜åˆ†é…æˆåŠŸï¼Œè¿”å›çš„æ˜¯å¯¹è±¡ç±»å‹çš„æŒ‡é’ˆï¼Œç±»å‹ä¸¥æ ¼ä¸å¯¹è±¡åŒ¹é…ï¼Œæ— éœ€è¿›è¡Œç±»å‹è½¬æ¢ï¼Œæ•…<code>new</code>æ˜¯ç¬¦åˆç±»å‹å®‰å…¨æ€§çš„æ“ä½œç¬¦ã€‚</p><p><code>malloc</code>å†…å­˜åˆ†é…æˆåŠŸè¿”å›çš„æ˜¯<code>void*</code>æŒ‡é’ˆï¼Œéœ€è¦é€šè¿‡å¼ºåˆ¶ç±»å‹è½¬æ¢ï¼Œè½¬æ¢æˆæˆ‘ä»¬éœ€è¦çš„ç±»å‹ã€‚</p><p>æ‰€ä»¥<code>C++</code>ä¸­<code>new</code>æ¯”<code>malloc</code>å®‰å…¨å¯é ã€‚</p></li><li><p>åˆ†é…å¤±è´¥çš„åŒºåˆ«</p><p><code>malloc</code>åˆ†é…å¤±è´¥ä¼šè¿”å›<code>NULL</code>ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡åˆ¤æ–­è¿”å›å€¼æ˜¯å¦æ˜¯<code>NULL</code>å¾—çŸ¥æ˜¯å¦åˆ†é…æˆåŠŸã€‚</p><p><code>new</code>åˆ†é…å¤±è´¥ä¼šæŠ›å‡º<code>bad_alloc</code>å¼‚å¸¸ã€‚</p></li><li><p>æ‰©å¼ å†…å­˜çš„åŒºåˆ«</p><p><code>malloc</code>æœ‰å†…å­˜æ‰©å¼ æœºåˆ¶ï¼ˆé€šè¿‡<code>realloc</code>å®ç°ï¼‰ã€‚</p><p><code>new</code>æ²¡æœ‰æ‰©å¼ å†…å­˜æœºåˆ¶ã€‚</p></li></ul><h3 id="ä¸­çº§é—®é¢˜"><a href="#ä¸­çº§é—®é¢˜" class="headerlink" title="ä¸­çº§é—®é¢˜"></a>ä¸­çº§é—®é¢˜</h3><h4 id="ä¸ºä»€ä¹ˆC-æ¨èä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆï¼Œå¦‚shared-ptrå’Œunique-ptr"><a href="#ä¸ºä»€ä¹ˆC-æ¨èä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆï¼Œå¦‚shared-ptrå’Œunique-ptr" class="headerlink" title="ä¸ºä»€ä¹ˆC++æ¨èä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆï¼Œå¦‚shared_ptrå’Œunique_ptr"></a>ä¸ºä»€ä¹ˆ<code>C++</code>æ¨èä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆï¼Œå¦‚<code>shared_ptr</code>å’Œ<code>unique_ptr</code></h4><ul><li>è‡ªåŠ¨ç®¡ç†å†…å­˜ï¼šå¯¹äº<code>unique_ptr</code>ï¼Œå½“å®ƒè¶…å‡ºä½œç”¨åŸŸæˆ–è€…è¢«é‡æ–°åˆ†é…æ—¶ï¼Œå®ƒæŒ‡å‘çš„å¯¹è±¡ä¼šè¢«åˆ é™¤ã€‚å¯¹äº<code>shared_ptr</code>ï¼Œå½“å®ƒçš„å¼•ç”¨è®¡æ•°ä¸º0æ—¶ï¼Œå®ƒæŒ‡å‘çš„å¯¹è±¡ä¼šè¢«åˆ é™¤ã€‚</li><li>å¼‚å¸¸å®‰å…¨ï¼šå½“å‡½æ•°æŠ›å‡ºå¼‚å¸¸ï¼Œæ™ºèƒ½æŒ‡é’ˆç¡®ä¿èµ„æºè¢«æ­£ç¡®æ¸…ç†ï¼Œé¿å…èµ„æºæ³„éœ²ã€‚</li><li>é˜²æ­¢æ‚¬æŒ‚æŒ‡é’ˆï¼šæ‚¬æŒ‚æŒ‡é’ˆæ˜¯æŒ‡æŒ‡å‘å·²ç»é‡Šæ”¾å†…å­˜çš„æŒ‡é’ˆã€‚<code>unique_ptr</code>å’Œ<code>shared_ptr</code>å¯ä»¥å‡å°‘æ‚¬æŒ‚æŒ‡é’ˆçš„é£é™©ï¼Œå› ä¸ºä»–ä»¬ç¡®ä¿åœ¨æ²¡æœ‰å¼•ç”¨çš„æ—¶å€™é‡Šæ”¾èµ„æºã€‚</li></ul><h4 id="ä½ èƒ½è§£é‡Šshared-pträ¸­çš„å¼•ç”¨è®¡æ•°æœºåˆ¶æ˜¯å¦‚ä½•å·¥ä½œçš„å—"><a href="#ä½ èƒ½è§£é‡Šshared-pträ¸­çš„å¼•ç”¨è®¡æ•°æœºåˆ¶æ˜¯å¦‚ä½•å·¥ä½œçš„å—" class="headerlink" title="ä½ èƒ½è§£é‡Šshared_pträ¸­çš„å¼•ç”¨è®¡æ•°æœºåˆ¶æ˜¯å¦‚ä½•å·¥ä½œçš„å—"></a>ä½ èƒ½è§£é‡Š<code>shared_ptr</code>ä¸­çš„å¼•ç”¨è®¡æ•°æœºåˆ¶æ˜¯å¦‚ä½•å·¥ä½œçš„å—</h4><ul><li>é€šè¿‡ä¸€ä¸ªæŒ‡é’ˆå®ç°å¼•ç”¨è®¡æ•°åŠŸèƒ½ï¼ŒåŠ é”ï¼Œä¿è¯çº¿ç¨‹å®‰å…¨</li></ul><h4 id="ä»€ä¹ˆæƒ…å†µä¸‹ä¼šå¯¼è‡´å†…å­˜æ³„æ¼ï¼Œä½ å¦‚ä½•æ£€æµ‹å’Œé¢„é˜²"><a href="#ä»€ä¹ˆæƒ…å†µä¸‹ä¼šå¯¼è‡´å†…å­˜æ³„æ¼ï¼Œä½ å¦‚ä½•æ£€æµ‹å’Œé¢„é˜²" class="headerlink" title="ä»€ä¹ˆæƒ…å†µä¸‹ä¼šå¯¼è‡´å†…å­˜æ³„æ¼ï¼Œä½ å¦‚ä½•æ£€æµ‹å’Œé¢„é˜²"></a>ä»€ä¹ˆæƒ…å†µä¸‹ä¼šå¯¼è‡´å†…å­˜æ³„æ¼ï¼Œä½ å¦‚ä½•æ£€æµ‹å’Œé¢„é˜²</h4><ul><li><p>æŒ‡é’ˆé‡æ–°èµ‹å€¼</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> *p = <span class="keyword">new</span> <span class="built_in">int</span>();</span><br><span class="line"><span class="type">int</span> *np = <span class="keyword">new</span> <span class="built_in">int</span>();</span><br><span class="line">p = np;</span><br><span class="line"><span class="comment">//påŸæ¥çš„æŒ‡å‘çš„å†…å­˜æ— æ³•é‡Šæ”¾ï¼Œå› ä¸ºç°åœ¨æ²¡æœ‰æŒ‡é’ˆæŒ‡å‘è¿™å—å†…å­˜</span></span><br></pre></td></tr></table></figure></li><li><p>é”™è¯¯çš„å†…å­˜é‡Šæ”¾</p><p>å‡è®¾æœ‰ä¸€ä¸ªæŒ‡é’ˆ<code>p</code>æŒ‡å‘10å­—èŠ‚çš„å†…å­˜ï¼Œè¯¥å†…å­˜çš„ç¬¬ä¸‰ä¸ªå­—èŠ‚<code>np</code>åˆæŒ‡å‘æŸä¸ªåŠ¨æ€åˆ†é…çš„å†…å­˜ï¼Œ å¦‚æœæ­¤æ—¶ä½ ç›´æ¥<code>delete(p)</code>ï¼Œåˆ™ä¼šå¯¼è‡´<code>np</code>æŒ‡å‘çš„å†…å­˜æ— æ³•é‡Šæ”¾ã€‚</p></li><li><p>è¿”å›å€¼çš„ä¸æ­£ç¡®å¤„ç†</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> *<span class="title">f</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">int</span>(<span class="number">42</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">f1</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="built_in">f</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç”±äºæ²¡æœ‰å¯¹å‡½æ•°f()çš„è¿”å›å€¼åšæ­£ç¡®æ¥æ”¶ï¼Œå°†ä¼šå¯¼è‡´få‡½æ•°åˆ†é…çš„å†…å­˜æ— æ³•é‡Šæ”¾ã€‚</span></span><br></pre></td></tr></table></figure></li></ul><p>å…³äºå†…å­˜æ³„éœ²å¯ä»¥ä½¿ç”¨å·¥å…·ï¼š<code>Valgrind</code>ã€‚</p><h3 id="é«˜çº§é—®é¢˜"><a href="#é«˜çº§é—®é¢˜" class="headerlink" title="é«˜çº§é—®é¢˜"></a>é«˜çº§é—®é¢˜</h3><h4 id="æè¿°C-çš„å†…å­˜æ¨¡å‹æ˜¯ä»€ä¹ˆï¼Ÿå¦‚ä½•ä¿è¯çº¿ç¨‹é—´çš„æ•°æ®åŒæ­¥ï¼Ÿ"><a href="#æè¿°C-çš„å†…å­˜æ¨¡å‹æ˜¯ä»€ä¹ˆï¼Ÿå¦‚ä½•ä¿è¯çº¿ç¨‹é—´çš„æ•°æ®åŒæ­¥ï¼Ÿ" class="headerlink" title="æè¿°C++çš„å†…å­˜æ¨¡å‹æ˜¯ä»€ä¹ˆï¼Ÿå¦‚ä½•ä¿è¯çº¿ç¨‹é—´çš„æ•°æ®åŒæ­¥ï¼Ÿ"></a>æè¿°C++çš„å†…å­˜æ¨¡å‹æ˜¯ä»€ä¹ˆï¼Ÿå¦‚ä½•ä¿è¯çº¿ç¨‹é—´çš„æ•°æ®åŒæ­¥ï¼Ÿ</h4><h4 id="ä»€ä¹ˆæ˜¯å†…å­˜å±éšœ-memory-barrier-æˆ–å†…å­˜æ …æ ï¼Ÿåœ¨å“ªäº›åœºæ™¯ä¸­éœ€è¦ä½¿ç”¨å®ƒï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯å†…å­˜å±éšœ-memory-barrier-æˆ–å†…å­˜æ …æ ï¼Ÿåœ¨å“ªäº›åœºæ™¯ä¸­éœ€è¦ä½¿ç”¨å®ƒï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯å†…å­˜å±éšœ(memory barrier)æˆ–å†…å­˜æ …æ ï¼Ÿåœ¨å“ªäº›åœºæ™¯ä¸­éœ€è¦ä½¿ç”¨å®ƒï¼Ÿ"></a>ä»€ä¹ˆæ˜¯å†…å­˜å±éšœ(memory barrier)æˆ–å†…å­˜æ …æ ï¼Ÿåœ¨å“ªäº›åœºæ™¯ä¸­éœ€è¦ä½¿ç”¨å®ƒï¼Ÿ</h4><h4 id="ä½ æœ‰æ²¡æœ‰ç”¨è¿‡å®šåˆ¶çš„å†…å­˜åˆ†é…å™¨ï¼Œæ¯”å¦‚ä¸ºæŸäº›é«˜æ€§èƒ½çš„åº”ç”¨åœºæ™¯ï¼Ÿå¦‚æœæœ‰ï¼Œè¯·æè¿°å…¶å·¥ä½œåŸç†å’Œä½¿ç”¨åœºæ™¯ã€‚"><a href="#ä½ æœ‰æ²¡æœ‰ç”¨è¿‡å®šåˆ¶çš„å†…å­˜åˆ†é…å™¨ï¼Œæ¯”å¦‚ä¸ºæŸäº›é«˜æ€§èƒ½çš„åº”ç”¨åœºæ™¯ï¼Ÿå¦‚æœæœ‰ï¼Œè¯·æè¿°å…¶å·¥ä½œåŸç†å’Œä½¿ç”¨åœºæ™¯ã€‚" class="headerlink" title="ä½ æœ‰æ²¡æœ‰ç”¨è¿‡å®šåˆ¶çš„å†…å­˜åˆ†é…å™¨ï¼Œæ¯”å¦‚ä¸ºæŸäº›é«˜æ€§èƒ½çš„åº”ç”¨åœºæ™¯ï¼Ÿå¦‚æœæœ‰ï¼Œè¯·æè¿°å…¶å·¥ä½œåŸç†å’Œä½¿ç”¨åœºæ™¯ã€‚"></a>ä½ æœ‰æ²¡æœ‰ç”¨è¿‡å®šåˆ¶çš„å†…å­˜åˆ†é…å™¨ï¼Œæ¯”å¦‚ä¸ºæŸäº›é«˜æ€§èƒ½çš„åº”ç”¨åœºæ™¯ï¼Ÿå¦‚æœæœ‰ï¼Œè¯·æè¿°å…¶å·¥ä½œåŸç†å’Œä½¿ç”¨åœºæ™¯ã€‚</h4><h3 id="å®è·µé—®é¢˜"><a href="#å®è·µé—®é¢˜" class="headerlink" title="å®è·µé—®é¢˜"></a>å®è·µé—®é¢˜</h3><h4 id="æè¿°ä¸€ä¸ªä½ æ›¾é‡åˆ°çš„å¤æ‚çš„å†…å­˜ç›¸å…³bugï¼Œä½ æ˜¯å¦‚ä½•è¯Šæ–­å’Œè§£å†³çš„ï¼Ÿ"><a href="#æè¿°ä¸€ä¸ªä½ æ›¾é‡åˆ°çš„å¤æ‚çš„å†…å­˜ç›¸å…³bugï¼Œä½ æ˜¯å¦‚ä½•è¯Šæ–­å’Œè§£å†³çš„ï¼Ÿ" class="headerlink" title="æè¿°ä¸€ä¸ªä½ æ›¾é‡åˆ°çš„å¤æ‚çš„å†…å­˜ç›¸å…³bugï¼Œä½ æ˜¯å¦‚ä½•è¯Šæ–­å’Œè§£å†³çš„ï¼Ÿ"></a>æè¿°ä¸€ä¸ªä½ æ›¾é‡åˆ°çš„å¤æ‚çš„å†…å­˜ç›¸å…³bugï¼Œä½ æ˜¯å¦‚ä½•è¯Šæ–­å’Œè§£å†³çš„ï¼Ÿ</h4><h4 id="ä½ å¦‚ä½•è¯„ä¼°ä¸€ä¸ªC-ç¨‹åºçš„å†…å­˜ä½¿ç”¨æ•ˆç‡ï¼Ÿä½ ä½¿ç”¨è¿‡å“ªäº›å·¥å…·æˆ–æŠ€æœ¯"><a href="#ä½ å¦‚ä½•è¯„ä¼°ä¸€ä¸ªC-ç¨‹åºçš„å†…å­˜ä½¿ç”¨æ•ˆç‡ï¼Ÿä½ ä½¿ç”¨è¿‡å“ªäº›å·¥å…·æˆ–æŠ€æœ¯" class="headerlink" title="ä½ å¦‚ä½•è¯„ä¼°ä¸€ä¸ªC++ç¨‹åºçš„å†…å­˜ä½¿ç”¨æ•ˆç‡ï¼Ÿä½ ä½¿ç”¨è¿‡å“ªäº›å·¥å…·æˆ–æŠ€æœ¯"></a>ä½ å¦‚ä½•è¯„ä¼°ä¸€ä¸ªC++ç¨‹åºçš„å†…å­˜ä½¿ç”¨æ•ˆç‡ï¼Ÿä½ ä½¿ç”¨è¿‡å“ªäº›å·¥å…·æˆ–æŠ€æœ¯</h4><h4 id="è¯·ç¼–å†™ä¸€ä¸ªå°ç¨‹åºï¼Œå…¶ä¸­åˆ›å»ºä¸€ä¸ªæœ‰èµ„æºæ³„æ¼çš„ç±»ï¼Œç„¶åå±•ç¤ºå¦‚ä½•ä½¿ç”¨å·¥å…·æˆ–æ–¹æ³•æ‰¾åˆ°å¹¶ä¿®å¤è¯¥æ³„æ¼ã€‚"><a href="#è¯·ç¼–å†™ä¸€ä¸ªå°ç¨‹åºï¼Œå…¶ä¸­åˆ›å»ºä¸€ä¸ªæœ‰èµ„æºæ³„æ¼çš„ç±»ï¼Œç„¶åå±•ç¤ºå¦‚ä½•ä½¿ç”¨å·¥å…·æˆ–æ–¹æ³•æ‰¾åˆ°å¹¶ä¿®å¤è¯¥æ³„æ¼ã€‚" class="headerlink" title="è¯·ç¼–å†™ä¸€ä¸ªå°ç¨‹åºï¼Œå…¶ä¸­åˆ›å»ºä¸€ä¸ªæœ‰èµ„æºæ³„æ¼çš„ç±»ï¼Œç„¶åå±•ç¤ºå¦‚ä½•ä½¿ç”¨å·¥å…·æˆ–æ–¹æ³•æ‰¾åˆ°å¹¶ä¿®å¤è¯¥æ³„æ¼ã€‚"></a>è¯·ç¼–å†™ä¸€ä¸ªå°ç¨‹åºï¼Œå…¶ä¸­åˆ›å»ºä¸€ä¸ªæœ‰èµ„æºæ³„æ¼çš„ç±»ï¼Œç„¶åå±•ç¤ºå¦‚ä½•ä½¿ç”¨å·¥å…·æˆ–æ–¹æ³•æ‰¾åˆ°å¹¶ä¿®å¤è¯¥æ³„æ¼ã€‚</h4>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;æœ‰å…³C++å†…å­˜ç®¡ç†é—®é¢˜æ€»ç»“å¦‚ä¸‹&lt;/p&gt;
&lt;h3 id=&quot;åŸºç¡€é—®é¢˜&quot;&gt;&lt;a href=&quot;#åŸºç¡€é—®é¢˜&quot; class=&quot;headerlink&quot; title=&quot;åŸºç¡€é—®é¢˜&quot;&gt;&lt;/a&gt;åŸºç¡€é—®é¢˜&lt;/h3&gt;&lt;h4 id=&quot;C-ä¸­å †å’Œæ ˆçš„åŒºåˆ«æ˜¯ä»€ä¹ˆ&quot;&gt;&lt;a href=&quot;#C-ä¸­å †å’Œæ ˆçš„åŒºåˆ«æ˜¯</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>å•ä¾‹æ‡’æ±‰æ¨¡å¼</title>
    <link href="http://zcl0219.github.io/2023/08/25/%E5%8D%95%E4%BE%8B%E6%87%92%E6%B1%89%E6%A8%A1%E5%BC%8F/"/>
    <id>http://zcl0219.github.io/2023/08/25/%E5%8D%95%E4%BE%8B%E6%87%92%E6%B1%89%E6%A8%A1%E5%BC%8F/</id>
    <published>2023-08-25T03:31:52.000Z</published>
    <updated>2023-08-25T03:35:53.069Z</updated>
    
    <content type="html"><![CDATA[<p>è¯ä¸å¤šè¯´ï¼Œç›´æ¥ä¸Šä»£ç </p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;mutex&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Singleton</span>&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Singleton</span>(<span class="type">const</span> Singleton&amp;) = <span class="keyword">delete</span>;</span><br><span class="line">    Singleton&amp; <span class="keyword">operator</span>=(<span class="type">const</span> Singleton&amp;) = <span class="keyword">delete</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//åŒé‡æ£€æŸ¥é”å®šæ¨¡å¼</span></span><br><span class="line">    <span class="comment">//è¿™æ ·åšçš„ç›®çš„æ˜¯ï¼Œå¦‚æœå®ä¾‹å·²ç»è¢«åˆ›å»ºï¼Œå¯ä»¥é¿å…æ¯æ¬¡åŠ é”è§£é”çš„æ“ä½œï¼Œæé«˜æ€§èƒ½</span></span><br><span class="line">    <span class="comment">//ä½†çœ‹æ–‡å­—å¯èƒ½ä¸å¥½ç†è§£ï¼Œè¿™é‡Œç»™å‡ºä¸æ˜¯åŒé‡æ£€æŸ¥é”å®šæ¨¡å¼å°±å¥½ç†è§£äº†</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    static Singleton&amp; getInstance()&#123;</span></span><br><span class="line"><span class="comment">        std::lock_guard&lt;std::mutex&gt; lock(mutex_);</span></span><br><span class="line"><span class="comment">        if(instance_ == nullptr)&#123;</span></span><br><span class="line"><span class="comment">            instance_ = new Singleton();</span></span><br><span class="line"><span class="comment">        &#125;</span></span><br><span class="line"><span class="comment">        return *instance_;</span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment">    è¿™ç§å†™æ³•æ€§èƒ½éå¸¸ä½ä¸‹ï¼Œå› ä¸ºæ¯æ¬¡è°ƒç”¨instance()éƒ½ä¼šåŠ é”é‡Šæ”¾é”ï¼Œè€Œè¿™ä¸ªæ­¥éª¤åªæœ‰åœ¨ç¬¬ä¸€æ¬¡new Singleton()æ‰æ˜¯æœ‰å¿…è¦çš„ã€‚</span></span><br><span class="line"><span class="comment">    åªè¦pè¢«åˆ›å»ºå‡ºæ¥äº†ï¼Œä¸ç®¡å¤šå°‘çº¿ç¨‹åŒæ—¶è®¿é—®ï¼Œä½¿ç”¨if (p == nullptr) è¿›è¡Œåˆ¤æ–­éƒ½æ˜¯è¶³å¤Ÿçš„ï¼ˆåªæ˜¯è¯»æ“ä½œï¼Œä¸éœ€è¦åŠ é”ï¼‰ï¼Œæ²¡æœ‰çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œ</span></span><br><span class="line"><span class="comment">    åŠ äº†é”ä¹‹ååè€Œå­˜åœ¨æ€§èƒ½é—®é¢˜ã€‚</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   </span><br><span class="line">    <span class="function"><span class="type">static</span> Singleton&amp; <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(instance_ == <span class="literal">nullptr</span>)&#123;</span><br><span class="line">            <span class="function">std::lock_guard&lt;std::mutex&gt; <span class="title">lock</span><span class="params">(mutex_)</span></span>;</span><br><span class="line">            <span class="keyword">if</span>(instance_ == <span class="literal">nullptr</span>)&#123;</span><br><span class="line">                instance_ = <span class="keyword">new</span> <span class="built_in">Singleton</span>();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> *instance_;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="built_in">Singleton</span>() &#123;&#125;</span><br><span class="line">    ~<span class="built_in">Singleton</span>() &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">static</span> std::mutex mutex_;</span><br><span class="line">    <span class="type">static</span> Singleton *instance_;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">std::mutex Singleton::mutex_;</span><br><span class="line">Singleton* Singleton::instance_ = <span class="literal">nullptr</span>;</span><br></pre></td></tr></table></figure><p><strong>é—®é¢˜</strong></p><p>æ„é€ ææ„ä¸ºä»€ä¹ˆè¦ç§æœ‰</p><p>è§£ç­”ï¼š</p><p>åœ¨å•ä¾‹æ¨¡å¼ä¸­ï¼Œæ„é€ å‡½æ•°å’Œææ„å‡½æ•°è¢«è®¾ç½®ä¸ºç§æœ‰çš„åŸå› æ˜¯ä¸ºäº†ç¡®ä¿æ»¡è¶³å•ä¾‹æ¨¡å¼çš„æ ¸å¿ƒè¦æ±‚ï¼šç³»ç»Ÿä¸­æŸä¸ªç±»åªèƒ½å­˜åœ¨ä¸€ä¸ªå®ä¾‹ã€‚</p><p>é€šè¿‡å°†æ„é€ å‡½æ•°å’Œææ„å‡½æ•°è®¾ä¸ºç§æœ‰ï¼Œæˆ‘ä»¬å¯ä»¥ç¡®ä¿ä»¥ä¸‹å‡ ç‚¹ï¼š</p><ol><li><p><strong>å¤–éƒ¨æ— æ³•å®ä¾‹åŒ–</strong>ï¼šç”±äºæ„é€ å‡½æ•°æ˜¯ç§æœ‰çš„ï¼Œè¿™æ„å‘³ç€ä¸èƒ½åœ¨ç±»çš„å¤–éƒ¨ç›´æ¥åˆ›å»ºè¯¥ç±»çš„å®ä¾‹ã€‚è¿™ç¡®ä¿äº†å®ä¾‹çš„åˆ›å»ºåªèƒ½é€šè¿‡å•ä¾‹ç±»æä¾›çš„æŸäº›ç‰¹å®šæ–¹æ³•ï¼ˆå¦‚<code>getInstance</code>ï¼‰æ¥å®Œæˆï¼Œä»è€Œæ§åˆ¶å®ä¾‹çš„æ•°é‡ã€‚</p></li><li><p><strong>ç¦æ­¢å¤åˆ¶</strong>ï¼šå•ä¾‹æ¨¡å¼è¦ç¡®ä¿åªæœ‰ä¸€ä¸ªå®ä¾‹å­˜åœ¨ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸å¸Œæœ›è¯¥ç±»çš„å¯¹è±¡è¢«å¤åˆ¶ã€‚å°†æ„é€ å‡½æ•°è®¾ä¸ºç§æœ‰å¯ä»¥é˜²æ­¢å¤åˆ¶æ„é€ ï¼Œä½†ä¸ºäº†è¿›ä¸€æ­¥ç¡®ä¿ä¸è¢«å¤åˆ¶ï¼Œæˆ‘ä»¬é€šå¸¸è¿˜éœ€è¦ç¦æ­¢æ‹·è´æ„é€ å‡½æ•°å’Œæ‹·è´èµ‹å€¼æ“ä½œç¬¦ï¼ˆé€šè¿‡<code>= delete</code>ï¼‰ã€‚</p></li><li><p><strong>å¤–éƒ¨æ— æ³•é”€æ¯</strong>ï¼šå°†ææ„å‡½æ•°è®¾ä¸ºç§æœ‰å¯ä»¥ç¡®ä¿å¤–éƒ¨ä»£ç æ— æ³•ç›´æ¥åˆ é™¤å•ä¾‹å¯¹è±¡ã€‚é€šå¸¸ï¼Œå•ä¾‹å¯¹è±¡åœ¨ç¨‹åºç»“æŸæ—¶è‡ªåŠ¨é”€æ¯ï¼Œæˆ–è€…å•ä¾‹ç±»æä¾›äº†ä¸€ä¸ªä¸“é—¨çš„æ–¹æ³•æ¥æ‰‹åŠ¨é”€æ¯å®ƒã€‚</p></li><li><p><strong>ç»§æ‰¿æ§åˆ¶</strong>ï¼šç”±äºæ„é€ å‡½æ•°å’Œææ„å‡½æ•°æ˜¯ç§æœ‰çš„ï¼Œè¿™ä¹Ÿæ„å‘³ç€è¿™ä¸ªç±»ä¸èƒ½è¢«ç»§æ‰¿ï¼ˆå› ä¸ºæ´¾ç”Ÿç±»çš„æ„é€ å‡½æ•°éœ€è¦è°ƒç”¨åŸºç±»çš„æ„é€ å‡½æ•°ï¼‰ã€‚</p></li></ol><p>ç»¼ä¸Šæ‰€è¿°ï¼Œå°†æ„é€ å‡½æ•°å’Œææ„å‡½æ•°è®¾ä¸ºç§æœ‰æ˜¯ä¸ºäº†ç¡®ä¿æ»¡è¶³å•ä¾‹æ¨¡å¼çš„è®¾è®¡åŸåˆ™ï¼Œå³ç³»ç»Ÿä¸­è¯¥ç±»åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶æä¾›å¯¹è¯¥å®ä¾‹çš„å…¨å±€è®¿é—®ç‚¹ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;è¯ä¸å¤šè¯´ï¼Œç›´æ¥ä¸Šä»£ç &lt;/p&gt;
&lt;figure class=&quot;highlight c++&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>æ—¥å¿—æ¨¡å—è®¾è®¡</title>
    <link href="http://zcl0219.github.io/2023/08/25/%E6%97%A5%E5%BF%97%E6%A8%A1%E5%9D%97%E8%AE%BE%E8%AE%A1/"/>
    <id>http://zcl0219.github.io/2023/08/25/%E6%97%A5%E5%BF%97%E6%A8%A1%E5%9D%97%E8%AE%BE%E8%AE%A1/</id>
    <published>2023-08-25T02:45:23.000Z</published>
    <updated>2023-08-25T02:57:50.778Z</updated>
    
    <content type="html"><![CDATA[<p><strong>æœ¬ç¯‡æ–‡ç« ä¸»è¦å‚è€ƒå¦‚ä¸‹æ–‡ç« ï¼Œä¸»è¦æ˜¯å¯¹ä»£ç åšä¸€ä¸ªè¾ƒä¸ºè¯¦å°½çš„è§£é‡Š</strong></p><p>å‚è€ƒé“¾æ¥ï¼š<a href="https://blog.csdn.net/qq_46495964/article/details/122952567">https://blog.csdn.net/qq_46495964/article/details/122952567</a></p><p><strong>å‰è¨€ï¼š</strong><br>æ—¥å¿—ç³»ç»Ÿåœ¨ç¨‹åºè¿è¡Œä¸­æœ‰ç€éå¸¸å¤§çš„ä½œç”¨ï¼Œç”¨äºè®°å½•ç¨‹åºçš„è¿è¡Œæƒ…å†µï¼Œåœ¨ç¨‹åºå‡ºé”™åæŸ¥çœ‹æ—¥å¿—ï¼Œæ–¹ä¾¿åœ°å®šä½å‡ºé”™çš„å¤§æ¦‚èŒƒå›´ã€‚åœ¨è®¾è®¡æ—¥å¿—ç³»ç»Ÿä¹‹å‰ï¼Œå…ˆè€ƒè™‘ä¸€ä¸‹æ—¥å¿—éœ€è¦è¾“å‡ºä»€ä¹ˆä¿¡æ¯å‘¢ï¼Ÿä»€ä¹ˆä¿¡æ¯æ‰æ˜¯æœ‰ç”¨çš„ä¿¡æ¯ï¼Œéƒ½çŸ¥é“å†™æ—¥å¿—æ˜¯ä¸€ç§å¯¹æ–‡ä»¶çš„<code>io</code>æ“ä½œï¼Œæ‰€ä»¥å°½å¯èƒ½é¿å…è¾“å‡ºæ²¡ç”¨çš„ä¿¡æ¯ã€‚<br><strong>æœ‰ç”¨çš„ä¿¡æ¯ï¼šå…³é”®å˜é‡çš„å€¼ã€è¿è¡Œçš„ä½ç½®ï¼ˆå“ªä¸ªæ–‡ä»¶ã€å“ªä¸ªå‡½æ•°ã€å“ªä¸€è¡Œï¼‰ã€æ—¶é—´ã€çº¿ç¨‹å·ã€è¿›ç¨‹å·ç­‰ç­‰ã€‚</strong></p><h4 id="æ—¥å¿—ç³»ç»Ÿçš„è®¾è®¡"><a href="#æ—¥å¿—ç³»ç»Ÿçš„è®¾è®¡" class="headerlink" title="æ—¥å¿—ç³»ç»Ÿçš„è®¾è®¡"></a>æ—¥å¿—ç³»ç»Ÿçš„è®¾è®¡</h4><ol><li><p>æ—¥å¿—çš„çº§åˆ«</p><p>åœ¨æµ‹è¯•ã€è°ƒè¯•ã€äº¤ä»˜ç­‰åœºæ™¯éœ€è¦è¾“å‡ºä¸åŒçš„çº§åˆ«æ—¥å¿—ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¸¸è§çš„æ—¥å¿—çº§åˆ«</span></span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">LOGLEVEL</span></span><br><span class="line">&#123;</span><br><span class="line">LOG_LEVEL_NONE,</span><br><span class="line">LOG_LEVEL_ERROR,     <span class="comment">// error</span></span><br><span class="line">LOG_LEVEL_WARNING,   <span class="comment">// warning</span></span><br><span class="line">LOG_LEVEL_DEBUG,     <span class="comment">// debug</span></span><br><span class="line">LOG_LEVEL_INFO,      <span class="comment">// info</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li><li><p>æ—¥å¿—çš„è¾“å‡ºåœ°</p><p>æ—¥å¿—è¾“å‡ºçš„åœ°æ–¹å¯èƒ½ä¸åŒï¼Œç»ˆç«¯ã€æ§åˆ¶å°ã€UIç•Œé¢ã€æ–‡ä»¶ç­‰ç­‰éƒ½æœ‰ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">LOGTARGET</span></span><br><span class="line">&#123;</span><br><span class="line">LOG_TERM      = <span class="number">0x00</span>,</span><br><span class="line">LOG_FILE      = <span class="number">0x01</span>,</span><br><span class="line">LOG_UI        = <span class="number">0x10</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li><li><p>æ—¥å¿—çš„ä½œç”¨åŸŸ</p><p>æ—¥å¿—åšåˆ°ä»€ä¹ˆæ—¶å€™éƒ½å¯ä»¥è¾“å‡ºï¼Œå¯ä½œç”¨äºå…¨ç¨‹åºæ–‡ä»¶ï¼Œè€ƒè™‘åˆ°å¤šçº¿ç¨‹æƒ…å†µä¸‹ï¼Œå¿…é¡»ä¿è¯æ—¥å¿—çš„è¾“å‡ºéœ€è¦å¾—åˆ°çº¿ç¨‹å®‰å…¨çš„ä¿éšœï¼Œæ‰€ä»¥éœ€è¦ä¸€ä¸ª<strong>å…¨å±€ä¸”å”¯ä¸€çš„æ—¥å¿—å™¨</strong>ã€‚ä½¿ç”¨è®¾è®¡æ¨¡å¼ä¸­çš„<strong>å•ä¾‹æ¨¡å¼â€”â€“æ—¥å¿—å™¨</strong></p></li></ol><h4 id="C-ç‰ˆæœ¬çš„æ—¥å¿—ç³»ç»Ÿçš„å®ç°"><a href="#C-ç‰ˆæœ¬çš„æ—¥å¿—ç³»ç»Ÿçš„å®ç°" class="headerlink" title="C++ç‰ˆæœ¬çš„æ—¥å¿—ç³»ç»Ÿçš„å®ç°"></a>C++ç‰ˆæœ¬çš„æ—¥å¿—ç³»ç»Ÿçš„å®ç°</h4><p><strong>Logger.h</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">è¿™æ˜¯ä¸€ä¸ªåŸºæœ¬çš„çº¿ç¨‹å®‰å…¨æ—¥å¿—ç³»ç»Ÿçš„å¤´æ–‡ä»¶ï¼Œå…¶ç›®çš„æ˜¯ä¸ºåº”ç”¨ç¨‹åºæä¾›æ—¥å¿—åŠŸèƒ½ã€‚ä»¥ä¸‹æ˜¯å¯¹è¿™ä¸ªå¤´æ–‡ä»¶çš„è¯¦ç»†è§£é‡Šï¼š</span><br><span class="line"></span><br><span class="line">1. **é¢„å¤„ç†æŒ‡ä»¤å’Œå®**:</span><br><span class="line">    - `<span class="comment">#ifndef`, `#define`, å’Œ `#endif` ç”¨äºä¿è¯å¤´æ–‡ä»¶åªè¢«åŒ…å«ä¸€æ¬¡ï¼Œé¿å…é‡å¤å®šä¹‰ã€‚</span></span><br><span class="line">    - `<span class="comment">#define` å®å®šä¹‰äº†ä¸‰ä¸ªæ—¥å¿—çº§åˆ«ï¼š`LogInfo`, `LogWarning`, å’Œ `LogError`ã€‚è¿™äº›å®éƒ½ä½¿ç”¨äº†å˜å‚ï¼ˆ`...`ï¼‰ï¼Œå…è®¸ç”¨æˆ·ä¸ºæ—¥å¿—æä¾›è‡ªå®šä¹‰çš„æ ¼å¼å’Œå‚æ•°ã€‚è¿™äº›å®æ•è·äº†æ—¥å¿—æ¶ˆæ¯çš„æ¥æºï¼ˆæ–‡ä»¶ã€è¡Œå·å’Œå‡½æ•°ï¼‰å¹¶å°†å…¶æ·»åŠ åˆ°æ—¥å¿—é˜Ÿåˆ—ä¸­ã€‚</span></span><br><span class="line"></span><br><span class="line">2. **ç±»å®šä¹‰ï¼šLogger**</span><br><span class="line">    - æ˜¯ä¸€ä¸ªå•ä¾‹ç±»ï¼Œè¿™æ„å‘³ç€æ•´ä¸ªç¨‹åºä¸­åªèƒ½æœ‰ä¸€ä¸ªå®ä¾‹ã€‚è¿™é€šè¿‡ç§æœ‰çš„é»˜è®¤æ„é€ å‡½æ•°ã€åˆ é™¤çš„å¤åˆ¶æ„é€ å‡½æ•°å’Œèµ‹å€¼è¿ç®—ç¬¦æ¥å®ç°ã€‚</span><br><span class="line">    - `GetInstance()` æ–¹æ³•æä¾›äº†å¯¹å•ä¾‹å®ä¾‹çš„è®¿é—®ã€‚</span><br><span class="line">    - `SetFileName()` å…è®¸è®¾ç½®æ—¥å¿—æ–‡ä»¶çš„åç§°ã€‚</span><br><span class="line">    - `Start()` å’Œ `Stop()` ç”¨äºå¯åŠ¨å’Œåœæ­¢æ—¥å¿—çº¿ç¨‹ã€‚</span><br><span class="line">    - `AddToQueue()` æ˜¯ç”¨äºå°†æ–°çš„æ—¥å¿—æ¶ˆæ¯æ·»åŠ åˆ°æ—¥å¿—é˜Ÿåˆ—çš„æ–¹æ³•ã€‚</span><br><span class="line">    - `threadfunc()` æ˜¯æ—¥å¿—çº¿ç¨‹çš„å·¥ä½œå‡½æ•°ï¼Œå®ƒæŒç»­ä»æ—¥å¿—é˜Ÿåˆ—ä¸­è¯»å–æ¶ˆæ¯å¹¶å†™å…¥æ–‡ä»¶ã€‚</span><br><span class="line"></span><br><span class="line">3. **ç±»çš„ç§æœ‰æˆå‘˜**:</span><br><span class="line">    - `filename_`: å­˜å‚¨æ—¥å¿—æ–‡ä»¶çš„åç§°ã€‚</span><br><span class="line">    - `fp_`: ç”¨äºæ–‡ä»¶æ“ä½œçš„æ–‡ä»¶æŒ‡é’ˆã€‚è¯·æ³¨æ„ï¼Œåœ¨æ‰€ç»™ä»£ç ä¸­ï¼Œ`FILE` çš„å£°æ˜è¢«æ³¨é‡Šæ‰äº†ï¼Œä½ éœ€è¦åŒ…å« `&lt;cstdio&gt;` æˆ–è€…ç›´æ¥ä½¿ç”¨ C++ çš„æ–‡ä»¶æµç±»ï¼ˆå¦‚ `std::ofstream`ï¼‰ã€‚</span><br><span class="line">    - `spthread_`: ä¸€ä¸ªæ™ºèƒ½æŒ‡é’ˆï¼ŒæŒ‡å‘æ—¥å¿—çº¿ç¨‹ã€‚</span><br><span class="line">    - `mutex_`: ç”¨äºä¿æŠ¤æ—¥å¿—é˜Ÿåˆ—å’Œå…¶ä»–å…±äº«èµ„æºï¼Œç¡®ä¿å¤šçº¿ç¨‹è®¿é—®æ—¶çš„çº¿ç¨‹å®‰å…¨ã€‚</span><br><span class="line">    - `cv_`: æ¡ä»¶å˜é‡ï¼Œç”¨äºé€šçŸ¥æ—¥å¿—çº¿ç¨‹æœ‰æ–°çš„æ¶ˆæ¯åˆ°æ¥ã€‚</span><br><span class="line">    - `exit_`: ä¸€ä¸ªæ ‡å¿—ï¼ŒæŒ‡ç¤ºæ—¥å¿—çº¿ç¨‹ä½•æ—¶é€€å‡ºã€‚</span><br><span class="line">    - `queue_`: å­˜å‚¨å¾…å¤„ç†æ—¥å¿—æ¶ˆæ¯çš„é˜Ÿåˆ—ã€‚</span><br><span class="line"></span><br><span class="line">4. **æ³¨é‡Š**: </span><br><span class="line">    - æä¾›äº†å…³äºè¯¥æ–‡ä»¶çš„åŸºæœ¬ä¿¡æ¯ï¼Œå¦‚æ–‡ä»¶åç§°å’Œæ—¥æœŸã€‚</span><br><span class="line"></span><br><span class="line">æ€»ä¹‹ï¼Œè¿™ä¸ªæ—¥å¿—ç³»ç»Ÿè®¾è®¡çš„æ€è·¯æ˜¯ï¼š</span><br><span class="line">1. ç”¨æˆ·è°ƒç”¨é¢„å®šä¹‰çš„å®æ·»åŠ æ—¥å¿—æ¶ˆæ¯ã€‚</span><br><span class="line">2. æ—¥å¿—æ¶ˆæ¯è¢«æ·»åŠ åˆ°ä¸€ä¸ªçº¿ç¨‹å®‰å…¨çš„é˜Ÿåˆ—ã€‚</span><br><span class="line">3. ä¸€ä¸ªç‹¬ç«‹çš„æ—¥å¿—çº¿ç¨‹ä»é˜Ÿåˆ—ä¸­å–å‡ºæ¶ˆæ¯å¹¶å†™å…¥æ–‡ä»¶ã€‚</span><br><span class="line"></span><br><span class="line">è¿™ç§è®¾è®¡å…è®¸åº”ç”¨ç¨‹åºéé˜»å¡åœ°æ·»åŠ æ—¥å¿—æ¶ˆæ¯ï¼Œè€Œå°†I/Oæ“ä½œç•™ç»™ä¸“é—¨çš„çº¿ç¨‹ï¼Œä»è€Œæé«˜åº”ç”¨ç¨‹åºçš„æ€§èƒ½ã€‚</span><br></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** </span></span><br><span class="line"><span class="comment"> * æ—¥å¿—ç±»å¤´æ–‡ä»¶, Logger.h</span></span><br><span class="line"><span class="comment"> *  2022.02.1</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"> </span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> __LOGGER_H__</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> __LOGGER_H__</span></span><br><span class="line"> </span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;memory&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;thread&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;mutex&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;condition_variable&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;list&gt;</span></span></span><br><span class="line"> </span><br><span class="line"><span class="comment">//struct FILE;</span></span><br><span class="line"> </span><br><span class="line"><span class="meta">#<span class="keyword">define</span> LogInfo(...)        Logger::GetInstance().AddToQueue(<span class="string">&quot;INFO&quot;</span>, __FILE__, __LINE__, __PRETTY_FUNCTION__, __VA_ARGS__)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> LogWarning(...)     Logger::GetInstance().AddToQueue(<span class="string">&quot;WARNING&quot;</span>, __FILE__, __LINE__, __PRETTY_FUNCTION__, __VA_ARGS__)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> LogError(...)       Logger::GetInstance().AddToQueue(<span class="string">&quot;ERROR&quot;</span>, __FILE__, __LINE__, __PRETTY_FUNCTION__, __VA_ARGS__)</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Logger</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">static</span> Logger&amp; <span class="title">GetInstance</span><span class="params">()</span></span>;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">SetFileName</span><span class="params">(<span class="type">const</span> <span class="type">char</span>* filename)</span></span>;</span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">Start</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">Stop</span><span class="params">()</span></span>;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">AddToQueue</span><span class="params">(<span class="type">const</span> <span class="type">char</span>* pszLevel, <span class="type">const</span> <span class="type">char</span>* pszFile, <span class="type">int</span> lineNo, <span class="type">const</span> <span class="type">char</span>* pszFuncSig, <span class="type">char</span>* pszFmt, ...)</span></span>;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="built_in">Logger</span>() = <span class="keyword">default</span>;</span><br><span class="line">    <span class="built_in">Logger</span>(<span class="type">const</span> Logger&amp; rhs) = <span class="keyword">delete</span>;</span><br><span class="line">    Logger&amp; <span class="keyword">operator</span> =(Logger&amp; rhs) = <span class="keyword">delete</span>;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">threadfunc</span><span class="params">()</span></span>;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    std::string                     filename_;</span><br><span class="line">    FILE*                           fp_&#123;&#125;;</span><br><span class="line">    std::shared_ptr&lt;std::thread&gt;    spthread_;</span><br><span class="line">    std::mutex                      mutex_;</span><br><span class="line">    std::condition_variable         cv_;            <span class="comment">//æœ‰æ–°çš„æ—¥å¿—åˆ°æ¥çš„æ ‡è¯†</span></span><br><span class="line">    <span class="type">bool</span>                            exit_&#123;<span class="literal">false</span>&#125;;</span><br><span class="line">    std::list&lt;std::string&gt;          queue_;</span><br><span class="line">&#125;;</span><br><span class="line"> </span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">//!__LOGGER_H__</span></span></span><br></pre></td></tr></table></figure><p>Logger.cpp</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">è¿™æ˜¯æ—¥å¿—ç±»çš„å®ç°æ–‡ä»¶`Logger.cpp`ã€‚å®ƒå¯¹`Logger.h`ä¸­å®šä¹‰çš„å‡½æ•°è¿›è¡Œäº†å…·ä½“çš„å®ç°ã€‚æˆ‘å°†åˆ†æ­¥è§£é‡Šè¿™ä¸ªæ–‡ä»¶çš„å†…å®¹ï¼š</span><br><span class="line"></span><br><span class="line">1. **<span class="comment">#includeè¯­å¥**: å¼•å…¥äº†æ‰€éœ€çš„å¤´æ–‡ä»¶ï¼Œå…¶ä¸­`Logger.h`æ˜¯ä¹‹å‰ä½ å±•ç¤ºçš„æ—¥å¿—ç±»çš„å¤´æ–‡ä»¶ï¼Œå…¶ä»–çš„æ˜¯Cå’ŒC++æ ‡å‡†åº“ä¸­çš„å¤´æ–‡ä»¶ã€‚</span></span><br><span class="line"></span><br><span class="line">2. **GetInstanceæ–¹æ³•**: å®ç°äº†å•ä¾‹æ¨¡å¼çš„æ ¸å¿ƒåŠŸèƒ½ã€‚é€šè¿‡ä½¿ç”¨å±€éƒ¨é™æ€å¯¹è±¡`logger`ï¼Œå®ƒç¡®ä¿åªåˆ›å»ºä¸€æ¬¡`Logger`ç±»çš„å®ä¾‹ã€‚</span><br><span class="line"></span><br><span class="line">3. **SetFileNameæ–¹æ³•**: å…è®¸ç”¨æˆ·è®¾ç½®æ—¥å¿—æ–‡ä»¶çš„åç§°ã€‚</span><br><span class="line"></span><br><span class="line">4. **Startæ–¹æ³•**: </span><br><span class="line">    - å¦‚æœç”¨æˆ·æ²¡æœ‰æä¾›æ—¥å¿—æ–‡ä»¶åï¼Œå®ƒä¼šç”Ÿæˆä¸€ä¸ªé»˜è®¤çš„æ—¥å¿—æ–‡ä»¶åï¼Œè¯¥æ–‡ä»¶ååŒ…å«å½“å‰çš„æ—¥æœŸå’Œæ—¶é—´ã€‚</span><br><span class="line">    - å°è¯•æ‰“å¼€æ—¥å¿—æ–‡ä»¶ä»¥å†™å…¥å’Œè¯»å–ã€‚</span><br><span class="line">    - åˆ›å»ºä¸€ä¸ªæ–°çº¿ç¨‹æ¥å¤„ç†æ—¥å¿—æ¶ˆæ¯ã€‚</span><br><span class="line"></span><br><span class="line">5. **Stopæ–¹æ³•**: </span><br><span class="line">    - è®¾ç½®`exit_`æ ‡å¿—ä¸º`<span class="literal">true</span>`ã€‚</span><br><span class="line">    - é€šè¿‡æ¡ä»¶å˜é‡é€šçŸ¥æ—¥å¿—çº¿ç¨‹ã€‚</span><br><span class="line">    - ç­‰å¾…æ—¥å¿—çº¿ç¨‹ç»“æŸã€‚</span><br><span class="line"></span><br><span class="line">6. **AddToQueueæ–¹æ³•**: </span><br><span class="line">    - ä½¿ç”¨å˜é•¿å‚æ•°åˆ—è¡¨æ ¼å¼åŒ–æ—¥å¿—æ¶ˆæ¯ã€‚</span><br><span class="line">    - ç”Ÿæˆä¸€ä¸ªåŒ…å«æ—¥æœŸã€æ—¶é—´ã€æ—¥å¿—çº§åˆ«ã€çº¿ç¨‹IDã€æºæ–‡ä»¶åã€è¡Œå·ã€å‡½æ•°ç­¾åå’Œæ—¥å¿—æ¶ˆæ¯çš„å®Œæ•´æ—¥å¿—å­—ç¬¦ä¸²ã€‚</span><br><span class="line">    - ä½¿ç”¨äº’æ–¥é”å°†å®Œæ•´çš„æ—¥å¿—å­—ç¬¦ä¸²æ·»åŠ åˆ°é˜Ÿåˆ—ã€‚</span><br><span class="line">    - é€šè¿‡æ¡ä»¶å˜é‡é€šçŸ¥æ—¥å¿—çº¿ç¨‹æœ‰æ–°çš„æ¶ˆæ¯åˆ°æ¥ã€‚</span><br><span class="line"></span><br><span class="line">7. **threadfuncæ–¹æ³•**:</span><br><span class="line">    - æ—¥å¿—çº¿ç¨‹çš„æ ¸å¿ƒåŠŸèƒ½ã€‚</span><br><span class="line">    - æ£€æŸ¥æ–‡ä»¶æŒ‡é’ˆæ˜¯å¦ä¸ºç©ºã€‚</span><br><span class="line">    - åœ¨`exit_`ä¸º`<span class="literal">false</span>`çš„æƒ…å†µä¸‹ï¼Œå¾ªç¯å¤„ç†æ—¥å¿—æ¶ˆæ¯ã€‚</span><br><span class="line">    - ä½¿ç”¨äº’æ–¥é”å’Œæ¡ä»¶å˜é‡ç­‰å¾…æ–°çš„æ¶ˆæ¯åˆ°æ¥ã€‚</span><br><span class="line">    - å½“æœ‰æ–°çš„æ¶ˆæ¯æ—¶ï¼Œä»é˜Ÿåˆ—ä¸­å–å‡ºå¹¶å†™å…¥æ—¥å¿—æ–‡ä»¶ã€‚</span><br><span class="line">    - å¦‚æœè®¾ç½®äº†é€€å‡ºæ ‡å¿—å¹¶ä¸”é˜Ÿåˆ—ä¸ºç©ºï¼Œçº¿ç¨‹å°†é€€å‡ºã€‚</span><br><span class="line"></span><br><span class="line">æ€»ä½“ä¸Šï¼Œè¿™æ˜¯ä¸€ä¸ªç®€å•ä½†åŠŸèƒ½å®Œæ•´çš„æ—¥å¿—ç³»ç»Ÿå®ç°ã€‚å®ƒä½¿ç”¨äº†å¤šçº¿ç¨‹ï¼Œäº’æ–¥é”å’Œæ¡ä»¶å˜é‡æ¥ç¡®ä¿çº¿ç¨‹å®‰å…¨ï¼Œå¹¶ä½¿æ—¥å¿—æ“ä½œä¸åº”ç”¨ç¨‹åºçš„å…¶ä»–éƒ¨åˆ†å¼‚æ­¥è¿›è¡Œï¼Œä»è€Œæé«˜äº†æ€§èƒ½ã€‚</span><br><span class="line"></span><br><span class="line">ç„¶è€Œï¼Œä¹Ÿæœ‰ä¸€äº›å¯ä»¥è¿›ä¸€æ­¥ä¼˜åŒ–æˆ–æ”¹è¿›çš„åœ°æ–¹ï¼š</span><br><span class="line">1. åœ¨`Start()`ä¸­ï¼Œæ–‡ä»¶æ˜¯ä»¥<span class="string">&quot;wt+&quot;</span>æ¨¡å¼æ‰“å¼€çš„ï¼Œè¿™æ„å‘³ç€å¦‚æœæ–‡ä»¶å·²ç»å­˜åœ¨ï¼Œå®ƒä¼šè¢«è¦†ç›–ã€‚å¦‚æœå¸Œæœ›åœ¨ç°æœ‰æ–‡ä»¶ä¸­è¿½åŠ æ—¥å¿—ï¼Œåˆ™åº”ä½¿ç”¨<span class="string">&quot;at+&quot;</span>ã€‚</span><br><span class="line">2. ä»£ç ä¸­æ²¡æœ‰æ˜ç¡®çš„é”™è¯¯å¤„ç†æˆ–å¼‚å¸¸å¤„ç†ç­–ç•¥ã€‚ä¾‹å¦‚ï¼Œå¦‚æœ`fopen`å¤±è´¥æˆ–`std::thread`åˆ›å»ºå¤±è´¥æ—¶ã€‚</span><br><span class="line">3. åœ¨`threadfunc`ä¸­ï¼Œå½“é˜Ÿåˆ—ä¸ä¸ºç©ºæ—¶ï¼Œæ¯å¤„ç†ä¸€ä¸ªæ¶ˆæ¯å°±ä¼šåˆ·æ–°æ–‡ä»¶ï¼Œè¿™å¯èƒ½å½±å“æ€§èƒ½ã€‚å¯ä»¥è€ƒè™‘åœ¨é˜Ÿåˆ—ä¸­æœ‰å¤šä¸ªæ¶ˆæ¯æ—¶ï¼Œä¸€æ¬¡æ€§å†™å…¥å¤šä¸ªæ¶ˆæ¯ï¼Œç„¶åå†åˆ·æ–°ã€‚</span><br><span class="line">4. å¯èƒ½ä¼šè€ƒè™‘æ·»åŠ ä¸€ä¸ª`Rotate`åŠŸèƒ½ï¼Œå½“æ—¥å¿—æ–‡ä»¶å¤§å°è¶…è¿‡æŸä¸ªé™åˆ¶æ—¶ï¼Œè‡ªåŠ¨å°†å½“å‰æ—¥å¿—æ–‡ä»¶é‡å‘½åï¼Œå¹¶åˆ›å»ºä¸€ä¸ªæ–°çš„æ—¥å¿—æ–‡ä»¶ã€‚</span><br><span class="line">5. ä¸ºäº†æé«˜æ€§èƒ½ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨åŒç¼“å†²æŠ€æœ¯ï¼Œè¿™æ ·å¯ä»¥å‡å°‘äº’æ–¥é”çš„äº‰ç”¨ã€‚</span><br></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ—¥å¿—ç±»å®ç°æ–‡ä»¶, Logger.cpp</span></span><br><span class="line"><span class="comment"> *  2022.02.1</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"> </span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;Logger.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;time.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;memory&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdarg.h&gt;</span></span></span><br><span class="line"> </span><br><span class="line"><span class="function">Logger&amp; <span class="title">Logger::GetInstance</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">static</span> Logger logger;</span><br><span class="line">    <span class="keyword">return</span> logger;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Logger::SetFileName</span><span class="params">(<span class="type">const</span> <span class="type">char</span>* filename)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    filename_ = filename;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">Logger::Start</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (filename_.<span class="built_in">empty</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">time_t</span> now = <span class="built_in">time</span>(<span class="literal">NULL</span>);</span><br><span class="line">        <span class="keyword">struct</span> <span class="title class_">tm</span>* t = <span class="built_in">localtime</span>(&amp;now);</span><br><span class="line">        <span class="type">char</span> timestr[<span class="number">64</span>] = &#123; <span class="number">0</span> &#125;;</span><br><span class="line">        <span class="built_in">sprintf</span>(timestr, <span class="string">&quot;%04d%02d%02d%02d%02d%02d.imserver.log&quot;</span>, t-&gt;tm_year + <span class="number">1900</span>, t-&gt;tm_mon + <span class="number">1</span>, t-&gt;tm_mday, t-&gt;tm_hour, t-&gt;tm_min, t-&gt;tm_sec);</span><br><span class="line">        filename_ = timestr;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    fp_ = <span class="built_in">fopen</span>(filename_.<span class="built_in">c_str</span>(), <span class="string">&quot;wt+&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (fp_ == <span class="literal">NULL</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"> </span><br><span class="line">    spthread_.<span class="built_in">reset</span>(<span class="keyword">new</span> std::<span class="built_in">thread</span>(std::<span class="built_in">bind</span>(&amp;Logger::threadfunc, <span class="keyword">this</span>)));</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Logger::Stop</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    exit_ = <span class="literal">true</span>;</span><br><span class="line">    cv_.<span class="built_in">notify_one</span>();</span><br><span class="line"> </span><br><span class="line">    <span class="comment">//ç­‰å¾…æ—¶é—´çº¿ç¨‹ç»“æŸ</span></span><br><span class="line">    spthread_-&gt;<span class="built_in">join</span>();</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Logger::AddToQueue</span><span class="params">(<span class="type">const</span> <span class="type">char</span>* pszLevel, <span class="type">const</span> <span class="type">char</span>* pszFile, <span class="type">int</span> lineNo, <span class="type">const</span> <span class="type">char</span>* pszFuncSig, <span class="type">char</span>* pszFmt, ...)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">char</span> msg[<span class="number">256</span>] = &#123; <span class="number">0</span> &#125;;</span><br><span class="line"> </span><br><span class="line">    va_list vArgList;                            </span><br><span class="line">    <span class="built_in">va_start</span>(vArgList, pszFmt);</span><br><span class="line">    <span class="built_in">vsnprintf</span>(msg, <span class="number">256</span>, pszFmt, vArgList);</span><br><span class="line">    <span class="built_in">va_end</span>(vArgList);</span><br><span class="line"> </span><br><span class="line">    <span class="type">time_t</span> now = <span class="built_in">time</span>(<span class="literal">NULL</span>);</span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">tm</span>* tmstr = <span class="built_in">localtime</span>(&amp;now);</span><br><span class="line">    <span class="type">char</span> content[<span class="number">512</span>] = &#123; <span class="number">0</span> &#125;;</span><br><span class="line">    <span class="built_in">sprintf</span>(content, <span class="string">&quot;[%04d-%02d-%02d %02d:%02d:%02d][%s][0x%04x][%s:%d %s]%s\n&quot;</span>,</span><br><span class="line">                tmstr-&gt;tm_year + <span class="number">1900</span>,</span><br><span class="line">                tmstr-&gt;tm_mon + <span class="number">1</span>,</span><br><span class="line">                tmstr-&gt;tm_mday,</span><br><span class="line">                tmstr-&gt;tm_hour,</span><br><span class="line">                tmstr-&gt;tm_min,</span><br><span class="line">                tmstr-&gt;tm_sec,</span><br><span class="line">                pszLevel,</span><br><span class="line">                std::this_thread::<span class="built_in">get_id</span>(),</span><br><span class="line">                pszFile,</span><br><span class="line">                lineNo,</span><br><span class="line">                pszFuncSig,</span><br><span class="line">                msg);</span><br><span class="line"> </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function">std::lock_guard&lt;std::mutex&gt; <span class="title">guard</span><span class="params">(mutex_)</span></span>;</span><br><span class="line">        queue_.<span class="built_in">emplace_back</span>(content);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    cv_.<span class="built_in">notify_one</span>();</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Logger::threadfunc</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (fp_ == <span class="literal">NULL</span>)</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">while</span> (!exit_)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//å†™æ—¥å¿—</span></span><br><span class="line">        <span class="function">std::unique_lock&lt;std::mutex&gt; <span class="title">guard</span><span class="params">(mutex_)</span></span>;</span><br><span class="line">        <span class="keyword">while</span> (queue_.<span class="built_in">empty</span>())</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (exit_)</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line"> </span><br><span class="line">            cv_.<span class="built_in">wait</span>(guard);</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        <span class="comment">//å†™æ—¥å¿—</span></span><br><span class="line">        <span class="type">const</span> std::string&amp; str = queue_.<span class="built_in">front</span>();</span><br><span class="line"> </span><br><span class="line">        <span class="built_in">fwrite</span>((<span class="type">void</span>*)str.<span class="built_in">c_str</span>(), str.<span class="built_in">length</span>(), <span class="number">1</span>, fp_);</span><br><span class="line">        <span class="built_in">fflush</span>(fp_);</span><br><span class="line">        queue_.<span class="built_in">pop_front</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="é—®é¢˜æè¿°"><a href="#é—®é¢˜æè¿°" class="headerlink" title="é—®é¢˜æè¿°"></a>é—®é¢˜æè¿°</h4><ol><li><p>Stopæ–¹æ³•: è®¾ç½®exit_æ ‡å¿—ä¸ºtrueã€‚ é€šè¿‡æ¡ä»¶å˜é‡é€šçŸ¥æ—¥å¿—çº¿ç¨‹ã€‚ ç­‰å¾…æ—¥å¿—çº¿ç¨‹ç»“æŸ </p><p><strong>è¯·é—®è¿™é‡Œä¸ºä»€ä¹ˆéœ€è¦é€šçŸ¥æ—¥å¿—çº¿ç¨‹</strong></p><p>è§£ç­”ï¼šåœ¨<code>Logger</code>ç±»çš„å®ç°ä¸­ï¼Œæ—¥å¿—çº¿ç¨‹çš„å·¥ä½œæ˜¯ä»é˜Ÿåˆ—ä¸­è·å–æ—¥å¿—æ¶ˆæ¯å¹¶å°†å…¶å†™å…¥æ–‡ä»¶ã€‚ä¸ºäº†å®ç°è¿™ä¸ªåŠŸèƒ½ï¼Œå®ƒåœ¨é˜Ÿåˆ—ä¸ºç©ºæ—¶é€šè¿‡<code>cv_.wait(guard)</code>è¿›å…¥ä¼‘çœ çŠ¶æ€ï¼Œç­‰å¾…æ–°çš„æ—¥å¿—æ¶ˆæ¯çš„åˆ°æ¥ã€‚</p><p>å½“ä½ è°ƒç”¨<code>Stop</code>æ–¹æ³•æ—¶ï¼Œä½ å¸Œæœ›æ—¥å¿—çº¿ç¨‹èƒ½å¤Ÿå°½å¿«ç»“æŸã€‚ä½†æœ‰ä¸€ç§æƒ…å†µéœ€è¦è€ƒè™‘ï¼šå½“<code>Stop</code>è¢«è°ƒç”¨æ—¶ï¼Œé˜Ÿåˆ—å¯èƒ½ä»ç„¶æ˜¯ç©ºçš„ï¼Œè¿™æ„å‘³ç€æ—¥å¿—çº¿ç¨‹å¯èƒ½å¤„äº<code>cv_.wait(guard)</code>çš„ä¼‘çœ çŠ¶æ€ã€‚</p><p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå³ä½¿ä½ è®¾ç½®äº†<code>exit_</code>æ ‡å¿—ä¸º<code>true</code>ï¼Œæ—¥å¿—çº¿ç¨‹ä»ç„¶ä¸ä¼šé†’æ¥æ£€æŸ¥è¿™ä¸ªæ ‡å¿—ï¼Œå› ä¸ºå®ƒæ­£åœ¨ç­‰å¾…æ–°çš„æ—¥å¿—æ¶ˆæ¯åˆ°æ¥ã€‚</p><p>ä¸ºäº†ç¡®ä¿æ—¥å¿—çº¿ç¨‹èƒ½å¤Ÿé†’æ¥ã€æ£€æŸ¥<code>exit_</code>æ ‡å¿—å¹¶æ­£ç¡®åœ°é€€å‡ºï¼Œä½ éœ€è¦åœ¨<code>Stop</code>æ–¹æ³•ä¸­é€šè¿‡<code>cv_.notify_one()</code>é€šçŸ¥æ—¥å¿—çº¿ç¨‹ã€‚è¿™æ ·ï¼Œæ—¥å¿—çº¿ç¨‹å°†è¢«å”¤é†’ï¼Œç„¶åå®ƒå¯ä»¥æ£€æŸ¥<code>exit_</code>æ ‡å¿—ï¼Œå¹¶æ ¹æ®è¯¥æ ‡å¿—çš„å€¼å†³å®šæ˜¯å¦é€€å‡ºã€‚</p><p>æ€»ä¹‹ï¼Œé€šçŸ¥æ—¥å¿—çº¿ç¨‹æ˜¯ä¸ºäº†ç¡®ä¿å®ƒå¯ä»¥ä»<code>cv_.wait(guard)</code>ä¸­é†’æ¥ï¼Œç„¶åæ£€æŸ¥é€€å‡ºæ¡ä»¶å¹¶å®‰å…¨åœ°é€€å‡ºã€‚</p></li><li><p>è¿™ä¸ªç¨‹åºæ²¡æœ‰è®¾è®¡çº¿ç¨‹æ¥å°†æ–°çš„æ—¥å¿—ä¿¡æ¯åŠ å…¥é˜Ÿåˆ—å—</p><p>ä»æä¾›çš„ä»£ç æ¥çœ‹ï¼Œæ—¥å¿—ç³»ç»Ÿä¸­åªè®¾è®¡äº†ä¸€ä¸ªä¸“é—¨çš„æ—¥å¿—çº¿ç¨‹ï¼ˆåœ¨<code>Logger::Start()</code>æ–¹æ³•ä¸­å¯åŠ¨ï¼‰ï¼Œå…¶ä»»åŠ¡æ˜¯ä»é˜Ÿåˆ—ä¸­æå–æ—¥å¿—æ¶ˆæ¯å¹¶å°†å…¶å†™å…¥æ–‡ä»¶ã€‚æ­¤å¤–ï¼Œå¹¶æ²¡æœ‰ä¸ºæ·»åŠ æ–°æ—¥å¿—æ¶ˆæ¯åˆ°é˜Ÿåˆ—ä¸“é—¨è®¾è®¡çº¿ç¨‹ã€‚</p><p>å½“ä½ å¸Œæœ›å†™å…¥æ—¥å¿—æ—¶ï¼Œåªéœ€åœ¨ä½ çš„ä¸»ç¨‹åºæˆ–ä»»ä½•å…¶ä»–çº¿ç¨‹ä¸­è°ƒç”¨<code>LogInfo()</code>, <code>LogWarning()</code>, æˆ– <code>LogError()</code>è¿™æ ·çš„å®ã€‚è¿™äº›å®å†…éƒ¨ä¼šè°ƒç”¨<code>Logger::AddToQueue()</code>ï¼Œè¯¥æ–¹æ³•å°†æ—¥å¿—æ¶ˆæ¯æ ¼å¼åŒ–å¹¶åŠ å…¥åˆ°é˜Ÿåˆ—ä¸­ã€‚è¿™ç§è®¾è®¡çš„ä¼˜ç‚¹æ˜¯ç®€å•ä¸”é«˜æ•ˆï¼Œå› ä¸ºå®ƒå…è®¸å¤šä¸ªçº¿ç¨‹åœ¨è¿è¡Œæ—¶æ— ç¼åœ°å‘æ—¥å¿—ç³»ç»Ÿæ·»åŠ æ¶ˆæ¯ï¼Œè€Œæ— éœ€é¢å¤–çš„çº¿ç¨‹ã€‚</p><p>ä½†å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œ<code>Logger::AddToQueue()</code>ä½¿ç”¨äº†äº’æ–¥é”<code>mutex_</code>æ¥ä¿è¯å¤šä¸ªçº¿ç¨‹åŒæ—¶å‘é˜Ÿåˆ—æ·»åŠ æ¶ˆæ¯æ—¶çš„çº¿ç¨‹å®‰å…¨ã€‚è¿™æ„å‘³ç€ï¼Œå³ä½¿å¤šä¸ªçº¿ç¨‹åŒæ—¶è°ƒç”¨æ—¥å¿—å®ï¼Œ<code>Logger::AddToQueue()</code>ä¸­çš„ä»£ç ä»ç„¶æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚</p><p>æ€»çš„æ¥è¯´ï¼Œè¿™ä¸ªæ—¥å¿—ç³»ç»Ÿçš„è®¾è®¡è€ƒè™‘åˆ°äº†å¤šçº¿ç¨‹ç¯å¢ƒï¼Œå…è®¸å¤šä¸ªçº¿ç¨‹åŒæ—¶æ·»åŠ æ—¥å¿—æ¶ˆæ¯ï¼Œä½†å®ƒå¹¶æ²¡æœ‰ä¸“é—¨è®¾ç½®ä¸€ä¸ªçº¿ç¨‹æ¥å®Œæˆè¿™é¡¹ä»»åŠ¡ï¼Œè€Œæ˜¯å…è®¸ä¸»ç¨‹åºæˆ–å…¶ä»–ä»»ä½•çº¿ç¨‹æ¥ç›´æ¥è°ƒç”¨æ·»åŠ æ—¥å¿—çš„å®ã€‚</p><p>è‡ªå·±çš„è¯ï¼šä½ è‡ªå·±ç¨‹åºåœ¨è¿è¡Œçš„æ—¶å€™æ˜¯ä¸æ˜¯æœ‰å¤šä¸ªçº¿ç¨‹ï¼Œè¿™äº›çº¿ç¨‹å°±æ˜¯è´Ÿè´£å•¥æ—¶å€™è¦è°ƒç”¨<code>LogInfo()</code>, <code>LogWarning()</code>, æˆ– <code>LogError()</code>è¿™æ ·çš„å®ã€‚æ‰€ä»¥å½“ç„¶ä¸éœ€è¦é¢å¤–çš„çº¿ç¨‹æ¥æ“ä½œåŠ å…¥é˜Ÿåˆ—æ“ä½œï¼Œåªéœ€è¦ä¸€ä¸ªå¸¦é”å‡½æ•°å³å¯ã€‚</p></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;strong&gt;æœ¬ç¯‡æ–‡ç« ä¸»è¦å‚è€ƒå¦‚ä¸‹æ–‡ç« ï¼Œä¸»è¦æ˜¯å¯¹ä»£ç åšä¸€ä¸ªè¾ƒä¸ºè¯¦å°½çš„è§£é‡Š&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å‚è€ƒé“¾æ¥ï¼š&lt;a href=&quot;https://blog.csdn.net/qq_46495964/article/details/122952567&quot;&gt;https://</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>webServer</title>
    <link href="http://zcl0219.github.io/2023/08/23/webServer/"/>
    <id>http://zcl0219.github.io/2023/08/23/webServer/</id>
    <published>2023-08-23T13:08:31.000Z</published>
    <updated>2023-09-20T19:17:59.989Z</updated>
    
    <content type="html"><![CDATA[<p>ä»Šå¤©å¼€å§‹æ­£å¼è¡¥å……å®Œå–„<code>webServer</code>æœåŠ¡å™¨çš„å†…å®¹ï¼æƒ³åˆ°å“ªå†™åˆ°å“ªå§ï¼Œå›å¤´å†åšæ•´åˆã€‚</p><h3 id="æ ‡å‡†Cåº“IOå‡½æ•°"><a href="#æ ‡å‡†Cåº“IOå‡½æ•°" class="headerlink" title="æ ‡å‡†Cåº“IOå‡½æ•°"></a>æ ‡å‡†Cåº“IOå‡½æ•°</h3><p><img src="PNG1.png"></p><h4 id="é¡¹ç›®éš¾ç‚¹"><a href="#é¡¹ç›®éš¾ç‚¹" class="headerlink" title="é¡¹ç›®éš¾ç‚¹"></a>é¡¹ç›®éš¾ç‚¹</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">1ã€å¦‚ä½•å¤„ç†æ¥æ”¶åˆ°çš„HTTPè¯·æ±‚</span></span><br><span class="line"><span class="comment">2ã€å¦‚ä½•å¡«å†™HTTPå“åº”</span></span><br><span class="line"><span class="comment">3ã€å¦‚ä½•å»ºç«‹ç½‘ç»œè¿æ¥ä¼ è¾“æ•°æ®</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><h4 id="HTTPè¯·æ±‚å¤„ç†"><a href="#HTTPè¯·æ±‚å¤„ç†" class="headerlink" title="HTTPè¯·æ±‚å¤„ç†"></a>HTTPè¯·æ±‚å¤„ç†</h4><p>http_connå¤´æ–‡ä»¶</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">http_conn</span>&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">http_conn</span>() &#123;&#125;</span><br><span class="line">    ~<span class="built_in">http_conn</span>() &#123;&#125;</span><br><span class="line">    <span class="type">static</span> <span class="type">int</span> m_epollfd;</span><br><span class="line">    <span class="type">static</span> <span class="type">int</span> m_user_count;</span><br><span class="line">    </span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">init</span><span class="params">(<span class="type">int</span> sockfd, <span class="type">const</span> so0ckaddr_in &amp;addr)</span></span>;<span class="comment">// åˆå§‹åŒ–è¿æ¥</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">close_conn</span><span class="params">(<span class="type">bool</span> real_close = <span class="literal">true</span>)</span></span>;<span class="comment">// å…³é—­è¿æ¥ï¼Œå…³äºéœ€è¦ä¼ å…¥real_closeå‚æ•°çš„åŸå› ï¼Œåé¢ä¼šè®²åˆ°ï¼Œé¢„ç•™é—®é¢˜</span></span><br><span class="line">    </span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="type">int</span> m_sockfd;<span class="comment">// å‘èµ·httpè¯·æ±‚çš„sockfd</span></span><br><span class="line">    sockaddr_in m_address;<span class="comment">// å‘èµ·httpè¯·æ±‚çš„socketåœ°å€</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬åœ¨http_connç±»é‡Œä¸»è¦è®¾ç½®äº”ä¸ªå¯¹å¤–çš„æ¥å£ï¼š</p><ul><li><p>åˆå§‹åŒ–æ–°æ¥å—çš„è¿æ¥</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">init</span><span class="params">(<span class="type">int</span> sockfd, <span class="type">const</span> sockaddr_in &amp;addr)</span></span>;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">æˆ‘ä»¬ä¼šæŠŠæ‰€æœ‰äº‹ä»¶æ³¨å†Œåˆ°ä¸€å¼ å†…æ ¸äº‹ä»¶è¡¨ä¸Šï¼Œå› æ­¤å®šä¹‰ä¸€ä¸ªå†…æ ¸äº‹ä»¶å°±å¥½äº†ã€‚static int m_epollfd;</span></span><br><span class="line"><span class="comment">åŒæ—¶æˆ‘ä»¬ä¼šç»Ÿè®¡å½“å‰è¿æ¥æ•°ï¼ŒåŒæ ·æ˜¯ä½¿ç”¨ä¸€ä¸ªé™æ€å˜é‡ï¼Œæ‰€æœ‰å®ä¾‹å¯¹è±¡å…±äº«ã€‚static int m_user_count;</span></span><br><span class="line"><span class="comment">æ¯å»ºç«‹ä¸€ä¸ªæ–°è¿æ¥ï¼Œm_user_countå°±ä¼šåŠ 1ï¼›</span></span><br><span class="line"><span class="comment">å½“æˆ‘ä»¬å‘å†…æ ¸äº‹ä»¶è¡¨æ³¨å†Œä¸€ä¸ªäº‹ä»¶æ—¶ï¼Œæˆ‘ä»¬éœ€è¦è€ƒè™‘æˆ‘ä»¬æ‰€è¦ç›‘å¬çš„äº‹ä»¶ç±»å‹ï¼Œè¿™é‡Œæˆ‘ä»¬è€ƒè™‘ï¼š</span></span><br><span class="line"><span class="comment">è¯»äº‹ä»¶ï¼ˆEPOLLINï¼‰ã€è¾¹æ²¿è§¦å‘æ¨¡å¼ï¼ˆEPOLLETï¼‰ã€ä»¥åŠEPOLLRDHUPï¼ˆæ£€æµ‹TCPå¯¹ç«¯è¿æ¥çš„å…³é—­æˆ–è€…åŠå…³é—­çŠ¶æ€ï¼‰</span></span><br><span class="line"><span class="comment">ä¸ºäº†é…åˆETæ¨¡å¼å’Œå¤šçº¿ç¨‹ï¼Œæˆ‘ä»¬éœ€è¦åšä¸¤ä¸ªæ“ä½œï¼Œç¬¬ä¸€æ˜¯å°†æ‰€ç›‘å¬çš„æ–‡ä»¶æè¿°ç¬¦è®¾ç½®ä¸ºéé˜»å¡çš„ï¼Œç¬¬äºŒéœ€è¦è®¾ç½®ä¸ºEPOLLONESHOTç±»å‹</span></span><br><span class="line"><span class="comment">æ³¨æ„ï¼šæˆ‘ä»¬å¯¹m_epollfdå’Œm_user_countçš„åˆå§‹åŒ–åˆ†åˆ«ä¸º</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="type">int</span> m_epollfd = <span class="number">-1</span>;</span><br><span class="line"><span class="type">int</span> m_user_count = <span class="number">0</span>;</span><br></pre></td></tr></table></figure><p>è®¾ç½®éé˜»å¡å‡½æ•°</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä»£ç ç¤ºä¾‹ï¼šLinuxé«˜æ€§èƒ½æœåŠ¡å™¨ç¼–ç¨‹ p113</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">setnonblocking</span><span class="params">(<span class="type">int</span> sockfd)</span></span>&#123;</span><br><span class="line">    <span class="type">int</span> old_option = <span class="built_in">fcntl</span>(sockfd, F_GETFL);  <span class="comment">// è·å–æ–‡ä»¶æè¿°ç¬¦æ—§çš„çŠ¶æ€æ ‡å¿—</span></span><br><span class="line">    <span class="type">int</span> new_option = old_option | O_NONBLOCK;<span class="comment">// è®¾ç½®éé˜»å¡æ ‡å¿—</span></span><br><span class="line">    <span class="built_in">fcntl</span>(sockfd, F_SETFL, new_option);</span><br><span class="line">    <span class="keyword">return</span> old_option;<span class="comment">// è¿”å›æ–‡ä»¶æè¿°ç¬¦æ—§çš„çŠ¶æ€æ ‡å¿—ï¼Œä»¥ä¾¿æ—¥åæ¢å¤è¯¥çŠ¶æ€æ ‡å¿—</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è®¾ç½®æ„Ÿå…´è¶£äº‹ä»¶ç±»å‹</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æˆ‘ä»¬åœ¨å‘å†…æ ¸äº‹ä»¶è¡¨æ³¨å†Œæ–°äº‹ä»¶çš„æ—¶å€™ï¼Œéœ€è¦æŒ‡å®šè‡ªå·±å¯¹è¿™ä¸ªæ–‡ä»¶æè¿°ç¬¦ä¸Šå‘ç”Ÿçš„ä»€ä¹ˆäº‹ä»¶æ„Ÿå…´è¶£</span></span><br><span class="line"><span class="comment">// å¯è¯»ï¼Ÿå¯å†™ï¼Ÿ</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">addfd</span><span class="params">(<span class="type">int</span> epollfd, <span class="type">int</span> fd, <span class="type">bool</span> one_shot)</span></span>&#123;</span><br><span class="line">    epoll_event event;</span><br><span class="line">    event.data.fd = fd;</span><br><span class="line">    event.events = EPOLLIN | EPOLLET | EPOLLRDHUP;</span><br><span class="line">    <span class="keyword">if</span>(one_shot)&#123;</span><br><span class="line">        event.events |= EPOLLONESHOT;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">epoll_ctl</span>(epollfd, EPOLL_CTL_ADD, fd, &amp;event);</span><br><span class="line">    <span class="built_in">setnonblocking</span>(fd);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åˆå§‹åŒ–å‡½æ•°ä»£ç å®ç°</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">http_conn::init</span><span class="params">(<span class="type">int</span> sockfd, <span class="type">const</span> sockaddr_in &amp;addr)</span></span>&#123;</span><br><span class="line">m_sockfd = sockfd;</span><br><span class="line">    m_address = addr;</span><br><span class="line">    <span class="built_in">addfd</span>(m_epollfd, sockfd, <span class="literal">true</span>);</span><br><span class="line">    m_user_count++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>å…³é—­è¿æ¥</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">close_conn</span><span class="params">(<span class="type">bool</span> real_close)</span></span>;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">æˆ‘ä»¬å¯ä»¥æ€è€ƒä¸€ä¸‹æœ‰å…³å…³é—­è¿æ¥éœ€è¦æ¶‰åŠåˆ°å“ªäº›æ“ä½œã€‚</span></span><br><span class="line"><span class="comment">1ã€é¦–å…ˆï¼Œå¦‚æœä¸€ä¸ªè¿æ¥å…³é—­äº†ï¼Œæˆ‘ä»¬éœ€è¦å°†å…¶ä»å†…æ ¸äº‹ä»¶è¡¨ä¸Šç§»é™¤</span></span><br><span class="line"><span class="comment">2ã€å½“å‰è¿æ¥æ•°ç›®ä¹Ÿä¼šå‡ä¸€</span></span><br><span class="line"><span class="comment">è¿™é‡Œæˆ‘ä»¬å‡†å¤‡å…ˆå®ç°ä¸€ä¸ªä»å†…æ ¸äº‹ä»¶è¡¨ä¸Šç§»é™¤æ–‡ä»¶æè¿°ç¬¦çš„å‡½æ•°ï¼ˆvoid removefdï¼‰ï¼Œåœ¨å®ç°å…³é—­è¿æ¥</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><p>ç§»é™¤æ–‡ä»¶æè¿°ç¬¦</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">removefd</span><span class="params">(<span class="type">int</span> epollfd, <span class="type">int</span> fd)</span></span>&#123;</span><br><span class="line">    <span class="built_in">epoll_ctl</span>(epollfd, EPOLL_CTL_DEL, fd, <span class="number">0</span>);</span><br><span class="line">    <span class="built_in">close</span>(fd);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…³é—­è¿æ¥</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">http_conn::close_conn</span><span class="params">(<span class="type">bool</span> real_close)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(real_close &amp;&amp; m_sockfd != <span class="number">-1</span>)&#123;</span><br><span class="line">        <span class="built_in">removefd</span>(m_epollfd, m_sockfd);</span><br><span class="line">        m_sockfd = <span class="number">-1</span>;</span><br><span class="line">        m_user_count--;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>å¤„ç†å®¢æˆ·è¯·æ±‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">process</span><span class="params">()</span></span>;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">å…³äºå¦‚ä½•å¤„ç†å®¢æˆ·è¿æ¥è¯·æ±‚çš„é—®é¢˜ï¼Œæˆ‘ä»¬ä»æœ€åŸå§‹çš„åœ°æ–¹å‡ºå‘ã€‚</span></span><br><span class="line"><span class="comment">é¦–å…ˆï¼Œä½ äº†è§£ä¸€ä¸ªhttpè¯·æ±‚çš„åŸºæœ¬æ ¼å¼å—ï¼Ÿå› ä¸ºæˆ‘ä»¬åªæœ‰åœ¨äº†è§£httpè¯·æ±‚çš„é€šç”¨æ ¼å¼åæ‰çŸ¥é“å¦‚ä½•å¯¹å…¶è¿›è¡Œè§£æ</span></span><br><span class="line"><span class="comment">ä¸‹é¢ï¼Œæˆ‘å°†å±•ç¤ºä¸€ä¸ªæœ€åŸºæœ¬çš„GETè¯·æ±‚æ ¼å¼</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">GET /path/to/resource?param1=value1&amp;param2=value2 HTTP/1.1</span><br><span class="line">Host: www.example.com</span><br><span class="line">User-Agnet: Mozilla/5.0 (platform; rv:geckoversion) Gecko/geckotrail Firefox/firefoxversion</span><br><span class="line">Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8</span><br><span class="line">Accept-Language: en-US,en;q=0.5</span><br><span class="line">Accept-Encoding: gzip, deflate, br</span><br><span class="line">Connection: keep-alive</span><br><span class="line"><span class="comment"># å…³äºè¿™ä¸ªGETè¯·æ±‚çš„è¯¦ç»†è§£é‡Šæˆ‘æä¸€ä¸ªchatgptçš„è§£é‡Šåœ¨è¿™ï¼Œå¯ä»¥é˜…è¯»ä¸€ä¸‹</span></span><br><span class="line">ä¸‹é¢æ˜¯é€è¡Œè¯¦ç»†è§£é‡Šï¼š</span><br><span class="line">1. `GET /path/to/resource?param1=value1&amp;param2=value2 HTTP/1.1`</span><br><span class="line">   - `GET`: è¿™æ˜¯HTTPè¯·æ±‚çš„æ–¹æ³•ã€‚`GET` æ–¹æ³•ç”¨äºè¯·æ±‚æŒ‡å®šçš„èµ„æºã€‚ä¸POSTç›¸æ¯”ï¼ŒGETè¯·æ±‚æ˜¯åªè¯»çš„ï¼Œå¹¶ä¸”ç”¨äºè·å–æ•°æ®è€Œä¸æ˜¯å‘é€æ•°æ®ã€‚</span><br><span class="line">   - `/path/to/resource`: è¿™æ˜¯è¯·æ±‚çš„èµ„æºè·¯å¾„ï¼Œé€šå¸¸æ˜¯æ–‡ä»¶æˆ–è€…å…¶ä»–èµ„æºçš„ä½ç½®ã€‚</span><br><span class="line">   - `?`: è¿™ä¸ªç¬¦å·è¡¨ç¤ºURLçš„æŸ¥è¯¢éƒ¨åˆ†çš„å¼€å§‹ã€‚</span><br><span class="line">   - `param1=value1&amp;param2=value2`: è¿™æ˜¯æŸ¥è¯¢å­—ç¬¦ä¸²ã€‚åœ¨æ­¤ä¾‹ä¸­ï¼Œæœ‰ä¸¤ä¸ªå‚æ•°ï¼Œ`param1`å’Œ`param2`ï¼Œå®ƒä»¬çš„å€¼åˆ†åˆ«æ˜¯`value1`å’Œ`value2`ã€‚`&amp;`ç¬¦å·ç”¨äºåˆ†éš”æŸ¥è¯¢å‚æ•°ã€‚</span><br><span class="line">   - `HTTP/1.1`: è¡¨ç¤ºä½¿ç”¨çš„HTTPç‰ˆæœ¬ï¼Œè¿™é‡Œæ˜¯1.1ã€‚</span><br><span class="line"></span><br><span class="line">2. `Host: www.example.com`</span><br><span class="line">   - `Host`: è¿™æ˜¯HTTPå¤´çš„åç§°ã€‚å®ƒæŒ‡å®šäº†è¯·æ±‚çš„ç›®æ ‡ä¸»æœºå’ŒåŸŸåã€‚</span><br><span class="line">   - `www.example.com`: è¯·æ±‚çš„ç›®æ ‡åŸŸåã€‚</span><br><span class="line"></span><br><span class="line">3. `User-Agent: Mozilla/5.0 (platform; rv:geckoversion) Gecko/geckotrail Firefox/firefoxversion`</span><br><span class="line">   - `User-Agent`: è¿™æ˜¯HTTPå¤´çš„åç§°ã€‚å®ƒæè¿°äº†å‘å‡ºè¯·æ±‚çš„ç”¨æˆ·ä»£ç†çš„ç±»å‹ï¼Œé€šå¸¸æ˜¯æµè§ˆå™¨ã€‚</span><br><span class="line">   - `Mozilla/5.0`: è¿™æ˜¯ç”¨æˆ·ä»£ç†çš„ä¸€èˆ¬æ ‡è®°ã€‚è™½ç„¶åä¸ºMozillaï¼Œä½†å®ƒå¹¶ä¸ä»…ä»…ä»£è¡¨Mozillaæµè§ˆå™¨ï¼Œå¤§å¤šæ•°æµè§ˆå™¨éƒ½ä¼šä»¥è¿™ç§æ–¹å¼æ ‡è¯†ã€‚</span><br><span class="line">   - `(platform; rv:geckoversion)`: è¿™éƒ¨åˆ†æä¾›äº†å…³äºç”¨æˆ·ä»£ç†çš„è¯¦ç»†ä¿¡æ¯ï¼Œä¾‹å¦‚å®ƒåœ¨å“ªä¸ªå¹³å°ä¸Šè¿è¡Œã€‚</span><br><span class="line">   - `Gecko/geckotrail`: è¿™æ˜¯Geckoæ¸²æŸ“å¼•æ“çš„æ ‡è¯†åŠå…¶ç‰ˆæœ¬ã€‚</span><br><span class="line">   - `Firefox/firefoxversion`: è¡¨ç¤ºç”¨æˆ·ä»£ç†æ˜¯Firefoxæµè§ˆå™¨ï¼Œåé¢è·Ÿç€å…¶ç‰ˆæœ¬ã€‚</span><br><span class="line"></span><br><span class="line">4. `Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8`</span><br><span class="line">   - `Accept`: HTTPå¤´åç§°ï¼Œè¡¨ç¤ºå®¢æˆ·ç«¯å¯ä»¥å¤„ç†çš„å†…å®¹ç±»å‹ã€‚</span><br><span class="line">   - è¯¥å¤´çš„å€¼åˆ—å‡ºäº†æµè§ˆå™¨æ¥å—çš„MIMEç±»å‹ï¼ŒæŒ‰ç…§ä¼˜å…ˆçº§æ’åºã€‚ä¾‹å¦‚ï¼Œ`text/html` è¡¨ç¤ºHTMLæ–‡æ¡£ï¼Œè€Œ`q=0.9`è¡¨ç¤ºç›¸å¯¹ä¼˜å…ˆçº§ã€‚</span><br><span class="line"></span><br><span class="line">5. `Accept-Language: en-US,en;q=0.5`</span><br><span class="line">   - `Accept-Language`: HTTPå¤´åç§°ï¼Œè¡¨ç¤ºç”¨æˆ·ä»£ç†åå¥½çš„è‡ªç„¶è¯­è¨€ã€‚</span><br><span class="line">   - `en-US,en`: è¿™æŒ‡ç¤ºç”¨æˆ·ä»£ç†é¦–å…ˆå¸Œæœ›æ¥æ”¶ç¾å›½è‹±è¯­çš„å†…å®¹ï¼Œå…¶æ¬¡æ˜¯è‹±è¯­ã€‚</span><br><span class="line"></span><br><span class="line">6. `Accept-Encoding: gzip, deflate, br`</span><br><span class="line">   - `Accept-Encoding`: HTTPå¤´åç§°ï¼Œè¡¨ç¤ºç”¨æˆ·ä»£ç†å¯ä»¥æ¥å—çš„å†…å®¹ç¼–ç ã€‚</span><br><span class="line">   - `gzip, deflate, br`: è¿™äº›æ˜¯å¯ä»¥æ¥å—çš„ç¼–ç æ–¹æ³•ï¼Œç”¨äºå†…å®¹å‹ç¼©ã€‚</span><br><span class="line"></span><br><span class="line">7. `Connection: keep-alive`</span><br><span class="line">   - `Connection`: HTTPå¤´åç§°ï¼Œè¡¨ç¤ºæ˜¯å¦æŒç»­è¿æ¥ã€‚</span><br><span class="line">   - `keep-alive`: è¡¨ç¤ºæµè§ˆå™¨å¸Œæœ›æœåŠ¡å™¨ä¿æŒè¿æ¥ï¼Œä»¥ä¾¿äºåç»­çš„è¯·æ±‚å¯ä»¥å¤ç”¨ç›¸åŒçš„TCPè¿æ¥ã€‚</span><br><span class="line"></span><br><span class="line">è¿™ä¸ªè¯·æ±‚å¤§ä½“ä¸Šæ˜¯ä¸€ä¸ªå…¸å‹çš„HTTP GETè¯·æ±‚ï¼Œç”±HTTPæ–¹æ³•ã€èµ„æºè·¯å¾„ã€HTTPç‰ˆæœ¬ã€å¤šä¸ªå¤´å­—æ®µç»„æˆã€‚æ¯ä¸ªå¤´å­—æ®µéƒ½æœ‰å…¶ç‰¹å®šçš„è¯­ä¹‰å’Œç›®çš„ã€‚</span><br></pre></td></tr></table></figure><p>ç°åœ¨æˆ‘ä»¬çŸ¥é“äº†HTTPè¯·æ±‚æ ¼å¼äº†ï¼Œé‚£ä¹ˆåˆ°åº•å¦‚ä½•è§£æå®ƒå‘¢ï¼Ÿè¿™é‡Œå°±è¦å¼•å…¥ä¸€ç§å«åšâ€œæœ‰é™çŠ¶æ€æœºâ€çš„æ–¹æ³•äº†ï¼Œæœ‰å…³è¿™ä¸ªæ–¹æ³•çš„å…·ä½“æè¿°ä¸å®ç°ï¼Œå¤§å®¶å¯ä»¥çœ‹æˆ‘çš„å¦ä¸€ç¯‡æ–‡ç« ã€‚</p></li><li><p>éé˜»å¡è¯»æ“ä½œ</p></li><li><p>éé˜»å¡å†™æ“ä½œ</p></li></ul><p><strong>ç¬¬ä¸€ä¸ªçŸ¥è¯†ç‚¹ï¼š<code>iovec</code></strong></p><p>è¿™é‡Œå…ˆä»‹ç»ä¸€ä¸ª<code>iovec</code>ç»“æ„ä½“ï¼Œå› ä¸ºæˆ‘ä»¬åœ¨å†™HTTPå“åº”çš„æ—¶å€™éœ€è¦ç”¨åˆ°ã€‚</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sys/uio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">iovec</span>&#123;</span></span><br><span class="line">  <span class="type">ptr_t</span> iov_base;</span><br><span class="line">  <span class="type">size_t</span> iov_len;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// struct iovecç»“æ„ä½“ï¼ŒæŒ‡é’ˆæˆå‘˜iov_baseæŒ‡å‘ä¸€ä¸ªç¼“å†²åŒºï¼Œè¿™ä¸ªç¼“å†²åŒºæ˜¯å­˜æ”¾read_væ‰€æ¥æ”¶çš„æ•°æ®æˆ–è€…write_vå°†è¦å‘é€çš„æ•°æ®ã€‚æˆå‘˜iov_lenåœ¨å„ç§æƒ…å†µä¸‹åˆ†åˆ«ç¡®å®šäº†æ¥æ”¶çš„æœ€å¤§é•¿åº¦å’Œå®é™…å†™å…¥çš„é•¿åº¦ã€‚</span></span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">readv</span><span class="params">(<span class="type">int</span> fd, <span class="type">const</span> <span class="keyword">struct</span> iovec *<span class="built_in">vector</span>, <span class="type">int</span> count)</span>;</span><br><span class="line"><span class="type">int</span> <span class="title function_">writev</span><span class="params">(<span class="type">int</span> fd, <span class="type">const</span> <span class="keyword">struct</span> iovec *<span class="built_in">vector</span>, <span class="type">int</span> count)</span>;</span><br></pre></td></tr></table></figure><p>ä¸‹é¢ç»™å‡ºä¸€ä¸ªåº”ç”¨å®ä¾‹</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sys/uio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">static</span> <span class="type">char</span> part1[] = <span class="string">&quot;This is from writev&quot;</span>;</span><br><span class="line">    <span class="type">static</span> <span class="type">int</span> part2 = <span class="number">65</span>;</span><br><span class="line">    <span class="type">static</span> <span class="type">char</span> part3[] = <span class="string">&quot;[&quot;</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">iovec</span> <span class="title">iov</span>[3];</span></span><br><span class="line">    </span><br><span class="line">    iov[<span class="number">0</span>].iov_base = part3;</span><br><span class="line">    iov[<span class="number">0</span>].iov_len = <span class="built_in">strlen</span>(part3);</span><br><span class="line">    </span><br><span class="line">    iov[<span class="number">1</span>].iov_base = part1;</span><br><span class="line">    iov[<span class="number">1</span>].iov_len = <span class="built_in">strlen</span>(part1);</span><br><span class="line">    </span><br><span class="line">    iov[<span class="number">2</span>].iov_base = &amp;part2;</span><br><span class="line">    iov[<span class="number">2</span>].iov_len = <span class="keyword">sizeof</span>(<span class="type">int</span>);</span><br><span class="line">    </span><br><span class="line">    writev(<span class="number">1</span>, iov, <span class="number">3</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ç¬¬äºŒä¸ªçŸ¥è¯†ç‚¹ï¼š<code>va_list</code>, <code>vsnprintf</code></strong></p><p>å‚è€ƒé“¾æ¥ï¼š<a href="https://blog.csdn.net/dengzhilong_cpp/article/details/54944676">https://blog.csdn.net/dengzhilong_cpp/article/details/54944676</a></p><p>å‚è€ƒé“¾æ¥ï¼š<a href="https://blog.csdn.net/luliplus/article/details/124123219">https://blog.csdn.net/luliplus/article/details/124123219</a></p><p>ä»¥ä¸Šæ˜¯ä»Šå¤©è¦å†™ä»£ç çš„åŸºç¡€çŸ¥è¯†ï¼Œä¸‹é¢å¼€å§‹æ­£å¼ä»£ç </p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*å†™HTTPå“åº”*/</span></span><br><span class="line"><span class="type">bool</span> <span class="title function_">http_conn::write</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">int</span> temp = <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> bytes_have_send = <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> bytes_to_send = m_write_idx;</span><br><span class="line">    <span class="keyword">if</span>(bytes_to_send == <span class="number">0</span>)&#123;</span><br><span class="line">        modfd(m_epollfd, m_sockfd, EPOLLIN);</span><br><span class="line">        init();</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(<span class="number">1</span>)&#123;</span><br><span class="line">        temp = writev(m_sockfd, m_iv, m_iv_count);</span><br><span class="line">        <span class="keyword">if</span>(temp &lt;= <span class="number">-1</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>(errno == EAGAIN)&#123;</span><br><span class="line">                modfd(m_epollfd, m_sockfd, EPOLLIN);</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            unmap();</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        bytes_to_send -= temp;</span><br><span class="line">        bytes_have_send += temp;</span><br><span class="line">        <span class="keyword">if</span>(bytes_to_send &lt;= bytes_have_send)&#123;</span><br><span class="line">            unmap();</span><br><span class="line">            <span class="keyword">if</span>(m_linger)&#123;</span><br><span class="line">                init();</span><br><span class="line">                modfd(m_epollfd, m_sockfd, EPOLLIN);</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                modfd(m_epollfd, m_sockfd, EPOLLIN);</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>â€‹                                                                                                                                                           </p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ä»Šå¤©å¼€å§‹æ­£å¼è¡¥å……å®Œå–„&lt;code&gt;webServer&lt;/code&gt;æœåŠ¡å™¨çš„å†…å®¹ï¼æƒ³åˆ°å“ªå†™åˆ°å“ªå§ï¼Œå›å¤´å†åšæ•´åˆã€‚&lt;/p&gt;
&lt;h3 id=&quot;æ ‡å‡†Cåº“IOå‡½æ•°&quot;&gt;&lt;a href=&quot;#æ ‡å‡†Cåº“IOå‡½æ•°&quot; class=&quot;headerlink&quot; title=&quot;æ ‡å‡†Cåº“IOå‡½æ•°&quot;&gt;&lt;/a&gt;</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>ä¸­ç¼€è¡¨è¾¾å¼è½¬åç¼€è¡¨è¾¾å¼</title>
    <link href="http://zcl0219.github.io/2023/08/23/%E4%B8%AD%E7%BC%80%E8%A1%A8%E8%BE%BE%E5%BC%8F%E8%BD%AC%E5%90%8E%E7%BC%80%E8%A1%A8%E8%BE%BE%E5%BC%8F/"/>
    <id>http://zcl0219.github.io/2023/08/23/%E4%B8%AD%E7%BC%80%E8%A1%A8%E8%BE%BE%E5%BC%8F%E8%BD%AC%E5%90%8E%E7%BC%80%E8%A1%A8%E8%BE%BE%E5%BC%8F/</id>
    <published>2023-08-23T09:16:28.000Z</published>
    <updated>2023-10-07T10:31:14.909Z</updated>
    
    <content type="html"><![CDATA[<p>é¢è¯•æ—¶è¢«é—®åˆ°äº†å…³äºå¦‚ä½•å°†ä¸­ç¼€è¡¨è¾¾å¼è½¬æ¢ä¸ºåç¼€è¡¨è¾¾å¼ï¼Œè¿™é‡Œæ€»ç»“ä¸€ä¸‹è½¬æ¢çš„æ­¥éª¤</p><ol><li>é‡åˆ°æ“ä½œæ•°ï¼Œç›´æ¥è¾“å‡º</li><li>æ ˆä¸ºç©ºæ—¶ï¼Œé‡åˆ°è¿ç®—ç¬¦ï¼Œå…¥æ ˆ</li><li>é‡åˆ°å·¦æ‹¬å·ï¼Œå°†å…¶å…¥æ ˆ</li><li>é‡åˆ°å³æ‹¬å·ï¼Œæ‰§è¡Œå‡ºæ ˆæ“ä½œï¼Œå¹¶å°†å‡ºæ ˆçš„å…ƒç´ è¾“å‡ºï¼Œç›´åˆ°å¼¹å‡ºæ ˆçš„æ˜¯å·¦æ‹¬å·ï¼Œå·¦æ‹¬å·ä¸è¾“å‡º</li><li>é‡åˆ°å…¶ä»–è¿ç®—ç¬¦â€œ+â€ï¼Œâ€œ-â€ï¼Œâ€œ*â€ï¼Œâ€œ&#x2F;â€æ—¶ï¼Œå¼¹å‡ºæ‰€æœ‰ä¼˜å…ˆçº§å¤§äºæˆ–ç­‰äºè¯¥è¿ç®—ç¬¦çš„æ ˆé¡¶å…ƒç´ ï¼Œç„¶åå°†è¯¥è¿ç®—ç¬¦å…¥æ ˆ</li><li>æœ€ç»ˆå°†æ ˆä¸­çš„å…ƒç´ ä¾æ¬¡å‡ºæ ˆï¼Œè¾“å‡º</li></ol><p><img src="1.png"></p><p>ï¼ˆå•Šï¼å…ˆå†™åˆ°è¿™å§ï¼Œä¸ºäº†å¼„ä¸ªå›¾ç‰‡å¼„äº†å¥½ä¹…ï¼‰</p><p>å‚è€ƒé“¾æ¥ï¼š<a href="https://blog.csdn.net/y_16041527/article/details/79684188">https://blog.csdn.net/y_16041527/article/details/79684188</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;é¢è¯•æ—¶è¢«é—®åˆ°äº†å…³äºå¦‚ä½•å°†ä¸­ç¼€è¡¨è¾¾å¼è½¬æ¢ä¸ºåç¼€è¡¨è¾¾å¼ï¼Œè¿™é‡Œæ€»ç»“ä¸€ä¸‹è½¬æ¢çš„æ­¥éª¤&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;é‡åˆ°æ“ä½œæ•°ï¼Œç›´æ¥è¾“å‡º&lt;/li&gt;
&lt;li&gt;æ ˆä¸ºç©ºæ—¶ï¼Œé‡åˆ°è¿ç®—ç¬¦ï¼Œå…¥æ ˆ&lt;/li&gt;
&lt;li&gt;é‡åˆ°å·¦æ‹¬å·ï¼Œå°†å…¶å…¥æ ˆ&lt;/li&gt;
&lt;li&gt;é‡åˆ°å³æ‹¬å·ï¼Œæ‰§è¡Œå‡ºæ ˆæ“ä½œï¼Œå¹¶å°†å‡ºæ ˆçš„å…ƒç´ è¾“å‡ºï¼Œ</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>æ™ºèƒ½æŒ‡é’ˆshared_ptrçš„å®ç°</title>
    <link href="http://zcl0219.github.io/2023/07/26/shared-ptr/"/>
    <id>http://zcl0219.github.io/2023/07/26/shared-ptr/</id>
    <published>2023-07-26T01:12:27.000Z</published>
    <updated>2023-08-10T15:29:15.120Z</updated>
    
    <content type="html"><![CDATA[<p>æˆ‘ä»¬ä»Šå¤©æ¥å®ç°ä¸€ä¸ªç®€æ˜“ç‰ˆçš„æ™ºèƒ½æŒ‡é’ˆå§ï¼æ‹–äº†å¥½ä¹…å•¦ï¼Œä»¥åä¼šæŠŠvectorã€stringçš„ç®€æ˜“ç‰ˆä¹Ÿç»™è¡¥ä¸Šï¼Œ<code>gigigi</code></p><p>æˆ‘ä»¬å¯ä»¥å…ˆæƒ³æƒ³<code>shared_ptr</code>æœ€å¤§çš„ç‰¹ç‚¹ï¼Œå°±æ˜¯å½“ä»–çš„å¼•ç”¨è®¡æ•°ä¸º0æ—¶ï¼Œä¾¿ä¼šè‡ªåŠ¨é‡Šæ”¾æ‰€æŒ‡å¯¹è±¡å’Œææ„ã€‚æ‰€ä»¥ä¸€ä¸ªå…³é”®ç‚¹å°±æ˜¯è¿™ä¸ªå¼•ç”¨è®¡æ•°æ€ä¹ˆè®¾ç½®ï¼Ÿstaticï¼Ÿä¸å¯ä»¥ï¼staticå˜é‡åŒå±äºä¸€ä¸ªç±»çš„æ‰€æœ‰å¯¹è±¡ï¼Œè¿™æ ·å°±ä¼šå¯¼è‡´ä¸ç®¡æŒ‡çš„æ˜¯ä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œå¼•ç”¨è®¡æ•°éƒ½ç›¸åŒã€‚æ‰€ä»¥æˆ‘ä»¬è¿™é‡Œå†³å®šé‡‡ç”¨ä¸€ä¸ªæŒ‡é’ˆæ¥è¿›è¡Œå¼•ç”¨è®¡æ•°ã€‚å…·ä½“å®ç°å¦‚ä¸‹ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;mutex&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">shared_ptr</span>&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">explicit</span> <span class="title">shared_ptr</span><span class="params">(T* sPtr = <span class="literal">nullptr</span>)</span>: sPtr_(sPtr)&#123;</span></span><br><span class="line">        <span class="keyword">if</span>(sPtr_)&#123;</span><br><span class="line">            useCount_ = <span class="keyword">new</span> <span class="built_in">int</span>(<span class="number">1</span>);</span><br><span class="line">            sMutex_ = <span class="keyword">new</span> std::mutex;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ~<span class="built_in">shared_ptr</span>()&#123;</span><br><span class="line">        <span class="built_in">release</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">shared_ptr</span>(<span class="type">const</span> shared_ptr&lt;T&gt;&amp; sp)&#123;</span><br><span class="line">        useCount_ = sp.useCount_;</span><br><span class="line">        sPtr_ = sp.sPtr_;</span><br><span class="line">        sMutex_ = sp.sMutex_;</span><br><span class="line">        <span class="built_in">addUsecount</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    shared_ptr&lt;T&gt;&amp; <span class="keyword">operator</span>=(<span class="type">const</span> shared_ptr&lt;T&gt;&amp; sp)&#123;</span><br><span class="line">        <span class="keyword">if</span>(sPtr_ != sp.sPtr_)&#123;</span><br><span class="line">            <span class="built_in">release</span>();</span><br><span class="line">            sPtr_ = sp.sPtr_;</span><br><span class="line">            useCount_ = sp.useCount_;</span><br><span class="line">            sMutex_ = sp.sMutex_;</span><br><span class="line">            <span class="built_in">addUsecount</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    T&amp; <span class="keyword">operator</span>*()&#123;</span><br><span class="line">        <span class="keyword">return</span> *sPtr_;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    T* <span class="keyword">operator</span>-&gt;()&#123;</span><br><span class="line">        <span class="keyword">return</span> sPtr_;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">useCount</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> *useCount_;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">T* <span class="title">get</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> sPtr_;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">addUsecount</span><span class="params">()</span></span>&#123;</span><br><span class="line">        sMutex_-&gt;<span class="built_in">lock</span>();</span><br><span class="line">        ++(*useCount_);</span><br><span class="line">        sMutex_-&gt;<span class="built_in">unlock</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">release</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="type">bool</span> deleteFlag = <span class="literal">false</span>;</span><br><span class="line">        sMutex_-&gt;<span class="built_in">lock</span>();</span><br><span class="line">        <span class="keyword">if</span>(--(*useCount_) == <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">delete</span> useCount_;</span><br><span class="line">            <span class="keyword">delete</span> sPtr_;</span><br><span class="line">            deleteFlag = <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        sMutex_-&gt;<span class="built_in">unlock</span>();</span><br><span class="line">        <span class="keyword">if</span>(deleteFlag)&#123;</span><br><span class="line">            <span class="keyword">delete</span> sMutex_;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="type">int</span>* useCount_;</span><br><span class="line">    T* sPtr_;</span><br><span class="line">    std::mutex* sMutex_;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="function">shared_ptr&lt;std::string&gt; <span class="title">p1</span><span class="params">(<span class="keyword">new</span> std::string(<span class="string">&quot;hello&quot;</span>))</span></span>;</span><br><span class="line">    shared_ptr&lt;std::string&gt; p2 = p1;</span><br><span class="line">    <span class="comment">//std::cout &lt;&lt; p2.useCount() &lt;&lt; std::endl;</span></span><br><span class="line">    <span class="function">shared_ptr&lt;std::string&gt; <span class="title">p3</span><span class="params">(p2)</span></span>;</span><br><span class="line">    std::cout &lt;&lt; p3.<span class="built_in">useCount</span>() &lt;&lt; std::endl;</span><br><span class="line">    std::cout &lt;&lt; p2.<span class="built_in">useCount</span>() &lt;&lt; std::endl;</span><br><span class="line">    p2 = p3;</span><br><span class="line">    std::cout &lt;&lt; p3.<span class="built_in">useCount</span>() &lt;&lt; std::endl;</span><br><span class="line">    std::cout &lt;&lt; p2.<span class="built_in">useCount</span>() &lt;&lt; std::endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ’å…¥ç»“æœå›¾ç‰‡æœ‰ç‚¹é—®é¢˜ï¼Œæœ€è¿‘æ²¡æ—¶é—´å¼„ï¼Œå„ä½è‡ªå·±è·‘ä¸€ä¸‹éªŒè¯ä¸€ä¸‹ï¼Œæœ‰é”™è¯¯è®°å¾—è¯´ï¼ï¼ï¼</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;æˆ‘ä»¬ä»Šå¤©æ¥å®ç°ä¸€ä¸ªç®€æ˜“ç‰ˆçš„æ™ºèƒ½æŒ‡é’ˆå§ï¼æ‹–äº†å¥½ä¹…å•¦ï¼Œä»¥åä¼šæŠŠvectorã€stringçš„ç®€æ˜“ç‰ˆä¹Ÿç»™è¡¥ä¸Šï¼Œ&lt;code&gt;gigigi&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬å¯ä»¥å…ˆæƒ³æƒ³&lt;code&gt;shared_ptr&lt;/code&gt;æœ€å¤§çš„ç‰¹ç‚¹ï¼Œå°±æ˜¯å½“ä»–çš„å¼•ç”¨è®¡æ•°ä¸º0æ—¶ï¼Œä¾¿ä¼šè‡ªåŠ¨é‡Šæ”¾æ‰€æŒ‡å¯¹è±¡</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>Cppé«˜é¢‘é¢ç»</title>
    <link href="http://zcl0219.github.io/2023/06/29/Cpp%E9%AB%98%E9%A2%91%E9%9D%A2%E7%BB%8F/"/>
    <id>http://zcl0219.github.io/2023/06/29/Cpp%E9%AB%98%E9%A2%91%E9%9D%A2%E7%BB%8F/</id>
    <published>2023-06-28T19:50:53.000Z</published>
    <updated>2023-10-09T08:26:33.676Z</updated>
    
    <content type="html"><![CDATA[<h4 id="newå’Œmallocçš„åŒºåˆ«"><a href="#newå’Œmallocçš„åŒºåˆ«" class="headerlink" title="newå’Œmallocçš„åŒºåˆ«"></a>newå’Œmallocçš„åŒºåˆ«</h4><ul><li><p>å±æ€§çš„åŒºåˆ«</p><p>new&#x2F;deleteï¼šè¿™ä¸¤ä¸ªæ˜¯C++ä¸­çš„å…³é”®å­—ï¼›</p><p>malloc&#x2F;freeï¼šè¿™ä¸¤ä¸ªæ˜¯åº“å‡½æ•°ï¼›</p></li><li><p>ä½¿ç”¨ä¸Šçš„åŒºåˆ«</p><p>mallocï¼šç”³è¯·ç©ºé—´éœ€è¦æ˜¾å¼å¡«å…¥ç”³è¯·å†…å­˜çš„å¤§å°ï¼›</p><p>newï¼šæ— éœ€æ˜¾å¼å¡«å…¥ç”³è¯·å†…å­˜çš„å¤§å°ï¼Œnewä¼šæ ¹æ®newçš„ç±»å‹åˆ†é…å†…å­˜ï¼›</p></li><li><p>è¿”å›ç±»å‹çš„åŒºåˆ«</p><p>newæ“ä½œç¬¦å†…å­˜åˆ†é…æˆåŠŸï¼Œè¿”å›çš„æ˜¯å¯¹è±¡ç±»å‹çš„æŒ‡é’ˆï¼Œç±»å‹ä¸¥æ ¼ä¸å¯¹è±¡åŒ¹é…ï¼Œæ— éœ€è¿›è¡Œç±»å‹è½¬æ¢ï¼Œæ•…newæ˜¯ç¬¦åˆç±»å‹å®‰å…¨æ€§çš„æ“ä½œç¬¦ã€‚</p><p>mallocå†…å­˜åˆ†é…æˆåŠŸè¿”å›çš„æ˜¯void*æŒ‡é’ˆï¼Œéœ€è¦é€šè¿‡å¼ºåˆ¶ç±»å‹è½¬æ¢ï¼Œè½¬æ¢æˆæˆ‘ä»¬éœ€è¦çš„ç±»å‹ã€‚</p><p>æ‰€ä»¥C++ä¸­newæ¯”mallocå®‰å…¨å¯é ã€‚</p></li><li><p>åˆ†é…å¤±è´¥çš„åŒºåˆ«</p><p>mallocåˆ†é…å¤±è´¥ä¼šè¿”å›NULLï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡åˆ¤æ–­è¿”å›å€¼æ˜¯å¦æ˜¯NULLå¾—çŸ¥æ˜¯å¦åˆ†é…æˆåŠŸã€‚</p><p>newåˆ†é…å¤±è´¥ä¼šæŠ›å‡ºbad_allocå¼‚å¸¸ã€‚</p></li><li><p>æ‰©å¼ å†…å­˜çš„åŒºåˆ«</p><p>mallocæœ‰å†…å­˜æ‰©å¼ æœºåˆ¶ï¼ˆé€šè¿‡reallocå®ç°ï¼‰ã€‚</p><p>newæ²¡æœ‰æ‰©å¼ å†…å­˜æœºåˆ¶ã€‚</p></li></ul><p><a href="https://zhuanlan.zhihu.com/p/338489910">https://zhuanlan.zhihu.com/p/338489910</a></p><h4 id="å¦‚ä½•é¿å…å†…å­˜æ³„æ¼"><a href="#å¦‚ä½•é¿å…å†…å­˜æ³„æ¼" class="headerlink" title="å¦‚ä½•é¿å…å†…å­˜æ³„æ¼"></a>å¦‚ä½•é¿å…å†…å­˜æ³„æ¼</h4><ul><li>æ˜ç¡®åŠ¨æ€å†…å­˜ä½¿ç”¨èŒƒå›´ï¼šåœ¨ç¨‹åºä¸­ä½¿ç”¨åŠ¨æ€å†…å­˜æ—¶ï¼Œéœ€è¦æ˜ç¡®è¯¥å†…å­˜çš„ä½¿ç”¨èŒƒå›´ï¼Œç¡®ä¿åœ¨ä¸éœ€è¦ä½¿ç”¨è¯¥å†…å­˜æ—¶èƒ½å¤ŸåŠæ—¶é‡Šæ”¾å†…å­˜ã€‚</li><li>ä½¿ç”¨RAIIæŠ€æœ¯ï¼šRAIIï¼ˆResource Acquisition Is Initializationï¼‰æ˜¯C++ä¸­ä¸€ç§å¸¸ç”¨çš„èµ„æºç®¡ç†æŠ€æœ¯ï¼Œå®ƒåˆ©ç”¨äº†C++å¯¹è±¡çš„æ„é€ å‡½æ•°å’Œææ„å‡½æ•°è‡ªåŠ¨è°ƒç”¨çš„ç‰¹æ€§ï¼Œåœ¨å¯¹è±¡çš„æ„é€ å‡½æ•°ä¸­ç”³è¯·èµ„æºï¼Œåœ¨å¯¹è±¡çš„ææ„å‡½æ•°ä¸­é‡Šæ”¾èµ„æºï¼Œä»è€Œé¿å…èµ„æºæ³„æ¼é—®é¢˜ã€‚</li><li>ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆï¼šæ™ºèƒ½æŒ‡é’ˆå¯ä»¥è‡ªåŠ¨ç®¡ç†åŠ¨æ€å†…å­˜çš„åˆ†é…å’Œé‡Šæ”¾ã€‚</li></ul><h4 id="çº¿ç¨‹æ± çš„æ•°é‡ä¸€èˆ¬æ€ä¹ˆè®¾ç½®"><a href="#çº¿ç¨‹æ± çš„æ•°é‡ä¸€èˆ¬æ€ä¹ˆè®¾ç½®" class="headerlink" title="çº¿ç¨‹æ± çš„æ•°é‡ä¸€èˆ¬æ€ä¹ˆè®¾ç½®"></a>çº¿ç¨‹æ± çš„æ•°é‡ä¸€èˆ¬æ€ä¹ˆè®¾ç½®</h4><p>çº¿ç¨‹æ± ä¸­çº¿ç¨‹æ•°é‡çš„è®¾ç½®ä¸»è¦è€ƒè™‘ä¸¤ä¸ªæ–¹é¢ï¼š</p><ul><li><p>I&#x2F;Oå¯†é›†å‹</p></li><li><p>å¦‚æœè¯´ä»»åŠ¡æ˜¯è€—æ—¶I&#x2F;Oå‹ï¼Œæ¯”å¦‚æ¶‰åŠæ•°æ®åº“ã€æ–‡ä»¶çš„è¯»å†™ï¼Œç½‘ç»œé€šä¿¡ç­‰ä»»åŠ¡ï¼Œè¿™ç§ä»»åŠ¡çš„ç‰¹ç‚¹æ˜¯ä¸ä¼šç‰¹åˆ«æ¶ˆè€—CPUèµ„æºï¼Œä½†æ˜¯æˆ‘ä»¬éœ€è¦è€ƒè™‘åˆ°I&#x2F;Oæ“ä½œè€—æ—¶è¾ƒé•¿ã€‚è¿™ç§æƒ…å†µä¸€èˆ¬ä¼šå°†çº¿ç¨‹æ•°è®¾ç½®çš„æ¯”è¾ƒå¤§ï¼Œè¾¾åˆ°äº†CPUæ ¸å¿ƒæ•°çš„å¾ˆå¤šå€ã€‚å› ä¸ºå¦‚æœçº¿ç¨‹æ•°è®¾ç½®çš„æ¯”è¾ƒå°‘ï¼Œä¼šé€ æˆCPUè®¡ç®—èµ„æºçš„æµªè´¹ã€‚</p></li><li><p>CPUå¯†é›†å‹</p></li><li><p>å¯¹äºCPUå¯†é›†å‹ä»»åŠ¡ï¼Œçº¿ç¨‹æ•°ä¸å®œè®¾ç½®çš„è¿‡å¤šï¼Œå› ä¸ºè¿‡å¤šçš„çº¿ç¨‹éƒ½ä¼šå»æŠ¢å CPUèµ„æºï¼Œå°±ä¼šäº§ç”Ÿä¸å¿…è¦çš„ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œåè€Œä¼šé€ æˆæ•´ä½“æ€§èƒ½çš„ä¸‹é™</p></li></ul><p>çº¿ç¨‹æ•°é€šç”¨è®¡ç®—å…¬ç¤ºï¼šçº¿ç¨‹æ•° &#x3D; CPUæ ¸å¿ƒæ•° * (1 + I&#x2F;Oè€—æ—¶ &#x2F; CPUè€—æ—¶)</p><h4 id="æ¥äº†ä¸€ä¸ªæ–°ä»»åŠ¡ï¼Œçº¿ç¨‹æ± æ˜¯æ€ä¹ˆå·¥ä½œçš„ï¼ˆæœ¬ç­”æ¡ˆæœ‰å¾…å•†æ¦·ï¼‰"><a href="#æ¥äº†ä¸€ä¸ªæ–°ä»»åŠ¡ï¼Œçº¿ç¨‹æ± æ˜¯æ€ä¹ˆå·¥ä½œçš„ï¼ˆæœ¬ç­”æ¡ˆæœ‰å¾…å•†æ¦·ï¼‰" class="headerlink" title="æ¥äº†ä¸€ä¸ªæ–°ä»»åŠ¡ï¼Œçº¿ç¨‹æ± æ˜¯æ€ä¹ˆå·¥ä½œçš„ï¼ˆæœ¬ç­”æ¡ˆæœ‰å¾…å•†æ¦·ï¼‰"></a>æ¥äº†ä¸€ä¸ªæ–°ä»»åŠ¡ï¼Œçº¿ç¨‹æ± æ˜¯æ€ä¹ˆå·¥ä½œçš„ï¼ˆæœ¬ç­”æ¡ˆæœ‰å¾…å•†æ¦·ï¼‰</h4><p>å½“æœ‰ä¸€ä¸ªæ–°ä»»åŠ¡åˆ°æ¥æ—¶ï¼Œçº¿ç¨‹æ± ä¼šå…ˆåˆ¤æ–­æ˜¯å¦æœ‰ç©ºé—²çº¿ç¨‹ï¼Œå¦‚æœæœ‰ï¼Œåˆ™å°†ä»»åŠ¡åˆ†é…ç»™ç©ºé—²çº¿ç¨‹ï¼›</p><p>å¦‚æœæ­¤æ—¶çº¿ç¨‹æ± é‡Œæ²¡æœ‰ç©ºçº¿ç¨‹ï¼Œåˆ™å…ˆå°†ä»»åŠ¡æ”¾ä»»åŠ¡ä»»åŠ¡é˜Ÿåˆ—ï¼Œå¾…æœ‰ç©ºé—²çº¿ç¨‹ä¹‹åï¼Œå†ä»ä»»åŠ¡é˜Ÿåˆ—ä¸­å–å‡ºä»»åŠ¡ã€‚</p><h4 id="å®Œç¾è½¬å‘"><a href="#å®Œç¾è½¬å‘" class="headerlink" title="å®Œç¾è½¬å‘"></a>å®Œç¾è½¬å‘</h4><p>åœ¨æˆ‘çš„ç†è§£é‡Œï¼Œå®Œç¾è½¬å‘ &#x3D; std::forward + ä¸‡èƒ½å¼•ç”¨ + å¼•ç”¨æŠ˜å ã€‚é¦–å…ˆå¼•ç”¨æŠ˜å æœºåˆ¶ä¸ºT&amp;&amp;ç±»å‹çš„ä¸‡èƒ½å¼•ç”¨ä¸­çš„æ¨¡æ¿å‚æ•°Tèµ‹äºˆäº†ä¸€ä¸ªæ°åˆ°å¥½å¤„çš„å€¼ï¼Œè€Œæˆ‘ä»¬ç”¨Tå»æŒ‡æ˜std::forwardçš„æ¨¡æ¿å‚æ•°ï¼Œä»è€Œä½¿å¾—std::forwardè¿”å›çš„æ˜¯æ­£ç¡®çš„ç±»å‹ï¼ˆè¿™é‡Œå…³äºè¿”å›çš„æ˜¯æ­£ç¡®çš„ç±»å‹ï¼Œåº”è¯¥å»çœ‹std::forwardå®ç°çš„æºç ï¼ŒçŸ¥ä¹é“¾æ¥å¦‚ä¸‹ï¼š<a href="https://zhuanlan.zhihu.com/p/369203981%EF%BC%89">https://zhuanlan.zhihu.com/p/369203981ï¼‰</a></p><h4 id="å»æ‰std-forwardä¼šå’‹æ ·"><a href="#å»æ‰std-forwardä¼šå’‹æ ·" class="headerlink" title="å»æ‰std::forwardä¼šå’‹æ ·"></a>å»æ‰std::forwardä¼šå’‹æ ·</h4><p>å¯èƒ½ä¼šå¯¼è‡´åœ¨ä¼ é€’å‚æ•°çš„æ—¶å€™ä¸¢å¤±ç±»å‹ä¿¡æ¯ï¼Œä»è€Œå¯¼è‡´ç¼–è¯‘å™¨æ— æ³•æ­£ç¡®æ¨æ–­æ¨¡æ¿ç±»å‹æˆ–è€…åœ¨æ¨¡æ¿ç±»å‹æ¨æ–­ä¸­å‘ç”Ÿé”™è¯¯ã€‚</p><h4 id="è®²ä¸€ä¸‹C-ä¸­çš„è™šç»§æ‰¿"><a href="#è®²ä¸€ä¸‹C-ä¸­çš„è™šç»§æ‰¿" class="headerlink" title="è®²ä¸€ä¸‹C++ä¸­çš„è™šç»§æ‰¿"></a>è®²ä¸€ä¸‹C++ä¸­çš„è™šç»§æ‰¿</h4><h4 id="åŸºç±»çš„ææ„å‡½æ•°ä¸ºä»€ä¹ˆæ˜¯è™šå‡½æ•°ï¼Ÿ"><a href="#åŸºç±»çš„ææ„å‡½æ•°ä¸ºä»€ä¹ˆæ˜¯è™šå‡½æ•°ï¼Ÿ" class="headerlink" title="åŸºç±»çš„ææ„å‡½æ•°ä¸ºä»€ä¹ˆæ˜¯è™šå‡½æ•°ï¼Ÿ"></a>åŸºç±»çš„ææ„å‡½æ•°ä¸ºä»€ä¹ˆæ˜¯è™šå‡½æ•°ï¼Ÿ</h4><p>å¦‚æœåŸºç±»çš„è™šæ„å‡½æ•°ä¸æ˜¯è™šå‡½æ•°ï¼Œå½“æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªçˆ¶ç±»æŒ‡é’ˆæŒ‡å‘å­ç±»å¯¹è±¡æ—¶ï¼Œæœ€åå­ç±»çš„ææ„å‡½æ•°ä¸ä¼šè°ƒç”¨ï¼Œå¯¼è‡´å†…å­˜æ³„æ¼ã€‚</p><h4 id="structå’Œunionçš„åŒºåˆ«ï¼ˆé»˜å†™ï¼‰"><a href="#structå’Œunionçš„åŒºåˆ«ï¼ˆé»˜å†™ï¼‰" class="headerlink" title="structå’Œunionçš„åŒºåˆ«ï¼ˆé»˜å†™ï¼‰"></a>structå’Œunionçš„åŒºåˆ«ï¼ˆé»˜å†™ï¼‰</h4><h4 id="C-å†…å­˜å¸ƒå±€-x2F-ç¨‹åºåˆ†æ®µï¼ˆé»˜å†™ï¼‰"><a href="#C-å†…å­˜å¸ƒå±€-x2F-ç¨‹åºåˆ†æ®µï¼ˆé»˜å†™ï¼‰" class="headerlink" title="C++å†…å­˜å¸ƒå±€&#x2F;ç¨‹åºåˆ†æ®µï¼ˆé»˜å†™ï¼‰"></a>C++å†…å­˜å¸ƒå±€&#x2F;ç¨‹åºåˆ†æ®µï¼ˆé»˜å†™ï¼‰</h4><h4 id="äº†è§£shared-ptrå—ï¼Ÿå¦‚æœè®©ä½ æ‰‹å†™ä¸€ä¸ªshared-ptrï¼Œä½ ä¼šæ€ä¹ˆè®¾è®¡"><a href="#äº†è§£shared-ptrå—ï¼Ÿå¦‚æœè®©ä½ æ‰‹å†™ä¸€ä¸ªshared-ptrï¼Œä½ ä¼šæ€ä¹ˆè®¾è®¡" class="headerlink" title="äº†è§£shared_ptrå—ï¼Ÿå¦‚æœè®©ä½ æ‰‹å†™ä¸€ä¸ªshared_ptrï¼Œä½ ä¼šæ€ä¹ˆè®¾è®¡"></a>äº†è§£shared_ptrå—ï¼Ÿå¦‚æœè®©ä½ æ‰‹å†™ä¸€ä¸ªshared_ptrï¼Œä½ ä¼šæ€ä¹ˆè®¾è®¡</h4><p>shared_ptræ˜¯æ™ºèƒ½æŒ‡é’ˆé‡Œé¢çš„å…±äº«æŒ‡é’ˆï¼Œå³å¤šä¸ªæŒ‡é’ˆæŒ‡å‘åŒä¸€ä¸ªå†…å­˜ã€‚æ¯å¤šä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘è¿™ç‰‡å†…å­˜ï¼Œå¼•ç”¨è®¡æ•°åŠ 1ã€‚å½“å¯¹è±¡çš„å¼•ç”¨è®¡æ•°å‡å°‘ä¸º0æ—¶ï¼Œå¯¹è±¡ä¼šè‡ªåŠ¨ææ„ï¼Œå¯¹åº”å†…å­˜è¢«è‡ªåŠ¨é‡Šæ”¾ã€‚æ™ºèƒ½æŒ‡é’ˆæ˜¯æ¨¡æ¿ç±»ï¼Œè€Œä¸æ˜¯æŒ‡é’ˆã€‚</p><p>è®¾è®¡ï¼šå°†shared_ptrå®šä¹‰ä¸ºä¸€ä¸ªæ¨¡æ¿ç±»ï¼ŒåŒ…æ‹¬ä¸¤ä¸ªæˆå‘˜ï¼šæ¨¡æ¿ç±»æŒ‡é’ˆå’Œä¸€ä¸ªæŒ‡å‘å¼•ç”¨è®¡æ•°çš„æŒ‡é’ˆã€‚æŒ‡å‘å¼•ç”¨è®¡æ•°ç±»å‹çš„æŒ‡é’ˆåº”è¯¥åŒ…æ‹¬è¿™äº›æˆå‘˜å‡½æ•°ï¼šå¢åŠ è®¡æ•°ã€å‡å°‘è®¡æ•°ã€è¿”å›ç°æœ‰è®¡æ•°ã€‚ä¸€ä¸ªç§æœ‰æˆå‘˜å°±æ˜¯ç”¨äºè®¡æ•°çš„å˜é‡ã€‚å…±äº«æŒ‡é’ˆæ¨¡æ¿ç±»çš„æ„é€ å‡½æ•°æ¥å—ä¸€ä¸ªæ¨¡æ¿ç±»å‹æŒ‡é’ˆï¼Œå¹¶ä¸”éœ€è¦å£°æ˜ä¸ºexplicitï¼Œè¡¨ç¤ºå¿…é¡»ç›´æ¥åˆå§‹åŒ–ã€‚å¦å¤–å°±æ˜¯æ‹·è´æ„é€ å‡½æ•°å’Œç§»åŠ¨æ„é€ å‡½æ•°ã€‚æ‹·è´æ„é€ éœ€è¦æ³¨æ„æ‹·è´çš„å¯¹è±¡çš„æŒ‡é’ˆæ˜¯å¦ä¸ºnullptrï¼Œå¦‚æœä¸æ˜¯nullptrï¼Œåˆ™éœ€è¦å¢åŠ å¼•ç”¨è®¡æ•°ã€‚ç§»åŠ¨æ„é€ å‡½æ•°éœ€è¦æ³¨æ„å°†ä¼ å…¥çš„å³å€¼å¼•ç”¨å¯¹è±¡çš„æŒ‡é’ˆç½®ç©ºï¼Œå¼•ç”¨è®¡æ•°æ¸…é›¶ã€‚ææ„å‡½æ•°æœ‰ä¸¤ä¸ªåˆ¤æ–­æ¡ä»¶ï¼Œç¬¬ä¸€ä¸ªæœ€åä¸€ä¸ªæŒ‡å‘å¯¹è±¡çš„æŒ‡é’ˆéœ€è¦ä¸ºénullptrå¹¶ä¸”æ­¤æ—¶å¼•ç”¨è®¡æ•°å‡ä¸€åä¸º0ã€‚ç„¶åå°±æ˜¯é‡è½½*ã€-&gt;ã€boolï¼Œè¿˜æœ‰ä¸€ä¸ªå‡½æ•°ç”¨äºè·å¾—æŒ‡é’ˆget()ã€‚åŠ¨æ€è½¬æ¢ï¼ˆå¯è€ƒè™‘ï¼‰ã€‚</p><h4 id="ä»‹ç»ä¸€ä¸‹TCPï¼ŒTCPç²˜åŒ…å¦‚ä½•è§£å†³"><a href="#ä»‹ç»ä¸€ä¸‹TCPï¼ŒTCPç²˜åŒ…å¦‚ä½•è§£å†³" class="headerlink" title="ä»‹ç»ä¸€ä¸‹TCPï¼ŒTCPç²˜åŒ…å¦‚ä½•è§£å†³"></a>ä»‹ç»ä¸€ä¸‹TCPï¼ŒTCPç²˜åŒ…å¦‚ä½•è§£å†³</h4><p>è§£å†³åŠæ³•ï¼š</p><ul><li>å‘é€ç«¯ï¼šä½¿ç”¨TCP_NODELAYå…³é—­Nagleç®—æ³•ï¼Œä½†æ˜¯å¦‚æœä¸æ˜¯æ—¶å»¶æ•æ„Ÿçš„åº”ç”¨å°½é‡ä¸è¦å…³é—­</li><li>æ¥æ”¶ç«¯ï¼šæ²¡æ³•è§£å†³ï¼Œåªèƒ½äº¤ç»™åº”ç”¨ç«¯è§£å†³</li><li>åº”ç”¨å±‚ï¼šæœ‰ä¸‰ç§è§£å†³åŠæ³•<ul><li>åªå‘é€å›ºå®šåŒ…é•¿çš„æ•°æ®åŒ…ï¼Œä½†æ˜¯è¿™ä¸ªæ–¹æ³•åŸºæœ¬ä¸ç”¨ï¼Œçµæ´»æ€§å¤ªå·®</li><li>æŒ‡å®šæ ‡è¯†ç»“å°¾ï¼Œæ¯”å¦‚\r\nä¹‹ç±»çš„</li><li>åŒ…å¤´åŠ åŒ…ä½“ï¼ŒåŒ…å¤´ä¸€èˆ¬æ˜¯å›ºå®šé•¿åº¦ï¼Œå¹¶ä¸”é‡Œé¢æœ‰ä¸€ä¸ªå­—æ®µå¯ä»¥å‘ŠçŸ¥æˆ‘ä»¬æ¥ä¸‹æ¥çš„åŒ…ä½“æœ‰å¤šå¤§</li></ul></li></ul><h4 id="å›è°ƒå‡½æ•°æ˜¯ä»€ä¹ˆï¼Œå›è°ƒå‡½æ•°çš„æœ¬è´¨"><a href="#å›è°ƒå‡½æ•°æ˜¯ä»€ä¹ˆï¼Œå›è°ƒå‡½æ•°çš„æœ¬è´¨" class="headerlink" title="å›è°ƒå‡½æ•°æ˜¯ä»€ä¹ˆï¼Œå›è°ƒå‡½æ•°çš„æœ¬è´¨"></a>å›è°ƒå‡½æ•°æ˜¯ä»€ä¹ˆï¼Œå›è°ƒå‡½æ•°çš„æœ¬è´¨</h4><p>å›è°ƒå‡½æ•°å…è®¸æˆ‘ä»¬å°†ä¸€ä¸ªå‡½æ•°ï¼ˆæˆ–å‡½æ•°å¯¹è±¡ï¼‰ä½œä¸ºå‚æ•°ä¼ é€’ç»™å¦ä¸€ä¸ªå‡½æ•°ï¼Œå¹¶åœ¨éœ€è¦çš„æ—¶å€™ç”±åè€…è°ƒç”¨æ‰§è¡Œã€‚å›è°ƒå‡½æ•°å®šä¹‰äº†åœ¨ç‰¹å®šäº‹ä»¶æˆ–æ¡ä»¶æ»¡è¶³æ—¶åº”è¯¥æ‰§è¡Œçš„æ“ä½œã€‚ä¸»è°ƒå‡½æ•°æ˜¯æ¥å—å›è°ƒå‡½æ•°ä½œä¸ºå‚æ•°çš„å‡½æ•°ã€‚</p><h4 id="è¿›ç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ«"><a href="#è¿›ç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ«" class="headerlink" title="è¿›ç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ«"></a>è¿›ç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ«</h4><ol><li>è¿›ç¨‹<ul><li>è¿›ç¨‹æ‹¥æœ‰ç‹¬ç«‹å†…å­˜ç©ºé—´å’Œç³»ç»Ÿèµ„æº</li><li>è¿›ç¨‹ä¹‹é—´ç›¸äº’ç‹¬ç«‹ï¼Œä¸€ä¸ªè¿›ç¨‹çš„å´©æºƒé€šå¸¸ä¸ä¼šå½±å“å…¶ä»–è¿›ç¨‹</li><li>åˆ›å»ºã€é”€æ¯å’Œåˆ‡æ¢è¿›ç¨‹å¼€é”€æ¯”è¾ƒå¤§</li></ul></li><li>çº¿ç¨‹<ul><li>ä¸€ä¸ªè¿›ç¨‹å¯ä»¥åŒ…å«å¤šä¸ªçº¿ç¨‹ï¼Œæ‰€æœ‰çº¿ç¨‹å…±äº«ç›¸åŒçš„åœ°å€ç©ºé—´å’Œç³»ç»Ÿèµ„æº</li><li>çº¿ç¨‹ä¹‹é—´å¯ä»¥ç›´æ¥è¯»å†™è¿›ç¨‹å†…çš„å…±äº«æ•°æ®ï¼Œæ‰§è¡Œèµ·æ¥æ›´é«˜æ•ˆ</li><li>çº¿ç¨‹çš„åˆ›å»ºã€é”€æ¯å’Œåˆ‡æ¢å¼€é”€æ¯”è¾ƒå°</li></ul></li></ol><h4 id="GETå’ŒPOSTçš„åŒºåˆ«"><a href="#GETå’ŒPOSTçš„åŒºåˆ«" class="headerlink" title="GETå’ŒPOSTçš„åŒºåˆ«"></a>GETå’ŒPOSTçš„åŒºåˆ«</h4><p>GETç”¨äºè·å–èµ„æºï¼Œå‚æ•°é€šè¿‡URLä¼ é€’ï¼Œä¸é€‚åˆä¼ è¾“æ•æ„Ÿä¿¡æ¯ï¼Œå¹‚ç­‰ï¼Œæœ‰ç¼“å­˜ï¼Œä¼ è¾“æ•°æ®çš„å¤§å°å—é™äºURLçš„é•¿åº¦ã€‚POSTç”¨äºæäº¤æ•°æ®ï¼Œå‚æ•°é€šè¿‡è¯·æ±‚ä½“ä¼ é€’ï¼Œé€‚åˆä¼ è¾“æ•æ„Ÿä¿¡æ¯ï¼Œä¸å¹‚ç­‰ï¼Œæ— ç¼“å­˜ï¼Œæ²¡æœ‰æ•°æ®å¤§å°é™åˆ¶ã€‚</p><h4 id="HTTPå’ŒHTTPS"><a href="#HTTPå’ŒHTTPS" class="headerlink" title="HTTPå’ŒHTTPS"></a>HTTPå’ŒHTTPS</h4><ol><li>HTTP<ul><li>HTTPæ˜¯ä¸€ç§åº”ç”¨å±‚åè®®ï¼Œç”¨äºåœ¨Webæµè§ˆå™¨å’ŒWebæœåŠ¡å™¨ä¹‹é—´ä¼ è¾“è¶…æ–‡æœ¬å’Œå…¶ä»–èµ„æº</li><li>HTTPæ˜¯æ˜æ–‡ä¼ è¾“çš„åè®®ï¼Œæ„å‘³ç€æ•°æ®åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­æ˜¯æœªåŠ å¯†çš„ï¼Œå®¹æ˜“è¢«çªƒå¬å’Œç¯¡æ”¹</li><li>HTTPé»˜è®¤ä½¿ç”¨80ç«¯å£å·</li></ul></li><li>HTTPS<ul><li>HTTPSæ˜¯HTTPåè®®çš„å®‰å…¨ç‰ˆæœ¬ï¼ŒåŠ å¼ºäº†æ•°æ®ä¼ è¾“çš„å®‰å…¨æ€§å’Œä¿å¯†æ€§</li><li>HTTPSä½¿ç”¨äº†SSL&#x2F;TLSåè®®è¿›è¡Œæ•°æ®åŠ å¯†å’Œèº«ä»½è®¤è¯</li><li>HTTPSé»˜è®¤ä½¿ç”¨443ç«¯å£é€šä¿¡</li></ul></li></ol><h4 id="C-11æ–°ç‰¹æ€§"><a href="#C-11æ–°ç‰¹æ€§" class="headerlink" title="C++ 11æ–°ç‰¹æ€§"></a>C++ 11æ–°ç‰¹æ€§</h4><ul><li><p>autoå…³é”®å­—</p></li><li><p>æ™ºèƒ½æŒ‡é’ˆ</p></li><li><p>lambdaè¡¨è¾¾å¼å‚è€ƒé“¾æ¥ï¼ˆ<a href="https://blog.51cto.com/u_15323899/5785594%EF%BC%89">https://blog.51cto.com/u_15323899/5785594ï¼‰</a></p><p>Lambdaè¡¨è¾¾å¼æ˜¯C++11å¼•å…¥çš„ä¸€ç§æ–°ç‰¹æ€§ï¼Œå®ƒå…è®¸åœ¨ä»£ç ä¸­å®šä¹‰åŒ¿åå‡½æ•°ã€‚è™½ç„¶åœ¨ä½¿ç”¨ä¸Šéå¸¸ç®€æ´å’Œæ–¹ä¾¿ï¼Œä½†lambdaè¡¨è¾¾å¼èƒŒåçš„å®ç°ç›¸å¯¹å¤æ‚ã€‚ä»¥ä¸‹æ˜¯lambdaè¡¨è¾¾å¼åœ¨åº•å±‚çš„å·¥ä½œåŸç†ï¼š</p><ol><li><p><strong>è½¬æ¢ä¸ºç±»</strong>:</p><ul><li>å½“ä½ å®šä¹‰ä¸€ä¸ªlambdaè¡¨è¾¾å¼ï¼Œç¼–è¯‘å™¨ä¼šä¸ºä½ ç”Ÿæˆä¸€ä¸ªåŒ¿åç±»ï¼ˆä¹Ÿç§°ä¸ºé—­åŒ…ç±»å‹ï¼‰ã€‚è¿™ä¸ªç±»å°†ä¼šè¦†ç›–å‡½æ•°è°ƒç”¨æ“ä½œç¬¦ï¼Œä½¿å¾—è¯¥å¯¹è±¡å¯ä»¥åƒå‡½æ•°ä¸€æ ·è¢«è°ƒç”¨ã€‚</li><li>å¦‚æœlambdaè¡¨è¾¾å¼æ•è·äº†å¤–éƒ¨çš„å±€éƒ¨å˜é‡ï¼ˆä¾‹å¦‚é€šè¿‡å€¼æˆ–å¼•ç”¨ï¼‰ï¼Œè¿™äº›å˜é‡å°†ä¼šè¢«æ·»åŠ ä¸ºè¯¥åŒ¿åç±»çš„æˆå‘˜ã€‚</li></ul></li><li><p><strong>æˆå‘˜å˜é‡</strong>:</p><ul><li>ä¸ºäº†æ”¯æŒæ•è·ï¼Œç”Ÿæˆçš„é—­åŒ…ç±»å‹å¯èƒ½ä¼šåŒ…å«æˆå‘˜å˜é‡ã€‚å¦‚æœä½¿ç”¨å€¼æ•è·ï¼Œé‚£ä¹ˆè¿™äº›æˆå‘˜å˜é‡å°†å­˜å‚¨æ•è·çš„å˜é‡çš„å‰¯æœ¬ï¼›å¦‚æœä½¿ç”¨å¼•ç”¨æ•è·ï¼Œé‚£ä¹ˆæˆå‘˜å˜é‡å°†å­˜å‚¨ç›¸åº”å˜é‡çš„å¼•ç”¨ã€‚</li></ul></li><li><p><strong>å‡½æ•°è°ƒç”¨æ“ä½œç¬¦é‡è½½</strong>:</p><ul><li>ç”Ÿæˆçš„ç±»ä¼šè¦†ç›–å‡½æ•°è°ƒç”¨æ“ä½œç¬¦<code>operator()</code>. è¿™ä¸ªæ“ä½œç¬¦çš„å®ç°å°±æ˜¯lambdaè¡¨è¾¾å¼çš„ä¸»ä½“ã€‚</li></ul></li><li><p><strong>æ„é€ å‡½æ•°</strong>:</p><ul><li>è¯¥åŒ¿åç±»çš„æ„é€ å‡½æ•°ä¼šåˆå§‹åŒ–æ‰€æœ‰æ•è·çš„å˜é‡ã€‚æ ¹æ®æ•è·æ–¹å¼ï¼ˆå€¼æˆ–å¼•ç”¨ï¼‰æ¥å¤åˆ¶æˆ–ç»‘å®šè¿™äº›å˜é‡ã€‚</li></ul></li><li><p><strong>ç”Ÿæˆçš„ç±»æ˜¯åªç§»åŠ¨æ„é€ çš„</strong>:</p><ul><li>è¿™æ„å‘³ç€ä½ ä¸èƒ½æŒ‰å¸¸è§„æ–¹å¼å¤åˆ¶lambdaè¡¨è¾¾å¼ï¼Œä½†å¯ä»¥ç§»åŠ¨å®ƒã€‚</li></ul></li></ol><p>ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„lambdaè¡¨è¾¾å¼çš„ä¾‹å­ä»¥åŠä¸€ä¸ªå¯èƒ½çš„ç®€åŒ–ç‰ˆæœ¬çš„åŒ¿åç±»è¡¨ç¤ºï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Lambda</span></span><br><span class="line"><span class="keyword">auto</span> lambda = [x](<span class="type">int</span> y) &#123; <span class="keyword">return</span> x + y; &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Possible representation by the compiler</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">__anonymous</span> &#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="type">int</span> x;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    __anonymous(<span class="type">int</span> _x) : <span class="built_in">x</span>(_x) &#123;&#125;</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> y)</span> <span class="type">const</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> x + y;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™åªæ˜¯ä¸€ä¸ªç®€åŒ–çš„è¡¨ç¤ºã€‚å®é™…ç¼–è¯‘å™¨ç”Ÿæˆçš„ä»£ç ä¼šæ¯”è¿™æ›´å¤æ‚ï¼Œå°¤å…¶æ˜¯å½“æ¶‰åŠåˆ°æ›´é«˜çº§çš„ç‰¹æ€§ï¼ˆå¦‚æ³›å‹ã€<code>mutable</code>å…³é”®å­—æˆ–æ•è·åˆ—è¡¨ï¼‰æ—¶ã€‚</p><p>æœ€åï¼Œè™½ç„¶ä»æ¦‚å¿µä¸Šè®²ï¼Œlambdaè¡¨è¾¾å¼æ˜¯è½¬æ¢ä¸ºç±»çš„ï¼Œä½†è¿™å¹¶ä¸æ„å‘³ç€æ€§èƒ½ä¼šå—åˆ°å½±å“ã€‚ä¼˜åŒ–åçš„ç¼–è¯‘å™¨é€šå¸¸ä¼šå†…è”è¿™äº›ç”Ÿæˆçš„ç±»å’Œå‡½æ•°è°ƒç”¨æ“ä½œç¬¦ï¼Œä»è€Œæ¶ˆé™¤ç”±äºé—´æ¥è°ƒç”¨å¯¼è‡´çš„ä»»ä½•é¢å¤–å¼€é”€ã€‚</p></li><li><p>å³å€¼å¼•ç”¨å’Œç§»åŠ¨è¯­ä¹‰</p></li></ul><h4 id="lambdaè¡¨è¾¾å¼çš„ä½¿ç”¨åœºæ™¯"><a href="#lambdaè¡¨è¾¾å¼çš„ä½¿ç”¨åœºæ™¯" class="headerlink" title="lambdaè¡¨è¾¾å¼çš„ä½¿ç”¨åœºæ™¯"></a>lambdaè¡¨è¾¾å¼çš„ä½¿ç”¨åœºæ™¯</h4><p>lambdaè¡¨è¾¾å¼æä¾›äº†ä¸€ç§ç®€æ´ã€æ–¹ä¾¿çš„æ–¹å¼æ¥åˆ›å»ºåŒ¿åå¯¹è±¡ã€‚åœ¨ä¸€äº›éœ€è¦ä¼ é€’ç®€å•å‡½æ•°å¯¹è±¡çš„åœºæ™¯ä¸‹ï¼Œä½¿ç”¨lambdaè¡¨è¾¾å¼å¯ä»¥é¿å…é¢å¤–çš„å‡½æ•°å¯¹è±¡ç±»ã€‚</p><h4 id="vectorè¿­ä»£å™¨å¤±æ•ˆçš„åŸå› "><a href="#vectorè¿­ä»£å™¨å¤±æ•ˆçš„åŸå› " class="headerlink" title="vectorè¿­ä»£å™¨å¤±æ•ˆçš„åŸå› "></a>vectorè¿­ä»£å™¨å¤±æ•ˆçš„åŸå› </h4><p>vectoråº•å±‚çš„å®ç°æ˜¯ä¸€ä¸ªåŠ¨æ€æ•°ç»„ï¼Œvectoré‡Œé¢å­˜å‚¨çš„å…ƒç´ éƒ½æ˜¯è¿ç»­çš„ï¼Œä¸€æ—¦æ¯”å¦‚åˆ é™¤ä¸€ä¸ªå…ƒç´ ï¼Œåé¢çš„æ‰€æœ‰å…ƒç´ éƒ½éœ€è¦ç§»åŠ¨ã€‚æˆ‘ä»¬å¯ä»¥è€ƒè™‘ä¸€ç§æç«¯æƒ…å†µï¼Œåˆ é™¤æœ€åä¸€ä¸ªå…ƒç´ ï¼Œæ­¤æ—¶æŒ‡å‘åŸvectoræ•°ç»„çš„æœ€åä¸€ä¸ªå…ƒç´ çš„è¿­ä»£å™¨å°±æ²¡æŒ‡å‘ä»»ä½•å…ƒç´ äº†ï¼Œå¦‚ä½•æ­¤æ—¶æˆ‘ä»¬è®¿é—®è¿™ä¸ªè¿­ä»£å™¨æ‰€æŒ‡å‘çš„å…ƒç´ ï¼Œå°±ä¼šå¯¼è‡´æœªå®šä¹‰è¡Œä¸ºï¼Œæ‰€ä»¥å°±ä¼šåˆ¤å®šè¿­ä»£å™¨å¤±æ•ˆã€‚å…¶å®æ‰€æœ‰æ”¹å˜vectorå¤§å°çš„æ“ä½œï¼Œéƒ½ä¼šå¯¼è‡´vectorè¿­ä»£å™¨å¤±æ•ˆã€‚</p><h4 id="mapçš„åº•å±‚æ•°æ®ç»“æ„"><a href="#mapçš„åº•å±‚æ•°æ®ç»“æ„" class="headerlink" title="mapçš„åº•å±‚æ•°æ®ç»“æ„"></a>mapçš„åº•å±‚æ•°æ®ç»“æ„</h4><p>çº¢é»‘æ ‘å‚è€ƒé“¾æ¥ï¼š<a href="https://www.jianshu.com/p/e136ec79235c">https://www.jianshu.com/p/e136ec79235c</a></p><p>mapæ˜¯æœ‰åºå®¹å™¨ï¼Œåº•å±‚æ•°æ®ç»“æ„æ˜¯çº¢é»‘æ ‘ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºlog(n)ã€‚çº¢é»‘æ ‘çš„å‰èº«å¯ä»¥è¯´æ˜¯äºŒå‰æœç´¢æ ‘ã€‚ä½†æ˜¯äºŒå‰æœç´¢æ ‘æœ€åçš„æƒ…å†µä¸‹æ ‘çš„é«˜åº¦ä¸ºnï¼Œé‚£ä¹ˆå°±å¯¼è‡´æ—¶é—´å¤æ‚åº¦ä¸ºo(n), æ‰€ä»¥ä¾¿è¡ç”Ÿå‡ºæ¥äº†å¹³è¡¡äºŒå‰æ ‘ã€‚å…¶å®çº¢é»‘æ ‘çš„äº”å¤§ç‰¹æ€§å°±æ˜¯ä¸ºäº†ä¿æŒäºŒå‰æœç´¢æ ‘çš„å¹³è¡¡ã€‚ä¿è¯æ—¶é—´å¤æ‚åº¦ç¨³å®šåœ¨o(logn)ã€‚</p><h4 id="unordered-mapåº•å±‚æ•°æ®ç»“æ„"><a href="#unordered-mapåº•å±‚æ•°æ®ç»“æ„" class="headerlink" title="unordered_mapåº•å±‚æ•°æ®ç»“æ„"></a>unordered_mapåº•å±‚æ•°æ®ç»“æ„</h4><p>unordered_mapæ˜¯æ— åºå®¹å™¨ï¼Œåº•å±‚ä½¿ç”¨å“ˆå¸Œè¡¨å®ç°çš„ã€‚</p><h4 id="TCPæ¡æ‰‹ä¸ºä»€ä¹ˆæ˜¯ä¸‰æ¬¡æ¡æ‰‹ï¼Œä¸¤æ¬¡æ¡æ‰‹ä¸ºä»€ä¹ˆä¸è¡Œå‘¢"><a href="#TCPæ¡æ‰‹ä¸ºä»€ä¹ˆæ˜¯ä¸‰æ¬¡æ¡æ‰‹ï¼Œä¸¤æ¬¡æ¡æ‰‹ä¸ºä»€ä¹ˆä¸è¡Œå‘¢" class="headerlink" title="TCPæ¡æ‰‹ä¸ºä»€ä¹ˆæ˜¯ä¸‰æ¬¡æ¡æ‰‹ï¼Œä¸¤æ¬¡æ¡æ‰‹ä¸ºä»€ä¹ˆä¸è¡Œå‘¢"></a>TCPæ¡æ‰‹ä¸ºä»€ä¹ˆæ˜¯ä¸‰æ¬¡æ¡æ‰‹ï¼Œä¸¤æ¬¡æ¡æ‰‹ä¸ºä»€ä¹ˆä¸è¡Œå‘¢</h4><p>è¿™é‡Œæœ‰ä¸¤ä¸ªå¤§ç‚¹ï¼Œç¬¬ä¸€ä¸ªå­—é¢æ„æ€å¾ˆå¥½ç†è§£ï¼Œç¬¬äºŒç‚¹ä¸¾ä¸ªä¾‹å­å°±é€šé€äº†ï¼Œé¢è¯•æ—¶æœ€å¥½å…¨éƒ¨ç­”ä¸Šæ¥</p><ul><li><p>ä¸ºäº†å®ç°å¯é æ•°æ®ä¼ è¾“ï¼Œ TCP åè®®çš„é€šä¿¡åŒæ–¹ï¼Œ éƒ½å¿…é¡»ç»´æŠ¤ä¸€ä¸ªåºåˆ—å·ï¼Œ ä»¥æ ‡è¯†å‘é€å‡ºå»çš„æ•°æ®åŒ…ä¸­ï¼Œ å“ªäº›æ˜¯å·²ç»è¢«å¯¹æ–¹æ”¶åˆ°çš„ã€‚ ä¸‰æ¬¡æ¡æ‰‹çš„è¿‡ç¨‹å³æ˜¯é€šä¿¡åŒæ–¹ç›¸äº’å‘ŠçŸ¥åºåˆ—å·èµ·å§‹å€¼ï¼Œ å¹¶ç¡®è®¤å¯¹æ–¹å·²ç»æ”¶åˆ°äº†åºåˆ—å·èµ·å§‹å€¼çš„å¿…ç»æ­¥éª¤</p></li><li><p>é˜²æ­¢å·²å¤±æ•ˆçš„è¿æ¥è¯·æ±‚åˆä¼ é€åˆ°æœåŠ¡å™¨ç«¯ï¼Œå› è€Œäº§ç”Ÿé”™è¯¯</p><p>åªæœ‰é‡‡ç”¨ä¸‰æ¬¡æ¡æ‰‹å¯ä»¥å‡å°‘æœåŠ¡ç«¯çš„èµ„æºæµªè´¹ã€‚è§£é‡Šå¦‚ä¸‹ï¼š<br>ä¾‹å¦‚ï¼Œå®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘é€è¯·æ±‚åŒæ­¥æŠ¥æ–‡Aï¼Œå› ä¸ºç½‘ç»œé˜»å¡ç­‰åŸå› ï¼ŒæœåŠ¡ç«¯æ²¡æœ‰æ”¶åˆ°åŒæ­¥æŠ¥æ–‡Aï¼Œæ‰€ä»¥æ²¡æœ‰å‘é€åŒæ­¥ç¡®è®¤æŠ¥æ–‡ã€‚è¿‡äº†ä¸€æ®µæ—¶é—´ï¼Œå®¢æˆ·ç«¯æ²¡æœ‰æ”¶åˆ°æœåŠ¡ç«¯çš„ç¡®è®¤æŠ¥æ–‡ï¼Œé‡æ–°å‘æœåŠ¡ç«¯å‘é€è¯·æ±‚åŒæ­¥æŠ¥æ–‡Bï¼ŒæœåŠ¡ç«¯æ¥æ”¶åˆ°æŠ¥æ–‡Båï¼Œå‘å®¢æˆ·ç«¯å‘é€åŒæ­¥ç¡®è®¤æŠ¥æ–‡ï¼Œå®¢æˆ·ç«¯æ¥æ”¶åˆ°ç¡®è®¤æŠ¥æ–‡åï¼Œå‘æœåŠ¡ç«¯å‘é€ç¡®è®¤æŠ¥æ–‡ï¼Œå»ºç«‹è¿æ¥ã€‚æ•°æ®ä¼ è¾“å®Œæ¯•åï¼Œè¿æ¥æ–­å¼€ã€‚å®¢æˆ·ç«¯è¿›å…¥closeçŠ¶æ€ï¼Œæ­¤æ—¶æœåŠ¡ç«¯æ”¶åˆ°ä¹‹å‰çš„æŠ¥æ–‡Aï¼Œå‘å®¢æˆ·ç«¯è¿”å›åŒæ­¥ç¡®è®¤æŠ¥æ–‡ã€‚å¦‚æœä½¿ç”¨ä¸¤æ¬¡æ¡æ‰‹ï¼ŒæœåŠ¡ç«¯å›åº”åä¸ç¡®è®¤å®¢æˆ·ç«¯çš„çŠ¶æ€ï¼Œè¿æ¥å»ºç«‹æˆåŠŸã€‚æœåŠ¡ç«¯ä¼šé•¿æ—¶é—´ç­‰å¾…å®¢æˆ·ç«¯å‘é€æ•°æ®ï¼Œè¿æ¥é•¿æœŸä¿æŒï¼Œä¼šé€ æˆèµ„æºæµªè´¹ã€‚å½“å¤šä¸ªå®¢æˆ·ç«¯äº§ç”Ÿè¿™ç§æƒ…å†µï¼ŒæœåŠ¡å™¨å°±ä¼šç­‰å¾…å¤šä¸ªå®¢æˆ·ç«¯çš„å“åº”ï¼Œè¿æ¥æ•°é‡è¿‡å¤šï¼Œä¹‹åçš„å®¢æˆ·ç«¯è¯·æ±‚ï¼ŒæœåŠ¡å™¨æ— æ³•å“åº”ã€‚é€ æˆæœåŠ¡å™¨å¤„äºç˜«ç—ªçŠ¶æ€ã€‚<br>åªæœ‰ä½¿ç”¨ä¸‰æ¬¡æ¡æ‰‹ï¼Œå½“æœåŠ¡ç«¯æ”¶åˆ°ç¡®è®¤æŠ¥æ–‡åï¼Œä¿è¯å½“å‰æ—¶åˆ»ï¼Œå®¢æˆ·ç«¯å¯ä»¥å‘é€æ•°æ®æ—¶ï¼Œæ‰èƒ½å»ºç«‹æœ‰æ„ä¹‰çš„è¿æ¥ã€‚å½“å®¢æˆ·ç«¯ä¸€æ®µæ—¶é—´ä¸å‘é€æ•°æ®æ—¶ï¼ŒæœåŠ¡å™¨åº”è‡ªåŠ¨æ–­å¼€è¿æ¥ï¼Œæ¥èŠ‚çœè‡ªèº«è¿æ¥çš„å®¢æˆ·ç«¯æ•°é‡ï¼Œå‡å°‘èµ„æºçš„æµªè´¹ã€‚</p></li></ul><h4 id="HTTPçŠ¶æ€ç "><a href="#HTTPçŠ¶æ€ç " class="headerlink" title="HTTPçŠ¶æ€ç "></a>HTTPçŠ¶æ€ç </h4><p>HTTPçŠ¶æ€ç æ˜¯åœ¨HTTPåè®®ä¸­ç”¨äºè¡¨ç¤ºæœåŠ¡å™¨å¯¹è¯·æ±‚çš„å¤„ç†ç»“æœçš„ä¸‰ä½æ•°å­—ä»£ç ã€‚HTTPçŠ¶æ€ç çš„åˆ†ç±»å¦‚ä¸‹ï¼š</p><ol><li><p>1xxï¼ˆä¿¡æ¯æ€§çŠ¶æ€ç ï¼‰ï¼šè¡¨ç¤ºæœåŠ¡å™¨å·²æ¥æ”¶è¯·æ±‚ï¼Œéœ€è¦å®¢æˆ·ç«¯ç»§ç»­æ“ä½œã€‚</p></li><li><p>2xxï¼ˆæˆåŠŸçŠ¶æ€ç ï¼‰ï¼šè¡¨ç¤ºæœåŠ¡å™¨æˆåŠŸå¤„ç†äº†è¯·æ±‚ã€‚</p></li><li><p>3xxï¼ˆé‡å®šå‘çŠ¶æ€ç ï¼‰ï¼šè¡¨ç¤ºè¯·æ±‚éœ€è¦è¿›ä¸€æ­¥çš„æ“ä½œï¼Œé€šå¸¸ç”¨äºé‡å®šå‘ã€‚</p></li><li><p>4xxï¼ˆå®¢æˆ·ç«¯é”™è¯¯çŠ¶æ€ç ï¼‰ï¼šè¡¨ç¤ºå®¢æˆ·ç«¯å‘å‡ºçš„è¯·æ±‚æœ‰è¯¯ã€‚</p></li><li><p>5xxï¼ˆæœåŠ¡å™¨é”™è¯¯çŠ¶æ€ç ï¼‰ï¼šè¡¨ç¤ºæœåŠ¡å™¨åœ¨å¤„ç†è¯·æ±‚æ—¶å‘ç”Ÿäº†é”™è¯¯ã€‚</p></li></ol><p>ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§çš„HTTPçŠ¶æ€ç ç¤ºä¾‹ï¼š</p><ol><li><p>200 OKï¼šè¯·æ±‚æˆåŠŸï¼ŒæœåŠ¡å™¨æˆåŠŸå¤„ç†äº†è¯·æ±‚ã€‚</p></li><li><p>201 Createdï¼šè¯·æ±‚æˆåŠŸï¼ŒæœåŠ¡å™¨å·²æˆåŠŸåˆ›å»ºäº†èµ„æºã€‚</p></li><li><p>204 No Contentï¼šè¯·æ±‚æˆåŠŸï¼Œä½†æœåŠ¡å™¨æ²¡æœ‰æ–°çš„ä¿¡æ¯è¿”å›ã€‚</p></li><li><p>400 Bad Requestï¼šè¯·æ±‚é”™è¯¯ï¼ŒæœåŠ¡å™¨ä¸ç†è§£æˆ–æ— æ³•å¤„ç†è¯·æ±‚ã€‚</p></li><li><p>401 Unauthorizedï¼šè¯·æ±‚éœ€è¦ç”¨æˆ·è®¤è¯ï¼Œæœªæä¾›æœ‰æ•ˆçš„è®¤è¯ä¿¡æ¯ã€‚</p></li><li><p>403 Forbiddenï¼šè¯·æ±‚è¢«æœåŠ¡å™¨æ‹’ç»ï¼Œæ²¡æœ‰è®¿é—®æƒé™ã€‚</p></li><li><p>404 Not Foundï¼šè¯·æ±‚çš„èµ„æºä¸å­˜åœ¨ã€‚</p></li><li><p>500 Internal Server Errorï¼šæœåŠ¡å™¨å†…éƒ¨é”™è¯¯ï¼Œæ— æ³•å®Œæˆè¯·æ±‚ã€‚</p></li><li><p>502 Bad Gatewayï¼šæœåŠ¡å™¨ä½œä¸ºç½‘å…³æˆ–ä»£ç†ï¼Œä»ä¸Šæ¸¸æœåŠ¡å™¨æ”¶åˆ°æ— æ•ˆçš„å“åº”ã€‚</p></li><li><p>503 Service Unavailableï¼šæœåŠ¡å™¨æš‚æ—¶ä¸å¯ç”¨ï¼Œé€šå¸¸æ˜¯ç”±äºè¿‡è½½æˆ–ç»´æŠ¤ã€‚</p></li></ol><p>è¿™åªæ˜¯HTTPçŠ¶æ€ç ä¸­çš„ä¸€éƒ¨åˆ†ï¼Œå®é™…ä¸­å¯èƒ½è¿˜ä¼šé‡åˆ°å…¶ä»–çŠ¶æ€ç ã€‚çŠ¶æ€ç çš„å…·ä½“å«ä¹‰å¯å‚è€ƒHTTPåè®®çš„å®˜æ–¹æ–‡æ¡£æˆ–RFCæ–‡æ¡£ã€‚ä¸åŒçš„çŠ¶æ€ç ä»£è¡¨äº†æœåŠ¡å™¨å¯¹è¯·æ±‚çš„ä¸åŒå“åº”ç»“æœï¼Œå®¢æˆ·ç«¯æ ¹æ®çŠ¶æ€ç å¯ä»¥åšå‡ºç›¸åº”çš„å¤„ç†ã€‚</p><h4 id="ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆäº†ï¼Œæ™®é€šæŒ‡é’ˆè¿˜èƒ½ç”¨å—ï¼Ÿ"><a href="#ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆäº†ï¼Œæ™®é€šæŒ‡é’ˆè¿˜èƒ½ç”¨å—ï¼Ÿ" class="headerlink" title="ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆäº†ï¼Œæ™®é€šæŒ‡é’ˆè¿˜èƒ½ç”¨å—ï¼Ÿ"></a>ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆäº†ï¼Œæ™®é€šæŒ‡é’ˆè¿˜èƒ½ç”¨å—ï¼Ÿ</h4><p>ä¸ªäººè§‰å¾—ä½¿ç”¨äº†æ™ºèƒ½æŒ‡é’ˆåä¸æ¨èä½¿ç”¨æ™®é€šæŒ‡é’ˆã€‚å› ä¸ºä½¿ç”¨äº†æ™ºèƒ½æŒ‡é’ˆåï¼Œå†ä½¿ç”¨æ™®é€šæŒ‡é’ˆæŒ‡å‘ç›¸åŒå¯¹è±¡ï¼Œå¹¶ä¸ä¼šå¢åŠ å¼•ç”¨è®¡æ•°ï¼Œç­‰æ™ºèƒ½æŒ‡é’ˆå¼•ç”¨è®¡æ•°å˜ä¸º0çš„æ—¶å€™ï¼Œå¯¹è±¡è¢«é”€æ¯ï¼Œæ­¤æ—¶æ™®é€šæŒ‡é’ˆå°±å˜ä¸ºäº†é‡æŒ‡é’ˆã€‚</p><h4 id="ä»€ä¹ˆæ—¶å€™ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆï¼Œä»€ä¹ˆæ—¶å€™ä½¿ç”¨æ™®é€šæŒ‡é’ˆ-ï¼ˆCHATGPTï¼‰"><a href="#ä»€ä¹ˆæ—¶å€™ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆï¼Œä»€ä¹ˆæ—¶å€™ä½¿ç”¨æ™®é€šæŒ‡é’ˆ-ï¼ˆCHATGPTï¼‰" class="headerlink" title="ä»€ä¹ˆæ—¶å€™ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆï¼Œä»€ä¹ˆæ—¶å€™ä½¿ç”¨æ™®é€šæŒ‡é’ˆ ï¼ˆCHATGPTï¼‰"></a>ä»€ä¹ˆæ—¶å€™ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆï¼Œä»€ä¹ˆæ—¶å€™ä½¿ç”¨æ™®é€šæŒ‡é’ˆ ï¼ˆCHATGPTï¼‰</h4><p>ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆè¿˜æ˜¯æ™®é€šæŒ‡é’ˆå–å†³äºä½ çš„ä»£ç éœ€æ±‚å’Œå†…å­˜ç®¡ç†éœ€æ±‚ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›æŒ‡å¯¼åŸåˆ™ï¼š</p><p>ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆçš„æƒ…å†µï¼š</p><ol><li><p>åŠ¨æ€åˆ†é…å†…å­˜ï¼šå¦‚æœä½ éœ€è¦åŠ¨æ€åˆ†é…å†…å­˜ï¼Œå°¤å…¶æ˜¯åœ¨ä½¿ç”¨<code>new</code>å…³é”®å­—æ—¶ï¼Œæœ€å¥½ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆæ¥ç®¡ç†è¿™äº›èµ„æºã€‚æ™ºèƒ½æŒ‡é’ˆä¼šè‡ªåŠ¨åœ¨ä¸å†éœ€è¦æ—¶é‡Šæ”¾å†…å­˜ï¼Œé¿å…äº†å†…å­˜æ³„æ¼çš„é—®é¢˜ã€‚</p></li><li><p>æ‰€æœ‰æƒä¼ é€’ï¼šå½“å¤šä¸ªåœ°æ–¹å…±äº«ä¸€ä¸ªèµ„æºå¹¶ä¸”éœ€è¦æ˜ç¡®çš„æ‰€æœ‰æƒä¼ é€’æ—¶ï¼Œæ™ºèƒ½æŒ‡é’ˆç‰¹åˆ«æœ‰ç”¨ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨<code>std::shared_ptr</code>æ¥å…±äº«èµ„æºï¼Œå¹¶åœ¨æœ€åä¸€ä¸ªå¼•ç”¨é‡Šæ”¾æ—¶è‡ªåŠ¨åˆ é™¤èµ„æºã€‚</p></li><li><p>å¼‚å¸¸å®‰å…¨ï¼šåœ¨ä½¿ç”¨æ™®é€šæŒ‡é’ˆçš„ä»£ç ä¸­ï¼Œå¦‚æœåœ¨åŠ¨æ€åˆ†é…èµ„æºåå‘ç”Ÿå¼‚å¸¸ï¼Œå¯èƒ½ä¼šå¯¼è‡´èµ„æºæ³„æ¼ã€‚ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆå¯ä»¥æ›´å¥½åœ°å¤„ç†å¼‚å¸¸æƒ…å†µï¼Œç¡®ä¿èµ„æºåœ¨é€€å‡ºä½œç”¨åŸŸæ—¶å¾—åˆ°æ­£ç¡®é‡Šæ”¾ã€‚</p></li><li><p>å®¹å™¨å­˜å‚¨ï¼šå¦‚æœè¦åœ¨STLå®¹å™¨ä¸­å­˜å‚¨æŒ‡é’ˆç±»å‹ï¼Œå»ºè®®ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆã€‚STLå®¹å™¨åœ¨å…ƒç´ æ·»åŠ æˆ–åˆ é™¤æ—¶å¯èƒ½ä¼šå¤åˆ¶æˆ–ç§»åŠ¨å…ƒç´ ï¼Œä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆå¯ä»¥æ­£ç¡®ç®¡ç†èµ„æºçš„æ‰€æœ‰æƒã€‚</p></li></ol><p>ä½¿ç”¨æ™®é€šæŒ‡é’ˆçš„æƒ…å†µï¼š</p><ol><li><p>æ¥å£å’Œä¼ ç»ŸAPIï¼šæŸäº›æ¥å£å’Œä¼ ç»Ÿçš„C APIå¯èƒ½è¦æ±‚ä½¿ç”¨åŸå§‹æŒ‡é’ˆï¼Œæ­¤æ—¶ä½ æ— æ³•ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ åº”è¯¥å°å¿ƒç®¡ç†å†…å­˜ï¼Œç¡®ä¿æ‰‹åŠ¨é‡Šæ”¾èµ„æºã€‚</p></li><li><p>ä¸Cä»£ç äº¤äº’ï¼šå½“ä¸Cè¯­è¨€åº“æˆ–ä»£ç è¿›è¡Œäº¤äº’æ—¶ï¼Œæ™®é€šæŒ‡é’ˆæ˜¯å¸¸ç”¨çš„æ–¹å¼ï¼Œå› ä¸ºCè¯­è¨€ä¸æ”¯æŒæ™ºèƒ½æŒ‡é’ˆã€‚</p></li><li><p>ä¸´æ—¶æŒ‡é’ˆï¼šå¯¹äºä¸€äº›ä¸´æ—¶æŒ‡é’ˆï¼Œå…¶ç”Ÿå‘½å‘¨æœŸå¾ˆçŸ­ä¸”ä¸éœ€è¦åŠ¨æ€å†…å­˜ç®¡ç†æ—¶ï¼Œå¯ä»¥ä½¿ç”¨æ™®é€šæŒ‡é’ˆã€‚</p></li><li><p>æœ€ä½å¼€é”€ï¼šåœ¨æŸäº›æ€§èƒ½å…³é”®çš„åœºæ™¯ï¼Œæ™ºèƒ½æŒ‡é’ˆå¯èƒ½å¸¦æ¥é¢å¤–çš„å¼€é”€ï¼Œæ­¤æ—¶ä½¿ç”¨æ™®é€šæŒ‡é’ˆå¯èƒ½æ›´åˆé€‚ã€‚ä½†è¯·æ³¨æ„ï¼Œåœ¨æ€§èƒ½ä¼˜åŒ–å‰ç¡®ä¿ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆæ²¡æœ‰å½±å“åˆ°ä»£ç çš„æ­£ç¡®æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</p></li></ol><p>ç»¼ä¸Šæ‰€è¿°ï¼Œæ™ºèƒ½æŒ‡é’ˆåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹æ˜¯æ¨èçš„å†…å­˜ç®¡ç†æ–¹å¼ï¼Œç‰¹åˆ«æ˜¯åœ¨ç°ä»£C++ä»£ç ä¸­ã€‚ç„¶è€Œï¼Œæœ‰äº›ç‰¹å®šçš„åœºæ™¯å¯èƒ½éœ€è¦ä½¿ç”¨æ™®é€šæŒ‡é’ˆï¼Œä½†åœ¨è¿™ç§æƒ…å†µä¸‹ä½ éœ€è¦æ ¼å¤–å°å¿ƒä»¥é¿å…å†…å­˜æ³„æ¼å’Œæ‚¬æŒ‚æŒ‡é’ˆé—®é¢˜ã€‚</p><h4 id="Hash-mapåŸç†"><a href="#Hash-mapåŸç†" class="headerlink" title="Hash_mapåŸç†"></a>Hash_mapåŸç†</h4><p>Hash_mapåŸºäºHash_mapï¼ˆå“ˆå¸Œè¡¨ï¼‰ã€‚</p><p>å“ˆå¸Œè¡¨åŸºæœ¬åŸç†ï¼šä½¿ç”¨ä¸€ä¸ªä¸‹æ ‡èŒƒå›´è¾ƒå¤§çš„æ•°ç»„æ¥å‚¨å­˜å…ƒç´ ã€‚é‚£æˆ‘ä»¬æ€ä¹ˆæ ¹æ®å…³é”®å­—çŸ¥é“å®ƒåº”è¯¥æ”¾åœ¨æ•°ç»„çš„å“ªä¸ªä½ç½®å‘¢ï¼Ÿè¿™å°±é€šè¿‡å“ˆå¸Œå‡½æ•°ï¼ˆæ•£åˆ—å‡½æ•°ï¼‰æ¥è§£å†³ã€‚å“ˆå¸Œå‡½æ•°ä½¿å¾—æ¯ä¸ªå…ƒç´ çš„å…³é”®å­—éƒ½ä¸ä¸€ä¸ªå‡½æ•°å€¼ï¼ˆå³æ•°ç»„ä¸‹æ ‡ï¼Œhashå€¼ï¼‰ç›¸å¯¹åº”ã€‚ä½†æ˜¯ï¼Œä¸èƒ½ä¿è¯æ¯ä¸ªå…ƒç´ çš„å…³é”®å­—ä¸å‡½æ•°å€¼æ˜¯ä¸€ä¸€å¯¹åº”çš„ï¼Œå› æ­¤ææœ‰å¯èƒ½å‡ºç°å¯¹äºä¸åŒçš„å…ƒç´ ï¼Œå´è®¡ç®—å‡ºäº†ç›¸åŒçš„å‡½æ•°å€¼ï¼Œè¿™å°±äº§ç”Ÿäº†å“ˆå¸Œå†²çªã€‚å› æ­¤â€œç›´æ¥å®šå€â€å’Œâ€œè§£å†³å†²çªâ€æ˜¯å“ˆå¸Œè¡¨çš„ä¸¤å¤§ç‰¹ç‚¹ã€‚</p><p>å“ˆå¸Œå†²çªçš„è§£å†³ä¸»è¦æœ‰ä»¥ä¸‹å››ç§æ–¹æ³•ï¼šå¼€æ”¾åœ°å€æ³•ï¼Œå†å“ˆå¸Œæ³•ï¼Œé“¾åœ°å€æ³•å’Œå»ºç«‹å…¬å…±æº¢å‡ºåŒºã€‚å…³äºè¿™å››ç§æ–¹æ³•çš„è§£é‡Šè§çŸ¥ä¹é“¾æ¥ <a href="https://zhuanlan.zhihu.com/p/29520044">https://zhuanlan.zhihu.com/p/29520044</a></p><h4 id="C-å¤šæ€ä»‹ç»ä¸€ä¸‹"><a href="#C-å¤šæ€ä»‹ç»ä¸€ä¸‹" class="headerlink" title="C++å¤šæ€ä»‹ç»ä¸€ä¸‹"></a>C++å¤šæ€ä»‹ç»ä¸€ä¸‹</h4><p>C++å¤šæ€ä¸»è¦åŒ…æ‹¬é‡è½½ã€è™šå‡½æ•°ã€æ¨¡æ¿ã€‚é‡è½½åŒ…æ‹¬å‡½æ•°é‡è½½å’Œè¿ç®—ç¬¦é‡è½½ï¼Œç¼–è¯‘æœŸï¼Œå³ç¼–è¯‘å™¨åœ¨ç¼–è¯‘é˜¶æ®µå°±ä¼šæ ¹æ®å‡½æ•°è°ƒç”¨çš„ä¸Šä¸‹æ–‡æ¥å†³å®šä½¿ç”¨å“ªä¸€ä¸ªé‡è½½ç‰ˆæœ¬ã€‚è™šå‡½æ•°æ˜¯åœ¨è¿è¡ŒæœŸã€‚é‡è½½å’Œæ¨¡æ¿å±äºé™æ€å¤šæ€ï¼Œè™šå‡½æ•°å±äºåŠ¨æ€å¤šæ€ã€‚é™æ€å¤šæ€ä¸åŠ¨æ€å¤šæ€é ç¼–è¯‘æœŸä¸è¿è¡ŒæœŸåŒºåˆ†ã€‚</p><h4 id="è™šå‡½æ•°ã€çº¯è™šå‡½æ•°åŸç†ï¼Œè™šè¡¨ä»€ä¹ˆæ—¶å€™å»ºç«‹çš„https-zhuanlan-zhihu-com-p-37331092"><a href="#è™šå‡½æ•°ã€çº¯è™šå‡½æ•°åŸç†ï¼Œè™šè¡¨ä»€ä¹ˆæ—¶å€™å»ºç«‹çš„https-zhuanlan-zhihu-com-p-37331092" class="headerlink" title="è™šå‡½æ•°ã€çº¯è™šå‡½æ•°åŸç†ï¼Œè™šè¡¨ä»€ä¹ˆæ—¶å€™å»ºç«‹çš„https://zhuanlan.zhihu.com/p/37331092"></a>è™šå‡½æ•°ã€çº¯è™šå‡½æ•°åŸç†ï¼Œè™šè¡¨ä»€ä¹ˆæ—¶å€™å»ºç«‹çš„<a href="https://zhuanlan.zhihu.com/p/37331092">https://zhuanlan.zhihu.com/p/37331092</a></h4><ul><li>è™šå‡½æ•°ï¼Œåœ¨ç±»æˆå‘˜æ–¹æ³•çš„å£°æ˜ï¼ˆä¸æ˜¯å®šä¹‰ï¼‰è¯­å¥å‰åŠ â€œvirtualâ€ï¼Œå¦‚virtual void func</li><li>çº¯è™šå‡½æ•°ï¼Œåœ¨è™šå‡½æ•°ååŠ â€œ&#x3D;0â€ï¼Œå¦‚virtual void func &#x3D; 0</li><li>å¯¹äºè™šå‡½æ•°ï¼Œå­ç±»å¯ä»¥ï¼ˆä¹Ÿå¯ä»¥ä¸ï¼‰é‡å†™åŸºç±»çš„è™šå‡½æ•°ï¼Œè¯¥è¡Œä¸ºç§°ä¹‹ä¸ºoverride</li><li>å¯¹äºçº¯è™šå‡½æ•°ï¼Œå­ç±»å¿…é¡»æä¾›çº¯è™šå‡½æ•°çš„ä¸ªæ€§åŒ–å®ç°</li></ul><p>åœ¨æ´¾ç”Ÿå­ç±»ä¸­å¯¹è™šå‡½æ•°å’Œçº¯è™šå‡½æ•°çš„ä¸ªæ€§åŒ–å®ç°ï¼Œéƒ½ä½“ç°äº†å¤šæ€ç‰¹æ€§ï¼Œä½†åŒºåˆ«åœ¨äºï¼š</p><ul><li>å­ç±»å¦‚æœä¸æä¾›è™šå‡½æ•°çš„å®ç°ï¼Œå°†ä¼šè‡ªåŠ¨è°ƒç”¨åŸºç±»çš„ç¼ºçœè™šå‡½æ•°å®ç°</li><li>å­ç±»å¦‚æœä¸æä¾›çº¯è™šå‡½æ•°çš„å®ç°ï¼Œå°†ä¼šç¼–è¯‘å¤±è´¥</li></ul><p><strong>å½“ä½¿ç”¨ç±»çš„æŒ‡é’ˆè°ƒç”¨æˆå‘˜å‡½æ•°æ—¶ï¼Œæ™®é€šå‡½æ•°ç”±æŒ‡é’ˆç±»å‹å†³å®šï¼Œè€Œè™šå‡½æ•°åˆ™ç”±æŒ‡é’ˆæŒ‡å‘çš„å®é™…ç±»å‹å†³å®š</strong></p><p>å®ç°è™šå‡½æ•°è¡¨çš„å…³é”®å°±æ˜¯è™šå‡½æ•°è¡¨æŒ‡é’ˆï¼Œè¿™ä¸ªæŒ‡é’ˆæŒ‡å‘ä¸€å¼ åä¸ºè™šå‡½æ•°è¡¨çš„è¡¨ï¼Œä¸ºè¡¨ä¸­çš„æ•°æ®åˆ™ä¸ºå‡½æ•°æŒ‡é’ˆï¼Œå­˜å‚¨äº†è™šå‡½æ•°å…·ä½“å®ç°æ‰€å¯¹åº”çš„ä½ç½®ã€‚å¦å¤–ï¼Œå½“ä¸€ä¸ªç±»æœ‰å¤šä¸ªè™šå‡½æ•°æ—¶ï¼Œä»ç„¶åªæœ‰ä¸€ä¸ªè™šå‡½æ•°æŒ‡é’ˆï¼Œè€Œæ­¤æ—¶çš„è™šå‡½æ•°è¡¨é‡Œä¼šæœ‰å¤šä¸ª<strong>å‡½æ•°æŒ‡é’ˆ</strong>ï¼Œå› æ­¤ï¼Œè™šå‡½æ•°å®ç°çš„è¿‡ç¨‹æ˜¯ï¼š<strong>é€šè¿‡å¯¹è±¡å†…å­˜ä¸­çš„è™šå‡½æ•°æŒ‡é’ˆvptræ‰¾åˆ°è™šå‡½æ•°è¡¨vtblï¼Œå†é€šè¿‡vtblä¸­çš„å‡½æ•°æŒ‡é’ˆæ‰¾åˆ°å¯¹åº”è™šå‡½æ•°çš„å®ç°åŒºåŸŸå¹¶è¿›è¡Œè°ƒç”¨ã€‚</strong>æ‰€ä»¥è™šå‡½æ•°çš„è°ƒç”¨æ—¶ç”±æŒ‡é’ˆæ‰€æŒ‡å‘å†…å­˜å—çš„å…·ä½“ç±»å‹å†³å®šçš„ã€‚</p><h4 id="æ„é€ å‡½æ•°å’Œææ„å‡½æ•°å¯ä»¥æ˜¯è™šå‡½æ•°å—ï¼Ÿ"><a href="#æ„é€ å‡½æ•°å’Œææ„å‡½æ•°å¯ä»¥æ˜¯è™šå‡½æ•°å—ï¼Ÿ" class="headerlink" title="æ„é€ å‡½æ•°å’Œææ„å‡½æ•°å¯ä»¥æ˜¯è™šå‡½æ•°å—ï¼Ÿ"></a>æ„é€ å‡½æ•°å’Œææ„å‡½æ•°å¯ä»¥æ˜¯è™šå‡½æ•°å—ï¼Ÿ</h4><p>ç­”æ¡ˆæ˜¯ï¼šæ„é€ å‡½æ•°ä¸èƒ½æ˜¯è™šå‡½æ•°ï¼Œææ„å‡½æ•°å¯ä»¥æ˜¯è™šå‡½æ•°ä¸”æ¨èæœ€å¥½è®¾ç½®ä¸ºè™šå‡½æ•°ã€‚</p><p>é¦–å…ˆï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“è™šå‡½æ•°çš„å®ç°åˆ™æ˜¯é€šè¿‡å¯¹è±¡å†…å­˜ä¸­çš„vptræ¥å®ç°çš„ã€‚è€Œæ„é€ å‡½æ•°æ˜¯ç”¨æ¥å®ä¾‹åŒ–ä¸€ä¸ªå¯¹è±¡çš„ï¼Œé€šä¿—æ¥è®²å°±æ˜¯ä¸ºå¯¹è±¡å†…å­˜ä¸­çš„å€¼åšåˆå§‹åŒ–æ“ä½œã€‚é‚£ä¹ˆåœ¨æ„é€ å‡½æ•°å®Œæˆä¹‹å‰ï¼Œä¹Ÿå³è¿˜æ²¡æœ‰è¿›è¡Œåˆå§‹åŒ–ï¼Œæ­¤æ—¶vptræ˜¯æ²¡æœ‰å€¼çš„ï¼Œä¹Ÿå°±æ— æ³•é€šè¿‡vptræ‰¾åˆ°ä½œä¸ºæ„é€ å‡½æ•°å’Œè™šå‡½æ•°æ‰€åœ¨çš„ä»£ç åŒºï¼Œæ‰€ä»¥æ„é€ å‡½æ•°åªèƒ½ä»¥æ™®é€šå‡½æ•°çš„å½¢å¼å­˜æ”¾åœ¨ç±»æ‰€æŒ‡å®šçš„ä»£ç åŒºä¸­ã€‚</p><p>è€Œå¯¹äºææ„å‡½æ•°ï¼Œå½“æˆ‘ä»¬delete(a)çš„æ—¶å€™ï¼Œå¦‚æœææ„å‡½æ•°ä¸æ˜¯è™šå‡½æ•°ï¼Œé‚£ä¹ˆè°ƒç”¨çš„å°†ä¼šæ˜¯åŸºç±»baseçš„ææ„å‡½æ•°ã€‚è€Œå½“ç»§æ‰¿çš„æ—¶å€™ï¼Œé€šå¸¸æ´¾ç”Ÿç±»ä¼šåœ¨åŸºç±»çš„åŸºç¡€ä¸Šå®šä¹‰è‡ªå·±çš„æˆå‘˜ï¼Œæ­¤æ—¶æˆ‘ä»¬å½“ç„¶å¸Œæœ›å¯ä»¥è°ƒç”¨æ´¾ç”Ÿç±»çš„ææ„å‡½æ•°å¯¹æ–°å®šä¹‰çš„æˆå‘˜ä¹Ÿè¿›è¡Œææ„ã€‚</p><h4 id="mapä¸ºå•¥ç”¨çº¢é»‘æ ‘ä¸ç”¨avlæ ‘ï¼Ÿ"><a href="#mapä¸ºå•¥ç”¨çº¢é»‘æ ‘ä¸ç”¨avlæ ‘ï¼Ÿ" class="headerlink" title="mapä¸ºå•¥ç”¨çº¢é»‘æ ‘ä¸ç”¨avlæ ‘ï¼Ÿ"></a>mapä¸ºå•¥ç”¨çº¢é»‘æ ‘ä¸ç”¨avlæ ‘ï¼Ÿ</h4><ul><li>å¹³è¡¡è°ƒæ•´æ¬¡æ•°æ›´å°‘</li><li>å†…å­˜ä½¿ç”¨æ›´å°‘ï¼šAVLæ ‘éœ€è¦å­˜å‚¨é¢å¤–çš„å¹³è¡¡å› å­ä¿¡æ¯</li><li>æ›´é€‚åˆäºé¢‘ç¹çš„æ’å…¥å’Œåˆ é™¤æ“ä½œ</li></ul><h4 id="æ€ä¹ˆåˆ¤æ–­mapé‡Œkeyå€¼å­˜ä¸å­˜åœ¨"><a href="#æ€ä¹ˆåˆ¤æ–­mapé‡Œkeyå€¼å­˜ä¸å­˜åœ¨" class="headerlink" title="æ€ä¹ˆåˆ¤æ–­mapé‡Œkeyå€¼å­˜ä¸å­˜åœ¨"></a>æ€ä¹ˆåˆ¤æ–­mapé‡Œkeyå€¼å­˜ä¸å­˜åœ¨</h4><p>c.at(k)è®¿é—®å…³é”®å­—ä¸ºkçš„å…ƒç´ ï¼Œå¦‚æœkä¸åœ¨cä¸­ï¼Œè¿”å›ä¸€ä¸ªout_of_rangeå¼‚å¸¸</p><p>c.find(k)å¦‚æœå­˜åœ¨ï¼Œè¿”å›ä¸€ä¸ªè¿­ä»£å™¨ï¼ŒæŒ‡å‘å…³é”®å­—ä¸ºkçš„å…ƒç´ ï¼›å¦‚æœä¸å­˜åœ¨ï¼Œè¿”å›å°¾åè¿­ä»£å™¨</p><p>c.count(k)ä¸å­˜åœ¨è¿”å›0ï¼Œå­˜åœ¨è¿”å›kå…³é”®å­—çš„æ•°é‡</p><h4 id="å¤šè¿›ç¨‹é€šä¿¡æ–¹å¼"><a href="#å¤šè¿›ç¨‹é€šä¿¡æ–¹å¼" class="headerlink" title="å¤šè¿›ç¨‹é€šä¿¡æ–¹å¼"></a>å¤šè¿›ç¨‹é€šä¿¡æ–¹å¼</h4><p>ç®¡é“ã€å‘½åç®¡é“ã€æ¶ˆæ¯é˜Ÿåˆ—ã€ä¿¡å·é‡ã€å…±äº«å†…å­˜ã€å¥—æ¥å­—ã€RPC</p><p>ç®¡é“ï¼šä¸€ç§æœ€ç®€å•çš„è¿›ç¨‹é—´é€šä¿¡æ–¹å¼ï¼Œé€šå¸¸ç”¨äºçˆ¶å­è¿›ç¨‹é—´é€šä¿¡ã€‚ç®¡é“ä¸­æ•°æ®åªèƒ½æœä¸€ä¸ªæ–¹å‘æµåŠ¨ï¼Œå³ä¸€æ–¹è¯»å¦ä¸€æ–¹å†™ã€‚ç®¡é“é€šè¿‡ç³»ç»Ÿè°ƒç”¨pipe()åˆ›å»ºã€‚</p><p>å‘½åç®¡é“ï¼šä¸€ç§æ›´é€šç”¨çš„è¿›ç¨‹é—´é€šä¿¡æ–¹å¼ï¼Œå®ƒå¯ä»¥åœ¨æ— å…³çš„è¿›ç¨‹ä¹‹é—´è¿›è¡Œé€šä¿¡ã€‚ä¸åŒäºç®¡é“ï¼Œå‘½åç®¡é“é€šè¿‡æ–‡ä»¶ç³»ç»Ÿä¸­çš„è·¯å¾„åæ¥æ ‡è¯†ã€‚å‘½åç®¡é“å¯ä»¥é€šè¿‡ç³»ç»Ÿè°ƒç”¨ <code>mkfifo()</code> åˆ›å»ºã€‚</p><p>ä¿¡å·é‡ï¼šè®²å¥½sem_init(), sem_wait(), sem_post()ç³»ç»Ÿæ•´ä½“è¿ä½œè¿‡ç¨‹å°±å¥½äº†</p><p>å¥—æ¥å­—ï¼šæœåŠ¡å™¨ç›‘å¬ä¸€ä¸ªip+ç«¯å£ï¼Œå®¢æˆ·ç«¯è®¿é—®è¿æ¥</p><h4 id="TCPå’ŒUDPçš„åŒºåˆ«"><a href="#TCPå’ŒUDPçš„åŒºåˆ«" class="headerlink" title="TCPå’ŒUDPçš„åŒºåˆ«"></a>TCPå’ŒUDPçš„åŒºåˆ«</h4><table><thead><tr><th align="left"></th><th align="center">TCP</th><th align="center">UDP</th></tr></thead><tbody><tr><td align="left">å¯é æ€§</td><td align="center">å¯é </td><td align="center">ä¸å¯é </td></tr><tr><td align="left">è¿æ¥</td><td align="center">é¢å‘è¿æ¥</td><td align="center">æ— è¿æ¥</td></tr><tr><td align="left">æ•°æ®ä¼ è¾“æ–¹å¼</td><td align="center">å­—èŠ‚æµ</td><td align="center">æ•°æ®æŠ¥</td></tr><tr><td align="left">åŒå·¥æ€§</td><td align="center">å…¨åŒå·¥</td><td align="center">ä¸€å¯¹ä¸€ã€ä¸€å¯¹å¤šã€å¤šå¯¹ä¸€ã€å¤šå¯¹å¤š</td></tr><tr><td align="left">æµé‡æ§åˆ¶</td><td align="center">æ»‘åŠ¨çª—å£</td><td align="center">æ— </td></tr><tr><td align="left">æ‹¥å¡æ§åˆ¶</td><td align="center">æ…¢å¯åŠ¨ã€æ‹¥å¡é¿å…ã€å¿«é€Ÿé‡ä¼ ã€å¿«é€Ÿå›å¤</td><td align="center">æ— </td></tr><tr><td align="left">æ•ˆç‡</td><td align="center">ä½</td><td align="center">é«˜</td></tr><tr><td align="left">ä¼ è¾“é€Ÿåº¦</td><td align="center">æ…¢</td><td align="center">å¿«</td></tr></tbody></table><h4 id="TCP-x2F-IPåè®®ç»„"><a href="#TCP-x2F-IPåè®®ç»„" class="headerlink" title="TCP&#x2F;IPåè®®ç»„"></a>TCP&#x2F;IPåè®®ç»„</h4><p>IPåè®®ã€TCPåè®®ã€UDPåè®®ã€ICMPåè®®ã€ARPåè®®ã€RARPåè®®</p><h4 id="OSIä¸ƒå±‚"><a href="#OSIä¸ƒå±‚" class="headerlink" title="OSIä¸ƒå±‚"></a>OSIä¸ƒå±‚</h4><p>ç‰©ç†å±‚ã€æ•°æ®é“¾è·¯å±‚ã€ç½‘ç»œå±‚ã€ä¼ è¾“å±‚ã€ä¼šè¯å±‚ã€è¡¨ç¤ºå±‚ã€åº”ç”¨å±‚</p><h4 id="socketç¼–ç¨‹recvå‡½æ•°"><a href="#socketç¼–ç¨‹recvå‡½æ•°" class="headerlink" title="socketç¼–ç¨‹recvå‡½æ•°"></a>socketç¼–ç¨‹recvå‡½æ•°</h4><p>è¿”å›0ï¼šå¯¹æ–¹å…³é—­è¿æ¥</p><p>è¿”å›ç›¸åº”çš„æ¥æ”¶æ•°æ®å¤§å°</p><p>è¿”å›é”™è¯¯ç ï¼šä¼ è¾“å‡ºç°é”™è¯¯</p><h4 id="æ’åºç®—æ³•"><a href="#æ’åºç®—æ³•" class="headerlink" title="æ’åºç®—æ³•"></a>æ’åºç®—æ³•</h4><p>å¿«æ’æ€æƒ³ï¼šé€‰å®šåŸºå‡†å…ƒç´ ï¼Œå°çš„æ”¾ä¸€è¾¹ï¼Œå¤§çš„æ”¾ä¸€è¾¹ï¼Œæœ€ååˆ†æ²»</p><h4 id="HTTPçŠ¶æ€ç -1"><a href="#HTTPçŠ¶æ€ç -1" class="headerlink" title="HTTPçŠ¶æ€ç "></a>HTTPçŠ¶æ€ç </h4><ol><li>1XX - ä¿¡æ¯çŠ¶æ€ç ï¼š<ul><li>100 Continueï¼šæœåŠ¡ç«¯å·²ç»æ”¶åˆ°äº†å®¢æˆ·ç«¯è¯·æ±‚ï¼Œç»§ç»­å‘é€å‰©ä½™éƒ¨åˆ†</li></ul></li><li>2XX - æˆåŠŸçŠ¶æ€ç ï¼š<ul><li>200 OKï¼šè¯·æ±‚æˆåŠŸï¼ŒæœåŠ¡å™¨æˆåŠŸå¤„ç†äº†è¯·æ±‚</li><li>201 Createdï¼šè¯·æ±‚æˆåŠŸï¼Œå¹¶åˆ›å»ºäº†èµ„æº</li><li>204 No Contentï¼šè¯·æ±‚æˆåŠŸï¼Œä½†æ²¡æœ‰è¿”å›å†…å®¹</li></ul></li><li>3XX - é‡å®šå‘çŠ¶æ€ç ï¼š<ul><li>301 Moved Permanentlyï¼šæ°¸ä¹…é‡å®šå‘ï¼Œè¯·æ±‚çš„èµ„æºè¢«æ°¸ä¹…ç§»åˆ°äº†æ–°ä½ç½®</li><li>302 Foundï¼šä¸´æ—¶é‡å®šå‘ï¼Œè¯·æ±‚çš„èµ„æºè¢«ä¸´æ—¶ç§»åˆ°äº†æ–°ä½ç½®</li><li>304 Not Modifiedï¼šå®¢æˆ·ç«¯ç¼“å­˜èµ„æºä»ç„¶æœ‰æ•ˆï¼Œæœªä¿®æ”¹</li></ul></li><li>4XX - å®¢æˆ·ç«¯é”™è¯¯çŠ¶æ€ç ï¼š<ul><li>400 Bad Requestï¼šå®¢æˆ·ç«¯è¯·æ±‚é”™è¯¯ï¼ŒæœåŠ¡å™¨æ— æ³•ç†è§£</li><li>401 Unauthorizedï¼šè¯·æ±‚è¦æ±‚èº«ä»½éªŒè¯ï¼Œå®¢æˆ·ç«¯æœªæä¾›æœ‰æ•ˆçš„èº«ä»½ä¿¡æ¯</li><li>403 Forbiddenï¼šæœåŠ¡å™¨æ‹’ç»è¯·æ±‚ï¼Œæ²¡æœ‰è®¿é—®æƒé™</li><li>404 Not Foundï¼šè¯·æ±‚çš„èµ„æºä¸å­˜åœ¨</li></ul></li><li>5XX - æœåŠ¡å™¨é”™è¯¯çŠ¶æ€ç ï¼š<ul><li>500 Internet Server Errorï¼šæœåŠ¡å™¨å†…éƒ¨é”™è¯¯ï¼Œæ— æ³•å®Œæˆè¯·æ±‚</li><li>502 Bad Gatewayï¼šä½œä¸ºç½‘å…³æˆ–ä»£ç†çš„æœåŠ¡å™¨ä»ä¸Šæ¸¸æœåŠ¡å™¨æ”¶åˆ°æ— æ•ˆå“åº”</li><li>503 Service Unavailableï¼šæœåŠ¡å™¨æš‚æ—¶è¿‡è½½æˆ–ç»´æŠ¤ä¸­ï¼Œæ— æ³•å¤„ç†è¯·æ±‚</li><li>504 Gateway Timeoutï¼šä½œä¸ºç½‘å…³æˆ–ä»£ç†æœåŠ¡å™¨æœªåŠæ—¶ä»ä¸Šæ¸¸æœåŠ¡å™¨æ¥æ”¶å“åº”</li></ul></li></ol><h4 id="DNSè§£æè¿‡ç¨‹"><a href="#DNSè§£æè¿‡ç¨‹" class="headerlink" title="DNSè§£æè¿‡ç¨‹"></a>DNSè§£æè¿‡ç¨‹</h4><p>DNSå°±æ˜¯åŸŸåè§£ææœåŠ¡ï¼ŒæŸ¥è¯¢è¿‡ç¨‹ä¾æ¬¡é€’å¢ã€‚æœ¬åœ°åŸŸåè§£æï¼ˆæ“ä½œç³»ç»Ÿé¦–å…ˆä¼šæŸ¥è¯¢æœ¬åœ°DNSç¼“å­˜ï¼‰ â€”â€“ã€‹æœ¬åœ°åŸŸåæœåŠ¡å™¨æŸ¥è¯¢ â€”â€“ã€‹æ ¹åŸŸåæœåŠ¡å™¨æŸ¥è¯¢ â€”â€“ã€‹é¡¶çº§åŸŸåæœåŠ¡å™¨æŸ¥è¯¢ â€”â€“ã€‹æƒå¨åŸŸåæœåŠ¡å™¨æŸ¥è¯¢ â€”â€“ã€‹è¿”å›ç»“æœã€‚DNSæŸ¥è¯¢å’Œåº”ç­”æŠ¥æ–‡å…·æœ‰ç›¸åŒæ ¼å¼ï¼Œä¸»è¦åŒºåˆ«åœ¨äºæŸäº›å­—æ®µçš„æ ‡è¯†ã€‚ä¸‹é¢è®²å‡ ä¸ªé‡è¦çš„å­—æ®µã€‚</p><ul><li>16ä½æ ‡è¯†ï¼šç”¨äºæ ‡è®°ä¸€å¯¹DNSæŸ¥è¯¢å’Œåº”ç­”ï¼Œä»¥æ­¤åŒºåˆ†ä¸€ä¸ªDNSåº”ç­”æ˜¯å“ªä¸€ä¸ªDNSæŸ¥è¯¢çš„å›åº”</li><li>16ä½æ ‡å¿—<ul><li>QRï¼šæŸ¥è¯¢æŠ¥æ–‡ï¼ˆ0ï¼‰&#x2F;åº”ç­”æŠ¥æ–‡ï¼ˆ1ï¼‰</li><li>opcodeï¼šæ ‡å‡†æŸ¥è¯¢ï¼ˆ0ï¼‰&#x2F;    åå‘æŸ¥è¯¢ï¼ˆ1ï¼‰å°±æ˜¯æ˜¯é€šè¿‡åŸŸåè·å–ipåœ°å€è¿˜æ˜¯é€šè¿‡ipåœ°å€è·å–åŸŸå</li></ul></li></ul><h4 id="TCPä¸ºä»€ä¹ˆéœ€è¦å››æ¬¡æŒ¥æ‰‹ï¼Œä¸‰æ¬¡æŒ¥æ‰‹æœ‰ä»€ä¹ˆé—®é¢˜"><a href="#TCPä¸ºä»€ä¹ˆéœ€è¦å››æ¬¡æŒ¥æ‰‹ï¼Œä¸‰æ¬¡æŒ¥æ‰‹æœ‰ä»€ä¹ˆé—®é¢˜" class="headerlink" title="TCPä¸ºä»€ä¹ˆéœ€è¦å››æ¬¡æŒ¥æ‰‹ï¼Œä¸‰æ¬¡æŒ¥æ‰‹æœ‰ä»€ä¹ˆé—®é¢˜"></a>TCPä¸ºä»€ä¹ˆéœ€è¦å››æ¬¡æŒ¥æ‰‹ï¼Œä¸‰æ¬¡æŒ¥æ‰‹æœ‰ä»€ä¹ˆé—®é¢˜</h4><ol><li>å®¢æˆ·ç«¯æœ€åä¸€ä¸ªACKå¯èƒ½ä¼šä¸¢å¤±ï¼Œè¿™æ ·æœåŠ¡ç«¯å°±æ— æ³•æ­£å¸¸è¿›å…¥CLOSEDçŠ¶æ€ã€‚äºæ˜¯Bä¼šé‡ä¼ è¯·æ±‚é‡Šæ”¾çš„æŠ¥æ–‡ï¼Œè€Œæ­¤æ—¶å¦‚æœAå·²ç»å…³é—­äº†ï¼Œé‚£å°±æ”¶ä¸åˆ°Bçš„é‡ä¼ è¯·æ±‚ï¼Œå°±ä¼šå¯¼è‡´Bæ— æ³•æ­£å¸¸é‡Šæ”¾ã€‚è€Œå¦‚æœAè¿˜åœ¨ç­‰å¾…æ—¶é—´å†…ï¼Œå°±ä¼šæ”¶åˆ°Bçš„é‡ä¼ ï¼Œç„¶åè¿›è¡Œåº”ç­”ï¼Œè¿™æ ·Bå°±å¯ä»¥è¿›å…¥CLOSEDçŠ¶æ€</li><li>å¦‚æœä¸‰æ¬¡æŒ¥æ‰‹çš„è¯ï¼ŒæœåŠ¡ç«¯æ”¶åˆ°æ¥è‡ªå®¢æˆ·ç«¯çš„FINè¯·æ±‚åï¼Œéœ€è¦åŒæ—¶å›å¤ACKå’Œå‘é€FINæ–­å¼€è¿æ¥è¯·æ±‚ã€‚ä½†æ˜¯åœ¨TCPè¿æ¥ä¸­æ˜¯æœ‰ä¸€ä¸ªåŠå…³é—­çŠ¶æ€çš„ï¼Œä¹Ÿå°±æ˜¯æœåŠ¡ç«¯å…¶å®è¿˜æ˜¯å¯ä»¥ç»§ç»­å‘é€æ•°æ®çš„ï¼Œå¦‚æœä¸‰æ¬¡æŒ¥æ‰‹ï¼Œå°±æ— æ³•åšåˆ°æœåŠ¡å™¨å†å‘é€æ•°æ®äº†ã€‚</li></ol><h4 id="TCPä¼ è¾“ä¸ºä»€ä¹ˆæ˜¯å¯é çš„"><a href="#TCPä¼ è¾“ä¸ºä»€ä¹ˆæ˜¯å¯é çš„" class="headerlink" title="TCPä¼ è¾“ä¸ºä»€ä¹ˆæ˜¯å¯é çš„"></a>TCPä¼ è¾“ä¸ºä»€ä¹ˆæ˜¯å¯é çš„</h4><ul><li>ç¡®è®¤ä¸é‡ä¼ ï¼šå¦‚æœä¸€å®šæ—¶é—´å†…æœªæ”¶åˆ°ACKï¼Œåˆ™ä¼šé‡ä¼ </li><li>åºåˆ—å·ä¸é¡ºåºæ€§ï¼šTCPä¸ºæ¯ä¸€ä¸ªæ•°æ®åŒ…åˆ†é…ä¸€ä¸ªåºåˆ—å·ï¼Œæ¥æ”¶ç«¯ä¼šè¿›è¡Œæ•°æ®åŒ…é‡ç»„</li><li>æµé‡æ§åˆ¶</li><li>æ‹¥å¡æ§åˆ¶</li><li>è¿æ¥ç®¡ç†ï¼šä¸‰æ¬¡æ¡æ‰‹ä¸å››æ¬¡æŒ¥æ‰‹</li><li>è¶…æ—¶ä¸é‡è¯•</li></ul><h4 id="çº¿ç¨‹çš„çŠ¶æ€"><a href="#çº¿ç¨‹çš„çŠ¶æ€" class="headerlink" title="çº¿ç¨‹çš„çŠ¶æ€"></a>çº¿ç¨‹çš„çŠ¶æ€</h4><p>æ–°å»ºã€å°±ç»ªã€è¿è¡Œã€é˜»å¡ã€ç­‰å¾…ã€ç»ˆæ­¢</p><h4 id="æ­»é”äº§ç”Ÿçš„æ¡ä»¶"><a href="#æ­»é”äº§ç”Ÿçš„æ¡ä»¶" class="headerlink" title="æ­»é”äº§ç”Ÿçš„æ¡ä»¶"></a>æ­»é”äº§ç”Ÿçš„æ¡ä»¶</h4><p>æ­»é”å‘ç”Ÿçš„å¿…è¦æ¡ä»¶ï¼Œé€šå¸¸è¢«ç§°ä¸ºæ­»é”çš„å››ä¸ªæ¡ä»¶ï¼Œåˆ†åˆ«æ˜¯ï¼š</p><ol><li><strong>äº’æ–¥æ¡ä»¶ï¼ˆMutual Exclusionï¼‰ï¼š</strong> æŒ‡æŸä¸ªèµ„æºåœ¨ä¸€æ®µæ—¶é—´å†…åªèƒ½è¢«ä¸€ä¸ªçº¿ç¨‹æˆ–è¿›ç¨‹å ç”¨ï¼Œå…¶ä»–çº¿ç¨‹æˆ–è¿›ç¨‹éœ€è¦ç­‰å¾…èµ„æºé‡Šæ”¾æ‰èƒ½ç»§ç»­æ‰§è¡Œã€‚</li><li><strong>è¯·æ±‚ä¸ä¿æŒæ¡ä»¶ï¼ˆHold and Waitï¼‰ï¼š</strong> æŒ‡çº¿ç¨‹åœ¨ä¿æŒè‡³å°‘ä¸€ä¸ªèµ„æºçš„åŒæ—¶ï¼Œè¿˜è¯·æ±‚å…¶ä»–èµ„æºï¼Œè€Œè¿™äº›èµ„æºå¯èƒ½è¢«å…¶ä»–çº¿ç¨‹å ç”¨ï¼Œå¯¼è‡´è¯·æ±‚é˜»å¡ã€‚</li><li><strong>ä¸å‰¥å¤ºæ¡ä»¶ï¼ˆNo Preemptionï¼‰ï¼š</strong> æŒ‡èµ„æºåªèƒ½ç”±å æœ‰å®ƒçš„çº¿ç¨‹æ˜¾å¼é‡Šæ”¾ï¼Œå…¶ä»–çº¿ç¨‹ä¸èƒ½å¼ºè¡ŒæŠ¢å èµ„æºã€‚</li><li><strong>å¾ªç¯ç­‰å¾…æ¡ä»¶ï¼ˆCircular Waitï¼‰ï¼š</strong> æŒ‡å¤šä¸ªçº¿ç¨‹å½¢æˆä¸€ä¸ªå¾ªç¯ï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½åœ¨ç­‰å¾…ä¸‹ä¸€ä¸ªçº¿ç¨‹æ‰€æŒæœ‰çš„èµ„æºï¼Œå¯¼è‡´ä¸€ä¸ªé—­ç¯çš„ç­‰å¾…çŠ¶æ€ã€‚</li></ol><h4 id="æ­»é”è§£å†³æ–¹æ¡ˆ"><a href="#æ­»é”è§£å†³æ–¹æ¡ˆ" class="headerlink" title="æ­»é”è§£å†³æ–¹æ¡ˆ"></a>æ­»é”è§£å†³æ–¹æ¡ˆ</h4><ul><li>ç³»ç»Ÿé‡æ–°å¯åŠ¨</li><li>æ’¤é”€è¿›ç¨‹ã€å‰¥å¤ºèµ„æº</li><li>è¿›ç¨‹å›é€€ç­–ç•¥ï¼Œå³è®©å‚ä¸æ­»é”çš„è¿›ç¨‹å›é€€åˆ°æ²¡æœ‰å‘ç”Ÿæ­»é”å‰æŸä¸€ç‚¹å¤„ã€‚</li></ul><h4 id="æ ‘çš„çŸ¥è¯†"><a href="#æ ‘çš„çŸ¥è¯†" class="headerlink" title="æ ‘çš„çŸ¥è¯†"></a>æ ‘çš„çŸ¥è¯†</h4><p><a href="https://oi-wiki.org/ds/bplus-tree/">https://oi-wiki.org/ds/bplus-tree/</a></p><h4 id="Linux-APIè°ƒç”¨è¿”å›å€¼æ±‡æ€»"><a href="#Linux-APIè°ƒç”¨è¿”å›å€¼æ±‡æ€»" class="headerlink" title="Linux APIè°ƒç”¨è¿”å›å€¼æ±‡æ€»"></a>Linux APIè°ƒç”¨è¿”å›å€¼æ±‡æ€»</h4><p>int pthread_createï¼šæˆåŠŸæ—¶è¿”å›0ï¼Œå¤±è´¥æ—¶è¿”å›é”™è¯¯ç </p><p>void pthread_exitï¼šä¸ä¼šå¤±è´¥</p><p>int pthread_join ( pthread_t thread, void** retval)ï¼šæˆåŠŸæ—¶è¿”å›0ï¼Œå¤±è´¥æ—¶è¿”å›é”™è¯¯ç ã€‚é”™è¯¯ç ï¼šEDEADLKï¼šå¯èƒ½å¼•èµ·æ­»é”ï¼Œæ¯”å¦‚ä¸¤ä¸ªçº¿ç¨‹äº’ç›¸é’ˆå¯¹å¯¹æ–¹è°ƒç”¨pthread_joinï¼Œæˆ–è€…çº¿ç¨‹å¯¹è‡ªèº«è°ƒç”¨pthread_joinï¼›EINVALï¼šç›®æ ‡çº¿ç¨‹æ˜¯ä¸å¯å›æ”¶çš„ï¼Œæˆ–è€…å·²ç»æœ‰å…¶ä»–çº¿ç¨‹åœ¨å›æ”¶è¯¥ç›®æ ‡çº¿ç¨‹ï¼›ESRCHï¼šç›®æ ‡çº¿ç¨‹ä¸å­˜åœ¨ã€‚</p><p>int sem_init( sem_t* sem, int pshared, unsigned int value )</p><p>int sem_destroy( sem_t* sem )</p><p>int sem_wait( sem_t* sem)</p><p>int sem_trywait( sem_t* sem )</p><p>int sem_post( sem_t* sem )ï¼šä»¥ä¸Šäº”ä¸ªæˆåŠŸæ—¶è¿”å›0ï¼Œ å¤±è´¥æ—¶è¿”å›-1å¹¶è®¾ç½®errno</p><h4 id="DNSçš„è§£æè¿‡ç¨‹"><a href="#DNSçš„è§£æè¿‡ç¨‹" class="headerlink" title="DNSçš„è§£æè¿‡ç¨‹"></a>DNSçš„è§£æè¿‡ç¨‹</h4><p>DNSæ˜¯å®ç°åŸŸåå’ŒIPåœ°å€ç›¸äº’æ˜ å°„çš„ä¸€ä¸ªåˆ†å¸ƒå¼æ•°æ®åº“ã€‚DNSè§£æè¿‡ç¨‹ä¸»è¦åŒ…æ‹¬ä»¥ä¸‹æ­¥éª¤</p><ol><li>æœ¬åœ°ç¼“å­˜æŸ¥è¯¢ï¼šå½“ç”¨æˆ·é€šè¿‡æµè§ˆå™¨è®¿é—®æŸåŸŸåæ—¶ï¼Œæµè§ˆå™¨ä¼šé¦–å…ˆåœ¨è‡ªå·±çš„ç¼“å­˜é‡ŒæŸ¥è¯¢æ˜¯å¦æœ‰è¯¥åŸŸåå¯¹åº”çš„IPåœ°å€ã€‚</li><li>æœ¬åœ°ç³»ç»ŸæŸ¥è¯¢ï¼šæŸ¥çœ‹æœ¬è®¡ç®—æœºç³»ç»ŸHostæ–‡ä»¶DNSç¼“å­˜æ˜¯å¦æœ‰å¯¹åº”DNSç¼“å­˜</li><li>æŸ¥çœ‹è·¯ç”±å™¨ç¼“å­˜</li><li>æŸ¥è¯¢ISP DNSç¼“å­˜ï¼šä¹Ÿç§°æœ¬åœ°åŸŸåæœåŠ¡å™¨æŸ¥è¯¢ï¼Œè®¡ç®—æœºä¼šå‘ä½ çš„ISPï¼ˆäº’è”ç½‘æœåŠ¡æä¾›å•†ï¼‰åˆ†é…çš„æœ¬åœ°åŸŸåæœåŠ¡å™¨å‘å‡ºæŸ¥è¯¢è¯·æ±‚</li><li>æ ¹åŸŸåæœåŠ¡å™¨</li><li>é¡¶çº§åŸŸåæœåŠ¡å™¨ï¼šæ ¹åŸŸåæœåŠ¡å™¨å¹¶ä¸ä¼šç›´æ¥è¿”å›ç”¨æˆ·IPåœ°å€ï¼Œè€Œæ˜¯ä¼šæŒ‡å‘æŸ¥è¯¢è¯·æ±‚å¯¹åº”çš„é¡¶çº§åŸŸåæœåŠ¡å™¨</li><li>æƒå¨åŸŸåæœåŠ¡å™¨ï¼šé¡¶çº§åŸŸåæœåŠ¡å™¨ä¼šæŒ‡å‘åŸŸåçš„æƒå¨åŸŸåæœåŠ¡å™¨ï¼Œè¿™äº›æœåŠ¡å™¨ç®¡ç†ç‰¹å®šçš„åŸŸåçš„DNSæœåŠ¡ã€‚</li></ol><h4 id="TCPä¼ è¾“ä¸ºä»€ä¹ˆæ˜¯å¯é çš„-1"><a href="#TCPä¼ è¾“ä¸ºä»€ä¹ˆæ˜¯å¯é çš„-1" class="headerlink" title="TCPä¼ è¾“ä¸ºä»€ä¹ˆæ˜¯å¯é çš„"></a>TCPä¼ è¾“ä¸ºä»€ä¹ˆæ˜¯å¯é çš„</h4><p>æ€»ç»“ä¸‹æ¥ä¸»è¦åŒ…æ‹¬ä¸‰ä¸ªæ–¹é¢ï¼š</p><ul><li>æ£€éªŒå’Œ</li><li>ç¡®è®¤åº”ç­”ï¼ˆACKå’Œåºåˆ—å·ä¸€åº”ä¸€ç­”ï¼‰</li><li>è¶…æ—¶é‡ä¼ </li></ul><h4 id="NATåè®®å’Œè·¨åŸŸï¼ˆä¸äº†è§£ï¼‰"><a href="#NATåè®®å’Œè·¨åŸŸï¼ˆä¸äº†è§£ï¼‰" class="headerlink" title="NATåè®®å’Œè·¨åŸŸï¼ˆä¸äº†è§£ï¼‰"></a>NATåè®®å’Œè·¨åŸŸï¼ˆä¸äº†è§£ï¼‰</h4><h4 id="GETå’ŒPOSTåŒºåˆ«"><a href="#GETå’ŒPOSTåŒºåˆ«" class="headerlink" title="GETå’ŒPOSTåŒºåˆ«"></a>GETå’ŒPOSTåŒºåˆ«</h4><p>æœ€æ˜æ˜¾çš„ä¸€ä¸ªåŒºåˆ«å°±æ˜¯GETè¯·æ±‚ä¼šæŠŠå‚æ•°æ”¾åœ¨URLï¼ˆç»Ÿä¸€èµ„æºå®šä½ç¬¦ï¼‰ä¸­ï¼ŒPOSTä¼šæŠŠå‚æ•°æ”¾åœ¨è¯·æ±‚ä½“ä¸­ã€‚</p><p>æ•°æ®å¤§å°é™åˆ¶ï¼šGETè¯·æ±‚æŠŠå‚æ•°æ”¾åœ¨URLä¸­ï¼ŒGETè¯·æ±‚æ•°æ®å¤§å°æ”¶åˆ°URLé•¿åº¦é™åˆ¶ã€‚POSTè¯·æ±‚åˆ™ä¸ä¼š</p><p>å¹‚ç­‰æ€§ï¼šGETè¯·æ±‚æ¯æ¬¡ç›¸åŒè¯·æ±‚è¿”å›çš„ç»“æœéƒ½ä¸€æ ·ï¼Œå¤šæ¬¡é‡å¤è¯·æ±‚ä¸ä¼šå¯¹èµ„æºäº§ç”Ÿå½±å“ã€‚POSTè¯·æ±‚åˆ™ç›¸å</p><p>å®‰å…¨æ€§ï¼šPOSTæ›´å®‰å…¨ï¼Œå‚æ•°æ²¡æœ‰æš´éœ²åœ¨URLä¸Š</p><p>ç¼“å­˜ï¼šGETè¯·æ±‚å¯ä»¥è¢«æµè§ˆå™¨ç¼“å­˜ï¼ŒPOSTè¯·æ±‚ä¸ä¼šè¢«æµè§ˆå™¨ç¼“å­˜</p><h4 id="å†™ä¸€æ®µæ­»é”çš„ä»£ç "><a href="#å†™ä¸€æ®µæ­»é”çš„ä»£ç " class="headerlink" title="å†™ä¸€æ®µæ­»é”çš„ä»£ç "></a>å†™ä¸€æ®µæ­»é”çš„ä»£ç </h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;pthread.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> a = <span class="number">0</span>, b = <span class="number">0</span>;</span><br><span class="line"><span class="type">pthread_mutex_t</span> mutex_a;</span><br><span class="line"><span class="type">pthread_mutex_t</span> mutex_b;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span>* <span class="title">another</span><span class="params">(<span class="type">void</span>* arg)</span></span>&#123;</span><br><span class="line">    <span class="built_in">pthread_mutex_lock</span>(&amp;mutex_a);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;in child thread, get mutex a\n&quot;</span>);</span><br><span class="line">    <span class="built_in">sleep</span>(<span class="number">5</span>);</span><br><span class="line">    a++;</span><br><span class="line">    <span class="built_in">pthread_mutex_lock</span>(&amp;mutex_b);</span><br><span class="line">    b += a;</span><br><span class="line">    <span class="built_in">pthread_mutex_unlock</span>(&amp;mutex_b);</span><br><span class="line">    <span class="built_in">pthread_mutex_unlock</span>(&amp;mutex_a);</span><br><span class="line">    <span class="built_in">pthread_exit</span>(<span class="literal">NULL</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="type">pthread_t</span> id;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">pthread_mutex_init</span>(&amp;mutex_a, <span class="literal">NULL</span>);</span><br><span class="line">    <span class="built_in">pthread_mutex_init</span>(&amp;mutex_b, <span class="literal">NULL</span>);</span><br><span class="line">    <span class="built_in">pthread_create</span>(&amp;id, <span class="literal">NULL</span>, another, <span class="literal">NULL</span>);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">pthread_mutex_lock</span>(&amp;mutex_b);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;in parent thread, get mutex b\n&quot;</span>);</span><br><span class="line">    <span class="built_in">sleep</span>(<span class="number">5</span>);</span><br><span class="line">    ++b;</span><br><span class="line">    <span class="built_in">pthread_mutex_lock</span>(&amp;mutex_a);</span><br><span class="line">    a += b;</span><br><span class="line">    <span class="built_in">pthread_mutex_unlock</span>(&amp;mutex_a);</span><br><span class="line">    <span class="built_in">pthread_mutex_unlock</span>(&amp;mutex_b);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">pthread_join</span>(id, <span class="literal">NULL</span>);</span><br><span class="line">    <span class="built_in">pthread_mutex_destroy</span>(&amp;mutex_a);</span><br><span class="line">    <span class="built_in">pthread_mutex_destroy</span>(&amp;mutex_b);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;pro is end\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="åˆ é™¤å­—ç¬¦ä¸²å¤´å°¾ç©ºæ ¼ä»£ç "><a href="#åˆ é™¤å­—ç¬¦ä¸²å¤´å°¾ç©ºæ ¼ä»£ç " class="headerlink" title="åˆ é™¤å­—ç¬¦ä¸²å¤´å°¾ç©ºæ ¼ä»£ç "></a>åˆ é™¤å­—ç¬¦ä¸²å¤´å°¾ç©ºæ ¼ä»£ç </h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    std::string s;</span><br><span class="line">    std::string tmp;</span><br><span class="line">    <span class="built_in">getline</span>(std::cin, s);   <span class="comment">//è¿™é‡Œå¾ˆé‡è¦å“¦ï¼Œå¦‚æœç”¨cinï¼Œâ€œhello worldâ€ä¼šè¢«æˆªæ–­æˆhello</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; s.<span class="built_in">size</span>(); ++i)&#123;</span><br><span class="line">        <span class="keyword">if</span>(s[i] == <span class="string">&#x27; &#x27;</span>)&#123;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        s = s.<span class="built_in">substr</span>(i, s.<span class="built_in">size</span>() - i);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = s.<span class="built_in">size</span>() - <span class="number">1</span>; i &gt;= <span class="number">0</span>; --i)&#123;</span><br><span class="line">        <span class="keyword">if</span>(s[i] == <span class="string">&#x27; &#x27;</span>)&#123;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        s = s.<span class="built_in">substr</span>(<span class="number">0</span>, i + <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    std::cout &lt;&lt; s &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="shared-ptræ˜¯çº¿ç¨‹å®‰å…¨çš„å—ï¼Ÿhttps-cloud-tencent-com-developer-article-1654442"><a href="#shared-ptræ˜¯çº¿ç¨‹å®‰å…¨çš„å—ï¼Ÿhttps-cloud-tencent-com-developer-article-1654442" class="headerlink" title="shared_ptræ˜¯çº¿ç¨‹å®‰å…¨çš„å—ï¼Ÿhttps://cloud.tencent.com/developer/article/1654442"></a>shared_ptræ˜¯çº¿ç¨‹å®‰å…¨çš„å—ï¼Ÿ<a href="https://cloud.tencent.com/developer/article/1654442">https://cloud.tencent.com/developer/article/1654442</a></h4><ul><li>å¤šçº¿ç¨‹åŒæ—¶è¯»ä¸€ä¸ªshared_ptrå¯¹è±¡æ˜¯å®‰å…¨çš„</li><li>å¤šçº¿ç¨‹åŒæ—¶å¯¹ä¸€ä¸ªshared_ptrå¯¹è±¡è¿›è¡Œè¯»å’Œå†™æ˜¯ä¸å®‰å…¨çš„ï¼Œéœ€è¦åŠ é”</li></ul><p>è¿™é‡Œç»™å‡ºä¸€ä¸ªä¼ªä»£ç çš„ç®€å•ä¾‹å­</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">shared_ptr&lt;Foo&gt; g(new Foo1);   // çº¿ç¨‹ä¹‹é—´å…±äº«çš„shared_ptr</span><br><span class="line">shared_ptr&lt;Foo&gt; x;     // çº¿ç¨‹Açš„å±€éƒ¨å˜é‡</span><br><span class="line">shared_ptr&lt;Foo&gt; n(new Foo2);   // çº¿ç¨‹Bçš„å±€éƒ¨å˜é‡</span><br><span class="line">---------------------------------------------------------</span><br><span class="line">çº¿ç¨‹A</span><br><span class="line">x = g;</span><br><span class="line">---------------------------------------------------------</span><br><span class="line">çº¿ç¨‹B</span><br><span class="line">g = n;</span><br><span class="line">---------------------------------------------------------</span><br><span class="line">æµ‹è¯•åœºæ™¯ï¼š</span><br><span class="line"></span><br><span class="line">çº¿ç¨‹A </span><br><span class="line">  æ™ºèƒ½æŒ‡é’ˆx è¯»å–Foo1,ç„¶åè¿˜é‡ç½®Foo1è®¡æ•°ã€‚</span><br><span class="line"></span><br><span class="line">çº¿ç¨‹ B:</span><br><span class="line"> é”€æ¯äº†Foo1</span><br><span class="line">çº¿ç¨‹A</span><br><span class="line">é‡ç½®è®¡æ•°æ—¶ï¼Œfoo1å·²ç»è¢«é”€æ¯ã€‚</span><br></pre></td></tr></table></figure><h4 id="mysqlè¯»å†™é”æ€ä¹ˆå®ç°-mysql-è¯»å†™é”å’Œäº’æ–¥é”çš„åŒºåˆ«https-blog-51cto-com-u-16099299-7031260"><a href="#mysqlè¯»å†™é”æ€ä¹ˆå®ç°-mysql-è¯»å†™é”å’Œäº’æ–¥é”çš„åŒºåˆ«https-blog-51cto-com-u-16099299-7031260" class="headerlink" title="mysqlè¯»å†™é”æ€ä¹ˆå®ç° mysql è¯»å†™é”å’Œäº’æ–¥é”çš„åŒºåˆ«https://blog.51cto.com/u_16099299/7031260"></a>mysqlè¯»å†™é”æ€ä¹ˆå®ç° mysql è¯»å†™é”å’Œäº’æ–¥é”çš„åŒºåˆ«<a href="https://blog.51cto.com/u_16099299/7031260">https://blog.51cto.com/u_16099299/7031260</a></h4><ul><li>è¯·ä½ è®²è¿°ä¸€ä¸‹äº’æ–¥é”æœºåˆ¶ï¼Œä»¥åŠäº’æ–¥é”å’Œè¯»å†™é”çš„åŒºåˆ«<ul><li>äº’æ–¥é”ï¼ˆmutexï¼‰ï¼Œç”¨äºä¿è¯åœ¨ä»»ä½•æ—¶åˆ»ï¼Œéƒ½åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹è®¿é—®è¯¥å¯¹è±¡ã€‚å½“è·å–é”æ“ä½œå¤±è´¥æ—¶ï¼Œçº¿ç¨‹ä¼šè¿›å…¥ç¡çœ ï¼Œç­‰å¾…é”é‡Šæ”¾æ—¶è¢«å”¤é†’ã€‚</li><li>è¯»å†™é”ï¼ˆrwlockï¼‰ï¼Œåˆ†ä¸ºè¯»é”å’Œå†™é”ã€‚å¤„äºè¯»æ“ä½œçš„æ—¶å€™ï¼Œå¯ä»¥å…è®¸å¤šä¸ªçº¿ç¨‹åŒæ—¶è·å¾—è¯»æ“ä½œã€‚ä½†æ˜¯åŒä¸€æ—¶åˆ»åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹å¯ä»¥è·å¾—å†™é”ã€‚å…¶ä»–è·å¾—å†™é”å¤±è´¥çš„çº¿ç¨‹å°†ä¼šè¿›å…¥ç¡çœ çŠ¶æ€ï¼Œç›´åˆ°å†™é”é‡Šæ”¾æ—¶è¢«å”¤é†’ã€‚æ³¨æ„;å†™é”ä¼šé˜»å¡å…¶ä»–è¯»å†™é”ã€‚å½“æœ‰ä¸€ä¸ªçº¿ç¨‹è·å¾—å†™é”åœ¨å†™æ—¶ï¼Œè¯»é”ä¹Ÿä¸èƒ½è¢«å…¶ä»–çº¿ç¨‹è·å–ï¼›å†™è€…ä¼˜äºè¯»è€…ï¼ˆä¸€æ—¦æœ‰å†™è€…ï¼Œåˆ™åç»­è¯»è€…å¿…é¡»ç­‰å¾…ï¼Œå”¤é†’æ—¶ä¼˜å…ˆè€ƒè™‘å†™è€…ï¼‰ã€‚é€‚ç”¨äºè¯»å–æ•°æ®çš„é¢‘ç‡è¿œè¿œå¤§äºå†™æ•°æ®çš„é¢‘ç‡çš„åœºåˆã€‚<br>è¯»å†™é”ï¼šåŒºåˆ†è¯»è€…å’Œå†™è€…ï¼Œè€Œäº’æ–¥é”ä¸åŒºåˆ†ï¼Œäº’æ–¥é”åªå…è®¸åŒä¸€æ—¶é—´åªå…è®¸ä¸€ä¸ªçº¿ç¨‹è®¿é—®è¯¥å¯¹è±¡ï¼Œæ— è®ºè¯»å†™ï¼›è¯»å†™é”åŒä¸€æ—¶é—´å†…åªå…è®¸ä¸€ä¸ªå†™è€…ï¼Œä½†æ˜¯å…è®¸å¤šä¸ªè¯»è€…åŒæ—¶è¯»å¯¹è±¡ã€‚</li></ul></li><li>Linuxä¸­çš„å››ç§é”æœºåˆ¶<ul><li>äº’æ–¥é”ï¼šåœ¨åŒä¸€æ—¶é—´å†…åªå…è®¸ä¸€ä¸ªçº¿ç¨‹è®¿é—®å¯¹è±¡</li><li>è¯»å†™é”ï¼šåŒä¸€æ—¶é—´å†…å…è®¸å¤šä¸ªè¯»è€…åŒæ—¶è¯»å¯¹è±¡ï¼ŒåŒä¸€æ—¶é—´å†…åªå…è®¸ä¸€ä¸ªå†™è€…è®¿é—®å¯¹è±¡ï¼Œä¸”å½“æœ‰ä¸€ä¸ªçº¿ç¨‹è·å¾—å†™æ“ä½œçš„æ—¶å€™ï¼Œè¯»é”ä¹Ÿä¸èƒ½è¢«å…¶ä»–çš„çº¿ç¨‹è·å–ï¼Œå†™è€…ä¼˜äºè¯»è€…ï¼Œå”¤é†’æ—¶å…ˆå”¤é†’å†™è€…ã€‚</li><li>è‡ªæ—‹é”ï¼šåœ¨ä»»ä½•æ—¶åˆ»å†…è‡ªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹è®¿é—®èµ„æºï¼Œä½†æ˜¯å½“è·å–é”æ“ä½œå¤±è´¥æ—¶ï¼Œä¸ä¼šè¿›å…¥ç¡çœ çŠ¶æ€è€Œæ˜¯ä¼šåŸåœ°è‡ªæ—‹ï¼Œç›´åˆ°é”è¢«é‡Šæ”¾ï¼Œè¿™æ ·å‡å°‘äº†çº¿ç¨‹ä»ç¡çœ çŠ¶æ€åˆ°è¢«å”¤é†’çŠ¶æ€çš„èµ„æºæ¶ˆè€—ï¼Œåœ¨åŠ é”æ—¶é—´çŸ­æš‚çš„æƒ…å†µä¸‹ä½¿ç”¨ä¼šæé«˜æ•ˆç‡ã€‚ä½†æ˜¯åŠ é”æ—¶é—´è¿‡é•¿ä¼šéå¸¸æµªè´¹CPU</li><li>RCUï¼ˆread-copy-updateï¼‰ï¼šåœ¨ä¿®æ”¹æ•°æ®æ—¶ï¼Œé¦–å…ˆéœ€è¦è¯»å–æ•°æ®ï¼Œç„¶åç”Ÿæˆä¸€ä¸ªå‰¯æœ¬ï¼Œå¯¹å‰¯æœ¬è¿›è¡Œä¿®æ”¹ï¼Œç„¶ååœ¨å°†è€æ•°æ®updateæˆæ–°æ•°æ®ã€‚åœ¨RCUçš„æ—¶å€™è¯»è€…å‡ ä¹ä¸éœ€è¦åŒæ­¥å¼€é”€ï¼Œå³ä¸éœ€è¦è·å–é”ï¼Œä¹Ÿä¸é€‚ç”¨åŸå­æŒ‡ä»¤ï¼Œä¸ä¼šå¯¼è‡´ç«äº‰å› æ­¤ä¸ç”¨è€ƒè™‘æ­»é”é—®é¢˜äº†ã€‚ä½†æ˜¯å¯¹äºå†™è€…çš„åŒæ­¥å¼€é”€æ¯”è¾ƒå¤§ï¼Œä»–éœ€è¦å¤åˆ¶è¢«ä¿®æ”¹çš„æ•°æ®ï¼Œè¿˜å¿…é¡»ä½¿ç”¨é”æœºåˆ¶åŒæ­¥å¹¶è¡Œå…¶ä»–å†™è€…çš„æ”¹æ“ä½œï¼Œåœ¨æœ‰å¤§é‡è¯»æ“ä½œï¼Œå°‘é‡å†™æ“ä½œçš„æ—¶å€™ä½¿ç”¨ã€‚</li></ul></li></ul><h4 id="deleteå…³é”®å­—çš„ä½œç”¨"><a href="#deleteå…³é”®å­—çš„ä½œç”¨" class="headerlink" title="deleteå…³é”®å­—çš„ä½œç”¨"></a>deleteå…³é”®å­—çš„ä½œç”¨</h4><ol><li><p>åˆ é™¤ç‰¹æ®Šçš„æˆå‘˜å‡½æ•°ï¼šåœ¨C++11ä¸­å¯ä»¥ä½¿ç”¨deleteæ¥æ˜¾ç¤ºçš„é˜»æ­¢ç¼–è¯‘å™¨è‡ªåŠ¨ç”ŸæˆæŸäº›ç‰¹æ®Šçš„æˆå‘˜å‡½æ•°ã€‚é€šè¿‡åœ¨ç±»çš„å£°æ˜ä¸­å°†è¿™äº›ç‰¹æ®Šå‡½æ•°æ ‡è®°ä¸ºdeleteï¼Œå¯ä»¥é˜²æ­¢è¿™äº›å‡½æ•°éšå¼çš„ç”Ÿæˆã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">MyClass</span>() = <span class="keyword">delete</span>; <span class="comment">// é˜»æ­¢ç”Ÿæˆé»˜è®¤æ„é€ å‡½æ•°</span></span><br><span class="line">    <span class="built_in">MyClass</span>(<span class="type">const</span> MyClass&amp;) = <span class="keyword">delete</span>; <span class="comment">// é˜»æ­¢ç”Ÿæˆæ‹·è´æ„é€ å‡½æ•°</span></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li><li><p>åˆ é™¤ç‰¹å®šçš„å‡½æ•°é‡è½½ï¼šåœ¨å‡½æ•°é‡è½½æ—¶ï¼Œå¯ä»¥ä½¿ç”¨deleteå…³é”®å­—æ¥æ ‡è®°æŸä¸ªç‰¹å®šçš„å‡½æ•°é‡è½½ï¼Œé˜²æ­¢ç‰¹å®šçš„é‡è½½å‡½æ•°è¢«è°ƒç”¨ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">someFunction</span><span class="params">(<span class="type">int</span> x)</span></span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">someFunction</span><span class="params">(<span class="type">double</span> x)</span> </span>= <span class="keyword">delete</span>; <span class="comment">// é˜»æ­¢è°ƒç”¨å¸¦æœ‰ double å‚æ•°çš„å‡½æ•°</span></span><br></pre></td></tr></table></figure></li></ol><h4 id="defineå’Œconstçš„åŒºåˆ«"><a href="#defineå’Œconstçš„åŒºåˆ«" class="headerlink" title="defineå’Œconstçš„åŒºåˆ«"></a>defineå’Œconstçš„åŒºåˆ«</h4><ul><li>å°±èµ·ä½œç”¨çš„é˜¶æ®µè€Œè¨€ï¼š#defineæ˜¯åœ¨ç¼–è¯‘çš„é¢„å¤„ç†é˜¶æ®µèµ·ä½œç”¨ï¼Œè€Œconstæ˜¯åœ¨ç¼–è¯‘ã€è¿è¡Œæ—¶èµ·ä½œç”¨ï¼›</li><li>å°±èµ·ä½œç”¨çš„æ–¹å¼è€Œè¨€ï¼š#defineåªæ˜¯ç®€å•çš„å­—ç¬¦ä¸²æ›¿æ¢ï¼Œæ²¡æœ‰ç±»å‹æ£€æŸ¥ï¼Œè€Œconstæœ‰ç±»å‹æ£€æŸ¥ï¼Œé¿å…ç›¸åº”çš„é”™è¯¯ï¼›</li><li>å°±å­˜å‚¨æ–¹å¼è€Œè¨€ï¼š#defineåªæ˜¯è¿›è¡Œå±•å¼€ï¼Œæœ‰å¤šå°‘åœ°æ–¹ä½¿ç”¨ï¼Œå°±æœ‰å¤šå°‘æ›¿æ¢ã€‚constå®šä¹‰çš„åªè¯»å˜é‡åœ¨ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­åªæœ‰ä¸€ä»½å¤‡ä»½ï¼›</li></ul><h4 id="å†™æ—¶æ‹·è´ï¼ˆCOWï¼‰https-www-cnblogs-com-biyeymyhjob-archive-2012-07-20-2601655-html"><a href="#å†™æ—¶æ‹·è´ï¼ˆCOWï¼‰https-www-cnblogs-com-biyeymyhjob-archive-2012-07-20-2601655-html" class="headerlink" title="å†™æ—¶æ‹·è´ï¼ˆCOWï¼‰https://www.cnblogs.com/biyeymyhjob/archive/2012/07/20/2601655.html"></a>å†™æ—¶æ‹·è´ï¼ˆCOWï¼‰<a href="https://www.cnblogs.com/biyeymyhjob/archive/2012/07/20/2601655.html">https://www.cnblogs.com/biyeymyhjob/archive/2012/07/20/2601655.html</a></h4><p>åœ¨linuxé‡Œï¼Œforkï¼ˆï¼‰ä¼šäº§ç”Ÿä¸€ä¸ªå­è¿›ç¨‹ï¼Œå­è¿›ç¨‹ä¸çˆ¶è¿›ç¨‹ç”¨çš„æ˜¯ç›¸åŒçš„ç‰©ç†ç©ºé—´ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸¤è€…çš„è™šæ‹Ÿç©ºé—´ä¸åŒï¼Œä½†å¯¹åº”çš„ç‰©ç†ç©ºé—´æ˜¯ä¸€ä¸ªã€‚å½“çˆ¶&#x2F;å­è¿›ç¨‹ä¸­æœ‰æ›´æ”¹ç›¸åº”æ®µçš„è¡Œä¸ºå‘ç”Ÿæ—¶ï¼Œå†ä¸ºå­è¿›ç¨‹ç›¸åº”çš„æ®µåˆ†é…ç‰©ç†ç©ºé—´ã€‚è¿™é‡Œçš„ç›¸åº”æ®µä½ èƒ½ç†è§£ä¸ï¼Ÿå…¶å®å°±æ˜¯ä¸€ä¸ªç¨‹åºä¸€èˆ¬åˆ†ä¸ºå“ªäº›æ®µï¼Œä¸»è¦å¯ä»¥åˆ†ä¸ºå››å¤§æ®µï¼šæ ˆã€å †ã€æ•°æ®æ®µã€ä»£ç æ®µï¼›å†ç»†åˆ†çš„è¯å¯ä»¥åŠ ä¸€ä¸ªbssæ®µï¼Œä¹Ÿå°±æ˜¯ç”¨äºå­˜æ”¾ç¨‹åºä¸­æœªåˆå§‹åŒ–çš„å…¨å±€å˜é‡çš„ä¸€å—å†…å­˜åŒºåŸŸã€‚</p><p>è¿˜æœ‰ä¸€ä¸ªç»†èŠ‚é—®é¢˜å°±æ˜¯ï¼Œforkä¹‹åå†…æ ¸ä¼šå°†å­è¿›ç¨‹æ”¾åœ¨é˜Ÿåˆ—çš„å‰é¢ï¼Œä»¥è®©å­è¿›ç¨‹å…ˆæ‰§è¡Œï¼Œä»¥å…çˆ¶è¿›ç¨‹æ‰§è¡Œå¯¼è‡´å†™æ—¶å¤åˆ¶ï¼Œé€ æˆä¸å¿…è¦çš„å¤åˆ¶ï¼Œå¯¼è‡´æ•ˆç‡çš„ä¸‹é™ã€‚å¯ä»¥è¿™ä¹ˆç†è§£ï¼Œå¯èƒ½å­è¿›ç¨‹æ‰§è¡Œçš„ä»£ç å¹¶ä¸éœ€è¦å†™ï¼Œå®Œå…¨å¯ä»¥ä½¿ç”¨åŸå…±äº«æ®µï¼Œè€Œçˆ¶è¿›ç¨‹åè€Œä¼šæ”¹å˜ï¼ˆforkä¹‹åï¼‰ï¼Œå¦‚æœçˆ¶è¿›ç¨‹å…ˆæ‰§è¡Œï¼Œåˆ™å­è¿›ç¨‹å°±è¦COWã€‚</p><h4 id="coredumpï¼Œgdbæ€ä¹ˆå®šä½"><a href="#coredumpï¼Œgdbæ€ä¹ˆå®šä½" class="headerlink" title="coredumpï¼Œgdbæ€ä¹ˆå®šä½"></a>coredumpï¼Œgdbæ€ä¹ˆå®šä½</h4><p>æ•´ä½“æµç¨‹å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">g++ -g source.cpp -o <span class="built_in">source</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ulimit</span> -c unlimited</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./source</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gdb ./source ./core</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">where(åœ¨gdbä¸‹è¾“å…¥)</span><br></pre></td></tr></table></figure><h4 id="epoll"><a href="#epoll" class="headerlink" title="epoll"></a><code>epoll</code></h4><p>å…³äº<code>epoll</code>é—®é¢˜åœ¨è¿™æš‚ä¸”ä¸å¤šå†™ï¼Œåªéœ€è®°ä½å†…æ ¸äº‹ä»¶è¡¨ï¼Œ<code>select</code>å’Œ<code>poll</code>éƒ½æ˜¯è½®è¯¢ï¼Œäº‹ä»¶å¤æ‚åº¦ï¼š<code>epollï¼ˆo1ï¼‰</code>ï¼Œå…¶ä»–<code>ï¼ˆonï¼‰</code>ã€‚</p><p><code>select</code>å’Œ<code>poll</code>å¿…é¡»éå†å†…æ ¸äº‹ä»¶è¡¨ä¸Šæ‰€æœ‰å·²æ³¨å†Œçš„æ–‡ä»¶æè¿°ç¬¦ä»¥æ‰¾åˆ°å…¶ä¸­çš„å°±ç»ªè€…ï¼›<code>epoll</code>ä»…éå†å°±ç»ªçš„æ–‡ä»¶æè¿°ç¬¦ã€‚</p><h4 id="staticçš„ä½œç”¨"><a href="#staticçš„ä½œç”¨" class="headerlink" title="staticçš„ä½œç”¨"></a>staticçš„ä½œç”¨</h4><ol><li><p>åœ¨å‡½æ•°ä½“å†…ï¼Œè¢«å£°æ˜ä¸ºé™æ€çš„å˜é‡åœ¨è¿™ä¸€å‡½æ•°è¢«è°ƒç”¨è¿‡ç¨‹ä¸­ç»´æŒå…¶å€¼ä¸å˜ã€‚</p><p>è¿™å¥è¯å…¶å®æ˜¯æƒ³è¯´å¦‚æœåœ¨å‡½æ•°å†…éƒ¨å£°æ˜äº†ä¸€ä¸ªé™æ€å˜é‡ï¼Œé‚£ä¹ˆè¿™ä¸ªå˜é‡åœ¨å‡½æ•°è°ƒç”¨æœŸé—´ä¸ä¼šè¢«é‡æ–°åˆå§‹åŒ–ã€‚å®ƒçš„ç”Ÿå‘½å‘¨æœŸæ˜¯ä»ç¨‹åºå¼€å§‹åˆ°ç¨‹åºç»“æŸï¼Œä½†å…¶ä½œç”¨åŸŸä»ç„¶é™åˆ¶åœ¨è¯¥å‡½æ•°å†…ã€‚è¿™é‡Œç»™ä¸€æ®µç¤ºä¾‹ä»£ç æœ€å¥½ç†è§£ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">count</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="type">static</span> <span class="type">int</span> num = <span class="number">0</span>;</span><br><span class="line">    num++;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;num is: &quot;</span> &lt;&lt; num &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="built_in">count</span>();<span class="comment">// num = 1</span></span><br><span class="line">    <span class="built_in">count</span>();<span class="comment">// num = 2 æ­£å¸¸æƒ…å†µä¸‹ï¼Œå¦‚æœæ˜¯éstaticï¼Œnumä¼šè¢«é‡æ–°ç½®0ï¼Œä½†è¿™é‡Œå¹¶æ²¡æœ‰ä½“ç°å‡ºæ¥ã€‚</span></span><br><span class="line">    <span class="built_in">count</span>();<span class="comment">// num = 3</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>åœ¨æ¨¡å—å†…ï¼ˆä½†åœ¨å‡½æ•°ä½“å¤–ï¼‰ï¼Œä¸€ä¸ªè¢«å£°æ˜ä¸ºé™æ€çš„å˜é‡å¯ä»¥è¢«æ¨¡å—å†…æ‰€ç”¨å‡½æ•°è®¿é—®ï¼Œä½†ä¸èƒ½è¢«æ¨¡å—å¤–å…¶ä»–å‡½æ•°è®¿é—®ã€‚å®ƒæ˜¯ä¸€ä¸ªæœ¬åœ°çš„å…¨å±€å˜é‡ã€‚</p><p>è¿™å¥è¯å°±æ˜¯è¡¨é¢æ„æ€ï¼Œå¾ˆå¥½ç†è§£ï¼Œè¿™é‡Œç»™ä¸€ä¸ªä»£ç å¸®åŠ©ç†è§£</p><p><strong>moduleA.cpp</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">static</span> <span class="type">int</span> secretValue = <span class="number">42</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printSecretValue</span><span class="params">()</span></span>&#123;</span><br><span class="line">    std::cout &lt;&lt; secretValue &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">modifySecretValue</span><span class="params">(<span class="type">int</span> value)</span></span>&#123;</span><br><span class="line">    secretValue = value;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>moudleB.cpp</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">extern</span> <span class="type">void</span> <span class="title">printSecretValue</span><span class="params">()</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">extern</span> <span class="type">void</span> <span class="title">modifySecretValue</span><span class="params">(<span class="type">int</span> value)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">printSecretValue</span>();</span><br><span class="line">    <span class="built_in">modifySecretValue</span>(<span class="number">100</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// std::cout &lt;&lt; secretValue &lt;&lt; std::endl; </span></span><br><span class="line">    <span class="comment">// è®°ä½ï¼Œè¿™å¥è¯æ˜¯ä¼šå¯¼è‡´ç¼–è¯‘é”™è¯¯çš„ï¼Œæ¨¡å—Bä¸èƒ½ç›´æ¥è®¿é—®æ¨¡å—Açš„å˜é‡ã€‚</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>åœ¨æ¨¡å—å†…ï¼Œä¸€ä¸ªè¢«å£°æ˜ä¸ºé™æ€çš„å‡½æ•°åªå¯è¢«æœ¬æ¨¡å—å†…çš„å…¶ä»–å‡½æ•°è°ƒç”¨ã€‚ä¹Ÿå°±æ˜¯ï¼Œè¿™ä¸ªå‡½æ•°è¢«é™åˆ¶åœ¨å£°æ˜å®ƒçš„æ¨¡å—çš„æœ¬åœ°èŒƒå›´å†…ä½¿ç”¨ã€‚</p><p>è¿™é‡Œçš„æ„æ€å…¶å®å°±å’Œç¬¬äºŒç‚¹å·®ä¸å¤šäº†ï¼Œä¹Ÿç»™ä¸€ä¸ªç®€å•ç¤ºä¾‹ä»£ç å§</p><p><strong>moduleA.cpp</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿™æ˜¯ä¸€ä¸ªé™æ€å‡½æ•°ï¼Œåªåœ¨moduleA.cppä¸­å¯è§</span></span><br><span class="line"><span class="function"><span class="type">static</span> <span class="type">void</span> <span class="title">secretFunction</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Inside secret function of moduleA!&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å…¬å¼€çš„å‡½æ•°ï¼Œå¯ä»¥è¢«å…¶ä»–æ¨¡å—è°ƒç”¨</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">publicFunction</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Inside public function of moduleA.&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    <span class="built_in">secretFunction</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>moduleB.cpp</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">extern</span> <span class="type">void</span> <span class="title">publicFunction</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">publicFunction</span>();  <span class="comment">// å¯ä»¥è°ƒç”¨è¿™ä¸ªå‡½æ•°</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¸èƒ½è°ƒç”¨ secretFunctionï¼Œå› ä¸ºå®ƒåœ¨moduleA.cppä¸­æ˜¯é™æ€çš„</span></span><br><span class="line">    <span class="comment">// secretFunction();  // è¿™ä¸€è¡Œä¼šå¯¼è‡´ç¼–è¯‘é”™è¯¯</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œ<code>moduleA.cpp</code>å®šä¹‰äº†ä¸€ä¸ªé™æ€å‡½æ•°<code>secretFunction</code>ã€‚åœ¨<code>moduleB.cpp</code>ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è°ƒç”¨<code>publicFunction</code>ï¼Œä½†å½“æˆ‘ä»¬å°è¯•è°ƒç”¨<code>secretFunction</code>æ—¶ï¼Œä¼šå¯¼è‡´ç¼–è¯‘é”™è¯¯ï¼Œå› ä¸º<code>secretFunction</code>åªåœ¨<code>moduleA.cpp</code>ä¸­å¯è§ã€‚</p></li></ol><h4 id="æœ‰å…³staticçš„å¿…è¦è¡¥å……"><a href="#æœ‰å…³staticçš„å¿…è¦è¡¥å……" class="headerlink" title="æœ‰å…³staticçš„å¿…è¦è¡¥å……"></a>æœ‰å…³staticçš„å¿…è¦è¡¥å……</h4><ul><li><p>ä¿®é¥°æˆå‘˜å˜é‡</p><p>ç”¨staticä¿®é¥°ç±»çš„æ•°æ®æˆå‘˜ï¼Œä½¿å…¶æˆä¸ºç±»çš„å…¨å±€å˜é‡ï¼Œä¼šè¢«ç±»çš„æ‰€æœ‰å¯¹è±¡å…±äº«ï¼ŒåŒ…æ‹¬æ´¾ç”Ÿç±»å¯¹è±¡ã€‚<strong>æ‰€æœ‰å¯¹è±¡åªç»´æŒåŒä¸€ä¸ªå®ä¾‹ã€‚</strong>å› æ­¤ç±»çš„staticæˆå‘˜å¿…é¡»è¿›è¡Œç±»å¤–åˆå§‹åŒ–ï¼Œè€Œä¸èƒ½åœ¨æ„é€ å‡½æ•°å†…è¿›è¡Œåˆå§‹åŒ–ï¼Œä¸è¿‡ä¹Ÿå¯ä»¥ç”¨constä¿®é¥°staticæ•°æ®æˆå‘˜åœ¨ç±»å†…åˆå§‹åŒ–ã€‚å› ä¸ºconstä¿®é¥°çš„å˜é‡æ— æ³•ä¿®æ”¹ã€‚</p></li><li><p>ä¿®é¥°æˆå‘˜å‡½æ•°</p><p>ç”¨staticä¿®é¥°æˆå‘˜å‡½æ•°ï¼Œä½¿è¿™ä¸ªç±»åªå­˜åœ¨è¿™ä¸€ä»½å‡½æ•°ï¼Œæ‰€æœ‰å¯¹è±¡å…±äº«è¯¥å‡½æ•°ï¼Œä¸å«thisæŒ‡é’ˆï¼Œå› è€Œåªèƒ½è®¿é—®staticæˆå‘˜å˜é‡ã€‚<strong>æ³¨æ„</strong>ï¼šæ­£æ˜¯å› ä¸ºstaticä¿®é¥°çš„æˆå‘˜å‡½æ•°ä¸å«thisæŒ‡é’ˆï¼Œè€Œconstä¿®é¥°çš„æˆå‘˜å‡½æ•°ä¼šæ·»åŠ ä¸€ä¸ªéšè—çš„å‚æ•°const this*ï¼Œæ‰€ä»¥è¿™ä¸¤ç§è¯­ä¹‰æ˜¯çŸ›ç›¾çš„ï¼Œæ‰€ä»¥åœ¨æˆå‘˜å‡½æ•°ä¸Šä¸èƒ½åŒæ—¶ç”¨ä»–ä»¬ã€‚</p></li><li><p>thisæŒ‡é’ˆç†è§£</p><p>å¯¹è±¡å°±æ˜¯å¤§æˆ¿å­ï¼Œæˆå‘˜å°±æ˜¯æˆ¿å­é‡Œçš„ç‰©ä»¶ï¼Œthisæ˜¯ä¸€ä¸ªæŒ‡ç€æˆ¿å­çš„æŒ‡é’ˆï¼Œå¦‚æœè¦è·å–å¯¹è±¡çš„æˆå‘˜ä¹Ÿå°±æ˜¯å¤§æˆ¿å­å†…çš„ç‰©ä»¶ï¼Œéœ€è¦ä½¿ç”¨thisæŒ‡é’ˆåŠ -&gt;è¿™ä¸ªç¬¦å·ã€‚</p></li></ul><h4 id="ä¸‰ç§æ™ºèƒ½æŒ‡é’ˆ"><a href="#ä¸‰ç§æ™ºèƒ½æŒ‡é’ˆ" class="headerlink" title="ä¸‰ç§æ™ºèƒ½æŒ‡é’ˆ"></a>ä¸‰ç§æ™ºèƒ½æŒ‡é’ˆ</h4><p>æ™ºèƒ½æŒ‡é’ˆæ˜¯åœ¨æ ˆä¸­çš„ä¸€ä¸ªç±»ï¼Œç”¨äºç®¡ç†å †ä¸Šåˆ†é…çš„å†…å­˜ã€‚ä¼ ç»Ÿçš„C&#x2F;C++å¯¹äºå †ä¸Šå†…å­˜çš„å¼€è¾Ÿé‡Šæ”¾ï¼Œéœ€è¦ç¨‹åºæ‰‹åŠ¨ç®¡ç†ï¼Œè€Œæ™ºèƒ½æŒ‡é’ˆæ˜¯ä¸€ä¸ªç±»ï¼Œæœ‰æ„é€ å‡½æ•°å’Œææ„å‡½æ•°ï¼Œåœ¨è¶…å‡ºä½œç”¨èŒƒå›´åï¼Œç¨‹åºä¼šè‡ªåŠ¨è°ƒç”¨ææ„å‡½æ•°é‡Šæ”¾å…¶ç®¡ç†çš„æŒ‡é’ˆæŒ‡å‘çš„å†…å­˜ï¼Œä¸éœ€è¦æ‰‹åŠ¨é‡Šæ”¾ã€‚</p><ul><li>shared_ptrå…±äº«æ™ºèƒ½æŒ‡é’ˆï¼Œå¤šä¸ªæ™ºèƒ½æŒ‡é’ˆå¯ä»¥æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡çš„èµ„æºåœ¨æœ€åä¸€ä¸ªæŒ‡é’ˆé”€æ¯æ—¶é‡Šæ”¾ï¼Œé€šè¿‡å¼•ç”¨è®¡æ•°æ¥åˆ¤æ–­æ˜¯å¦æ˜¯æœ€åä¸€ä¸ªæ™ºèƒ½æŒ‡é’ˆã€‚</li><li>unique_ptrç‹¬å æ™ºèƒ½æŒ‡é’ˆï¼ŒåŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªæ™ºèƒ½æŒ‡é’ˆå¯ä»¥æŒ‡å‘è¯¥å¯¹è±¡ï¼Œå¦‚æœè¦å®‰å…¨é‡ç”¨è¯¥æŒ‡é’ˆï¼Œæ ‡å‡†åº“å‡½æ•°std::move()å¯ä»¥å°†unique_ptrèµ‹å€¼ç»™å¦ä¸€ä¸ªunique_ptrã€‚</li><li>weak_ptr      å¼±æ™ºèƒ½æŒ‡é’ˆï¼Œä¸ä¼šå¢åŠ shared_ptrçš„å¼•ç”¨è®¡æ•°ï¼Œå¯ä»¥é¿å…ä¸¤ä¸ªshared_ptrç›¸äº’å¼•ç”¨çš„æ­»é”é—®é¢˜ã€‚weak_ptråªèƒ½ç”¨shared_ptræˆ–è€…å¦ä¸€ä¸ªweak_ptræ„é€ ï¼Œé€šè¿‡lock()æ–¹æ³•weak_ptrå¯ä»¥è½¬åŒ–ä¸ºshared_ptrã€‚</li></ul><p>ä¸‹é¢ç»™å‡ºä»£ç ç¤ºä¾‹</p><p><strong>unique_ptr</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;memory&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">test</span>&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    std::string str;</span><br><span class="line">    ~<span class="built_in">test</span>()&#123; std::cout &lt;&lt; <span class="string">&quot;test::~test()&quot;</span> &lt;&lt; std::endl; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="function">std::unique_ptr&lt;test&gt; <span class="title">p1</span><span class="params">(<span class="keyword">new</span> test())</span></span>;</span><br><span class="line">    p1-&gt;str = <span class="string">&quot;test string&quot;</span>;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;p1-&gt;str: &quot;</span> &lt;&lt; p1-&gt;str &lt;&lt; std::endl;</span><br><span class="line">    std::unique_ptr&lt;test&gt; p2;</span><br><span class="line">    p2 = std::<span class="built_in">move</span>(p1);</span><br><span class="line">    <span class="comment">// std::cout &lt;&lt; p1-&gt;str &lt;&lt; std::endl; p1æ­¤æ—¶å·²ç»è®¿é—®ä¸åˆ°èµ„æºäº†</span></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;p2-&gt;str: &quot;</span> &lt;&lt; p2-&gt;str &lt;&lt; std::endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿è¡Œç»“æœ</span></span><br><span class="line"><span class="comment">// p1-&gt;str: test string</span></span><br><span class="line"><span class="comment">// p2-&gt;str: test string</span></span><br><span class="line"><span class="comment">// test::~test() ææ„å‡½æ•°å‘ç”Ÿäº†è°ƒç”¨ï¼Œè‡ªåŠ¨é‡Šæ”¾èµ„æº</span></span><br></pre></td></tr></table></figure><p><strong>shared_ptr</strong>é€ æˆçš„æ­»é”é—®é¢˜</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;memory&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span>;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">A</span>&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    shared_ptr&lt;B&gt; a;</span><br><span class="line">    ~<span class="built_in">A</span>()&#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;A::~A()&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span>&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    shared_ptr&lt;A&gt; b;</span><br><span class="line">    ~<span class="built_in">B</span>()&#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;B::~B()&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">/*******å‰è¾¹ä¸¤ä¸ªç±»ä¸­ç›¸äº’å¼•ç”¨ï¼Œæ­¤æ—¶å¼•å…¥weak_ptrè§£å†³æ­»é”é—®é¢˜*/</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="function">shared_ptr&lt;A&gt; <span class="title">p1</span><span class="params">(<span class="keyword">new</span> A())</span></span>;</span><br><span class="line">    <span class="function">shared_ptr&lt;B&gt; <span class="title">p2</span><span class="params">(<span class="keyword">new</span> B())</span></span>;</span><br><span class="line">    p1-&gt;a = p2;</span><br><span class="line">    p2-&gt;b = p1;<span class="comment">//è¿™ç§æƒ…å†µå‘ç”Ÿæ­»é”,ä¸¤ä¸ªshared_ptrè®¡æ•°éƒ½ä¸ä¼šä¸º0ï¼Œèµ„æºä¸ä¼šè¢«é‡Šæ”¾</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;use_count():&quot;</span> &lt;&lt; p1.<span class="built_in">use_count</span>() &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;use_count():&quot;</span> &lt;&lt; p2.<span class="built_in">use_count</span>() &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å…·ä½“è§£é‡Šä¸€ä¸‹æ­»é”çš„äº§ç”Ÿä¸»è¦åŸå› æ˜¯å¼•ç”¨è®¡æ•°æ— æ³•é™ä¸º0ã€‚</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">é¦–å…ˆï¼Œæ¥ç†è§£ä¸‹ä¸ºä»€ä¹ˆè¿™ç§æƒ…å†µä¼šå¯¼è‡´èµ„æºä¸èƒ½è¢«é‡Šæ”¾ï¼š</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">1. å½“ä½ åˆ›å»º`p1`å’Œ`p2`æ—¶ï¼Œå®ƒä»¬éƒ½æœ‰ä¸€ä¸ªå¼•ç”¨è®¡æ•°ä¸º1ã€‚</span></span><br><span class="line"><span class="comment">2. å½“æ‰§è¡Œ`p1-&gt;a = p2;`ï¼Œ`p2`çš„å¼•ç”¨è®¡æ•°å¢åŠ åˆ°2ï¼Œå› ä¸ºç°åœ¨æœ‰ä¸¤ä¸ª`shared_ptr`å¯¹è±¡ï¼ˆ`p1-&gt;a`å’Œ`p2`ï¼‰æŒ‡å‘åŒä¸€ä¸ª`B`å¯¹è±¡ã€‚</span></span><br><span class="line"><span class="comment">3. å½“æ‰§è¡Œ`p2-&gt;b = p1;`ï¼Œ`p1`çš„å¼•ç”¨è®¡æ•°å¢åŠ åˆ°2ï¼Œå› ä¸ºç°åœ¨æœ‰ä¸¤ä¸ª`shared_ptr`å¯¹è±¡ï¼ˆ`p2-&gt;b`å’Œ`p1`ï¼‰æŒ‡å‘åŒä¸€ä¸ª`A`å¯¹è±¡ã€‚</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">åˆ°æ­¤ï¼Œæˆ‘ä»¬å¾—åˆ°äº†ä¸€ä¸ªç¯çŠ¶ç»“æ„ï¼š`p1`æŒ‡å‘`A`å¯¹è±¡ï¼Œ`A`å¯¹è±¡å†…éƒ¨çš„`shared_ptr`æŒ‡å‘`B`å¯¹è±¡ï¼Œ`B`å¯¹è±¡å†…éƒ¨çš„`shared_ptr`åˆæŒ‡å‘`A`å¯¹è±¡ã€‚è¿™å°±å½¢æˆäº†å¾ªç¯å¼•ç”¨ã€‚</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">å½“`main`å‡½æ•°è¿”å›æ—¶ï¼Œ`p1`å’Œ`p2`çš„ææ„å‡½æ•°å°†è¢«è°ƒç”¨ï¼Œä½†æ˜¯å®ƒä»¬çš„å¼•ç”¨è®¡æ•°éƒ½ä¸ä¼šé™ä¸º0ï¼Œå› ä¸ºå¾ªç¯å¼•ç”¨ã€‚æ‰€ä»¥ï¼Œ`A`å’Œ`B`å¯¹è±¡çš„ææ„å‡½æ•°æ°¸è¿œä¸ä¼šè¢«è°ƒç”¨ï¼Œè¿™å°±å¯¼è‡´äº†èµ„æºæ³„æ¼ã€‚</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨`weak_ptr`æ¥æ‰“ç ´å¾ªç¯å¼•ç”¨ã€‚ä½ å¯ä»¥å°†å…¶ä¸­ä¸€ä¸ªç±»çš„`shared_ptr`æˆå‘˜å˜é‡æ›¿æ¢ä¸º`weak_ptr`ã€‚è¿™æ ·ï¼Œ`weak_ptr`ä¸ä¼šå¢åŠ å¼•ç”¨è®¡æ•°ï¼Œä»è€Œé¿å…äº†å¾ªç¯å¼•ç”¨çš„é—®é¢˜ã€‚å½“ä½ éœ€è¦ä»`weak_ptr`è·å–ä¸€ä¸ª`shared_ptr`æ—¶ï¼Œå¯ä»¥ä½¿ç”¨`lock`æ–¹æ³•ã€‚</span></span><br><span class="line"><span class="comment">*/</span> </span><br></pre></td></tr></table></figure><p><strong>weak_prt</strong>è§£å†³å¾ªç¯å¼•ç”¨é—®é¢˜</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;memory&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    shared_ptr&lt;B&gt; a;</span><br><span class="line">    ~<span class="built_in">A</span>() &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;A::~A()&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    string str = <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">    weak_ptr&lt;A&gt; b;  <span class="comment">// å°† shared_ptr æ›¿æ¢ä¸º weak_ptr</span></span><br><span class="line">    ~<span class="built_in">B</span>() &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;B::~B()&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="function">shared_ptr&lt;A&gt; <span class="title">p1</span><span class="params">(<span class="keyword">new</span> A())</span></span>;</span><br><span class="line">    <span class="function">shared_ptr&lt;B&gt; <span class="title">p2</span><span class="params">(<span class="keyword">new</span> B())</span></span>;</span><br><span class="line"></span><br><span class="line">    p1-&gt;a = p2;</span><br><span class="line">    p2-&gt;b = p1;  <span class="comment">// è¿™é‡Œä¸ä¼šå¢åŠ  p1 çš„å¼•ç”¨è®¡æ•°</span></span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;p1 use_count(): &quot;</span> &lt;&lt; p1.<span class="built_in">use_count</span>() &lt;&lt; endl;  <span class="comment">// è¾“å‡º 1</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;p2 use_count(): &quot;</span> &lt;&lt; p2.<span class="built_in">use_count</span>() &lt;&lt; endl;  <span class="comment">// è¾“å‡º 2</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;  <span class="comment">// å½“ main è¿”å›æ—¶ï¼Œp1 å’Œ p2 éƒ½ä¼šè¢«ææ„ï¼Œå®ƒä»¬æ‰€æŒ‡å‘çš„å¯¹è±¡ä¹Ÿä¼šè¢«æ­£ç¡®åœ°é”€æ¯</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="STLå†…å­˜æ± æœºåˆ¶"><a href="#STLå†…å­˜æ± æœºåˆ¶" class="headerlink" title="STLå†…å­˜æ± æœºåˆ¶"></a>STLå†…å­˜æ± æœºåˆ¶</h4><ul><li><p>ç¬¬ä¸€çº§é…ç½®å™¨</p><p>ç¬¬ä¸€çº§é…ç½®å™¨ä»¥malloc()ï¼Œfree()ï¼Œrealloc()ç­‰Cå‡½æ•°æ‰§è¡Œå®é™…çš„å†…å­˜é…ç½®ã€é‡Šæ”¾ã€é‡æ–°é…ç½®ç­‰æ“ä½œï¼Œå¹¶ä¸”èƒ½åœ¨å†…å­˜éœ€æ±‚ä¸è¢«æ»¡è¶³çš„æ—¶å€™ï¼Œè°ƒç”¨ä¸€ä¸ªæŒ‡å®šçš„å‡½æ•°ã€‚</p></li><li><p>ç¬¬äºŒçº§é…ç½®å™¨</p><p>åœ¨STLçš„ç¬¬äºŒçº§é…ç½®å™¨ä¸­å¤šäº†ä¸€äº›æœºåˆ¶ï¼Œé¿å…å¤ªå¤šå°åŒºé€ æˆçš„å†…å­˜ç¢ç‰‡ï¼Œå°é¢åŒºå—å¸¦æ¥çš„ä¸ä»…æ˜¯å†…å­˜ç¢ç‰‡ï¼Œé…ç½®æ—¶è¿˜æœ‰é¢å¤–çš„è´Ÿæ‹…ã€‚åŒºå—è¶Šå°ï¼Œé¢å¤–è´Ÿæ‹…æ‰€å æ¯”ä¾‹å°±è¶Šå¤§ã€‚</p><p>å¦‚æœè¦åˆ†é…çš„åŒºå—å¤§äº128bytesï¼Œåˆ™ç§»äº¤ç»™ç¬¬ä¸€çº§é…ç½®å™¨å¤„ç†ã€‚<br>å¦‚æœè¦åˆ†é…çš„åŒºå—å°äº128bytesï¼Œåˆ™ä»¥ å†…å­˜æ± ç®¡ç†ï¼ˆmemory poolï¼‰ï¼Œåˆç§°ä¹‹æ¬¡å±‚é…ç½®ï¼ˆsub-allocationï¼‰ï¼šæ¯æ¬¡é…ç½®ä¸€å¤§å—å†…å­˜ï¼Œå¹¶ç»´æŠ¤å¯¹åº”çš„16ä¸ªç©ºé—²é“¾è¡¨ï¼ˆfree-listï¼‰ã€‚ä¸‹æ¬¡è‹¥æœ‰ç›¸åŒå¤§å°çš„å†…å­˜éœ€æ±‚ï¼Œåˆ™ç›´æ¥ä»free-listä¸­å–ã€‚å¦‚æœæœ‰å°é¢åŒºå—è¢«é‡Šæ”¾ï¼Œåˆ™ç”±é…ç½®å™¨å›æ”¶åˆ°free-listä¸­ã€‚</p><p>å‚è€ƒè¿æ¥ï¼š<a href="https://blog.csdn.net/a987073381/article/details/52245795">https://blog.csdn.net/a987073381/article/details/52245795</a></p></li></ul><h4 id="ç´¢å¼•é€‰B-æ ‘çš„åŸå› "><a href="#ç´¢å¼•é€‰B-æ ‘çš„åŸå› " class="headerlink" title="ç´¢å¼•é€‰B+æ ‘çš„åŸå› "></a>ç´¢å¼•é€‰B+æ ‘çš„åŸå› </h4><p>ä¸ªäººæ„Ÿè§‰ä¸»è¦å°±æ˜¯æ¢è®¨B+æ ‘å’ŒBæ ‘ä¹‹é—´çš„åŒºåˆ«ã€‚<br>å‚è€ƒé“¾æ¥ï¼š<a href="https://www.cnblogs.com/JCpeng/p/15231338.html">https://www.cnblogs.com/JCpeng/p/15231338.html</a></p><h4 id="æœåŠ¡ç«¯TIME-WAITè¿‡å¤šçš„å±å®³åŠè§£å†³åŠæ³•"><a href="#æœåŠ¡ç«¯TIME-WAITè¿‡å¤šçš„å±å®³åŠè§£å†³åŠæ³•" class="headerlink" title="æœåŠ¡ç«¯TIME_WAITè¿‡å¤šçš„å±å®³åŠè§£å†³åŠæ³•"></a>æœåŠ¡ç«¯TIME_WAITè¿‡å¤šçš„å±å®³åŠè§£å†³åŠæ³•</h4><p>å±å®³</p><ul><li>å¯¼è‡´å¤§é‡socketè¿æ¥ç«¯å£è¢«å ç”¨æ— æ³•é‡Šæ”¾ï¼Œå¯¼è‡´ç³»ç»Ÿåœè½¬</li><li>å¤„ç†å¤§é‡çš„TIME_WAITçŠ¶æ€çš„è¿æ¥ä¼šå ç”¨æ›´å¤šçš„CPUæ—¶é—´ï¼Œå¯¼è‡´æœåŠ¡å™¨å“åº”æ—¶é—´å¢åŠ </li></ul><p>è§£å†³åŠæ³•</p><ul><li>è°ƒæ•´ç³»ç»Ÿå†…æ ¸å‚æ•°</li><li>è°ƒæ•´çŸ­è¿æ¥ä¸ºé•¿è¿æ¥</li></ul><h4 id="setåº•å±‚æ•°æ®ç»“æ„"><a href="#setåº•å±‚æ•°æ®ç»“æ„" class="headerlink" title="setåº•å±‚æ•°æ®ç»“æ„"></a>setåº•å±‚æ•°æ®ç»“æ„</h4><p>setåº•å±‚æ•°æ®ç»“æ„æ˜¯çº¢é»‘æ ‘ã€‚å…³äºmapå’Œsetçš„ä¸€äº›é—®é¢˜åˆ—ä¸¾å¦‚ä¸‹ï¼š</p><p><strong>ä¸ºä½•mapå’Œsetçš„æ’å…¥åˆ é™¤æ•ˆç‡æ¯”ç”¨å…¶ä»–åºåˆ—å®¹å™¨é«˜ï¼Ÿ</strong><br>å› ä¸ºå¯¹äºå…³è”å®¹å™¨æ¥è¯´ï¼Œä¸éœ€è¦åšå†…å­˜æ‹·è´å’Œå†…å­˜ç§»åŠ¨ã€‚å› ä¸ºmapå’Œsetå®¹å™¨å†…éƒ¨æ‰€æœ‰å…ƒç´ éƒ½æ˜¯ä»¥èŠ‚ç‚¹çš„æ–¹å¼æ¥å­˜å‚¨ï¼Œçˆ¶èŠ‚ç‚¹å’Œå­èŠ‚ç‚¹ã€‚å› æ­¤æ’å…¥å’Œåˆ é™¤çš„æ—¶å€™éƒ½æ˜¯æŒ‡é’ˆçš„æŒ‡å‘æ¢æ¥æ¢å»ï¼Œå¹¶æ²¡æœ‰å†…å­˜ç§»åŠ¨ã€‚</p><p><strong>ä¸ºä½•æ¯æ¬¡æ’å…¥&#x2F;åˆ é™¤åä»¥å‰ä¿å­˜çš„è¿­ä»£å™¨ä¸ä¼šå¤±æ•ˆ</strong><br>åœ¨è¿™é‡Œï¼Œè¿­ä»£å™¨å°±ç›¸å½“äºæŒ‡å‘èŠ‚ç‚¹çš„æŒ‡é’ˆï¼Œå†…å­˜æ²¡æœ‰å˜ï¼ŒæŒ‡å‘å†…å­˜çš„æŒ‡é’ˆå½“ç„¶ä¸ä¼šå¤±æ•ˆã€‚ä¸åŒäºmap&#x2F;setï¼Œvectorå°±ä¼šå¤±æ•ˆï¼Œæ¯”å¦‚éœ€è¦æ‰©å®¹çš„æ—¶å€™ï¼Œéœ€è¦ä¸€å—æ›´å¤§çš„å†…å­˜ï¼Œå°±å¿…é¡»æŠŠä¹‹å‰çš„å†…å­˜é‡Šæ”¾ï¼Œç”³è¯·æ›´å¤§çš„å†…å­˜ï¼Œå¤åˆ¶å·²æœ‰çš„æ•°æ®å…ƒç´ åˆ°æ–°çš„å†…å­˜ã€‚</p><p><strong>ä¸ºä½•mapå’Œsetä¸èƒ½åƒvectorä¸€æ ·æœ‰ä¸ªreserveå‡½æ•°æ¥é¢„åˆ†é…æ•°æ®</strong><br>ä¸æ‡‚ï¼é¢„ç•™æœ¬é—®é¢˜</p><p><strong>å½“æ•°æ®å…ƒç´ å¢å¤šæ—¶ï¼ˆ10000åˆ°20000ä¸ªæ¯”è¾ƒï¼‰ï¼Œmapå’Œsetçš„æ’å…¥å’Œæœç´¢é€Ÿåº¦å˜åŒ–å¦‚ä½•ï¼Ÿ</strong><br>mapå’Œsetä½¿ç”¨çš„æ˜¯äºŒåˆ†æŸ¥æ‰¾ï¼Œä¸¾ä¾‹æ¥è¯´å°±æ˜¯ï¼Œ16ä¸ªå…ƒç´ æŸ¥å››æ¬¡ï¼Œ32ä¸ªå…ƒç´ æŸ¥5æ¬¡ï¼Œ10000ä¸ªä¹Ÿå°±æ˜¯14æ¬¡ï¼Œ20000ä¹Ÿå°±15æ¬¡ã€‚</p><h4 id="mapreduceåŸç†ï¼ˆä¸æ‡‚ï¼Œé¢„ç•™ï¼‰"><a href="#mapreduceåŸç†ï¼ˆä¸æ‡‚ï¼Œé¢„ç•™ï¼‰" class="headerlink" title="mapreduceåŸç†ï¼ˆä¸æ‡‚ï¼Œé¢„ç•™ï¼‰"></a>mapreduceåŸç†ï¼ˆä¸æ‡‚ï¼Œé¢„ç•™ï¼‰</h4><h4 id="socketå“ªäº›æ“ä½œä¼šäº§ç”Ÿé˜»å¡"><a href="#socketå“ªäº›æ“ä½œä¼šäº§ç”Ÿé˜»å¡" class="headerlink" title="socketå“ªäº›æ“ä½œä¼šäº§ç”Ÿé˜»å¡"></a>socketå“ªäº›æ“ä½œä¼šäº§ç”Ÿé˜»å¡</h4><p>accept()ï¼šåœ¨ç­‰å¾…å®¢æˆ·ç«¯çš„è¿æ¥è¯·æ±‚æ—¶ä¼šé˜»å¡ã€‚å¦‚æœæ²¡æœ‰å®¢æˆ·ç«¯å°è¯•è¿æ¥ï¼Œè°ƒç”¨è¿™ä¸ªå‡½æ•°çš„è¿›ç¨‹æˆ–è€…çº¿ç¨‹ä¼šè¢«æŒ‚èµ·ã€‚</p><p>connect()ï¼šå½“å®¢æˆ·ç«¯å°è¯•ä¸è¿œç¨‹ä¸»æœºå»ºç«‹è¿æ¥æ—¶ï¼Œæ­¤æ“ä½œä¼šé˜»å¡ï¼ŒçŸ¥é“è¿æ¥æˆåŠŸæˆ–å¤±è´¥</p><p>recv()ï¼šå½“æ•°æ®ä»ç½‘ç»œåˆ°è¾¾æ—¶ï¼Œå¦‚æœæ²¡æœ‰æ•°æ®å¯è¯»ï¼Œå‡½æ•°è°ƒç”¨å°±ä¼šè¢«æŒ‚èµ·ï¼Œé˜»å¡</p><p>send()ï¼šå½“å‘é€ç¼“å†²åŒºå·²æ»¡ï¼Œå¹¶ä¸”æ— æ³•æ¥å—æ›´å¤šæ•°æ®å‘é€åˆ°ç½‘ç»œæ—¶ï¼Œæ“ä½œé˜»å¡ã€‚</p><h4 id="ç”³è¯·ä¸€å—å¤§å†…å­˜å’Œä¸€å—å°å†…å­˜çš„æ•ˆç‡æ˜¯ä¸€æ ·çš„å—ï¼Ÿ"><a href="#ç”³è¯·ä¸€å—å¤§å†…å­˜å’Œä¸€å—å°å†…å­˜çš„æ•ˆç‡æ˜¯ä¸€æ ·çš„å—ï¼Ÿ" class="headerlink" title="ç”³è¯·ä¸€å—å¤§å†…å­˜å’Œä¸€å—å°å†…å­˜çš„æ•ˆç‡æ˜¯ä¸€æ ·çš„å—ï¼Ÿ"></a>ç”³è¯·ä¸€å—å¤§å†…å­˜å’Œä¸€å—å°å†…å­˜çš„æ•ˆç‡æ˜¯ä¸€æ ·çš„å—ï¼Ÿ</h4><p>ä¸ä¸€æ ·ï¼Œç”³è¯·ä¸€å—å°å†…å­˜é€šå¸¸æ˜¯ä¸éœ€è¦ä¸€çº§é…ç½®å™¨ï¼Œå°å—å†…å­˜é€šå¸¸ç”±å†…å­˜åˆ†é…å™¨ä»é¢„å…ˆåˆ†é…çš„å†…å­˜æ± ä¸­åˆ†é…ï¼Œè¿™äº›æ± è¢«ç§°ä¸º<code>bins</code>ï¼Œè¿™ç§åˆ†é…é€šå¸¸éå¸¸å¿«ï¼Œå› ä¸ºå®ƒåªæ˜¯æ¶‰åŠåˆ°ä»å·²å­˜åœ¨çš„å†…å­˜æ± ä¸­è¿”å›ä¸€ä¸ªæŒ‡é’ˆã€‚å¤§çš„å†…å­˜é€šå¸¸è¦è°ƒç”¨<code>mmap()</code>ã€‚</p><h4 id="TCPæ…¢å¯åŠ¨å’Œæ‹¥å¡æ§åˆ¶"><a href="#TCPæ…¢å¯åŠ¨å’Œæ‹¥å¡æ§åˆ¶" class="headerlink" title="TCPæ…¢å¯åŠ¨å’Œæ‹¥å¡æ§åˆ¶"></a>TCPæ…¢å¯åŠ¨å’Œæ‹¥å¡æ§åˆ¶</h4><p>TCPè¿æ¥å»ºç«‹å¥½ä¹‹åï¼ŒCWNDï¼ˆcongestion windowï¼Œæ‹¥å¡çª—å£ï¼‰è¢«è®¾ç½®ä¸ºåˆå§‹å€¼IWï¼ˆinitial windowï¼‰ï¼Œå…¶å¤§å°ä¸º2~4ä¸ªSMSSï¼ˆTCPæŠ¥æ–‡æ®µçš„æœ€å¤§é•¿åº¦ï¼Œä»…æŒ‡æ•°æ®éƒ¨åˆ†ï¼‰ï¼Œæ–°çš„linuxå†…æ ¸åŠ å¤§äº†è¿™ä¸ªå€¼ã€‚æ­¤æ—¶å‘é€ç«¯æœ€å¤šèƒ½å‘é€IWå­—èŠ‚çš„æ•°æ®ï¼Œæ­¤åå‘é€ç«¯æ¯æ”¶åˆ°ä¸€ä¸ªç¡®è®¤ï¼ŒCWNDå°±æŒ‰ç…§å¦‚ä¸‹å…¬å¼å¢é•¿ï¼š<br>$$<br>CWND +&#x3D; min(N, SMSS)<br>$$<br>å…¶ä¸­Næ˜¯æ­¤æ¬¡ç¡®è®¤ä¸­åŒ…å«çš„ä¹‹å‰æœªè¢«ç¡®è®¤çš„å­—èŠ‚æ•°ã€‚<br>å¦‚æœä¸æ–½åŠ å…¶ä»–æ‰‹æ®µï¼Œæ…¢å¯åŠ¨å¿…ç„¶ä½¿å¾—CWNDå¢é•¿çš„å¾ˆå¿«ï¼Œæ‰€ä»¥TCPæ‹¥å¡æ§åˆ¶ä¸­æœ‰å¦å¤–ä¸€ä¸ªéå¸¸é‡è¦çš„å˜é‡ï¼šæ…¢å¯åŠ¨é—¨é™ã€‚å½“CWNDè¶…è¿‡æ…¢å¯åŠ¨é—¨é™å€¼æ—¶ï¼ŒTCPå°†è¿›å…¥æ‹¥å¡é¿å…é˜¶æ®µã€‚</p><h4 id="å‘é€ç«¯åˆ¤æ–­å‘ç”Ÿæ‹¥å¡çš„ä¾æ®"><a href="#å‘é€ç«¯åˆ¤æ–­å‘ç”Ÿæ‹¥å¡çš„ä¾æ®" class="headerlink" title="å‘é€ç«¯åˆ¤æ–­å‘ç”Ÿæ‹¥å¡çš„ä¾æ®"></a>å‘é€ç«¯åˆ¤æ–­å‘ç”Ÿæ‹¥å¡çš„ä¾æ®</h4><ul><li>ä¼ è¾“è¶…æ—¶</li><li>æ¥æ”¶åˆ°é‡å¤çš„ç¡®è®¤æŠ¥æ–‡æ®µ</li></ul><h4 id="Linuxä¸‹çš„POSIXäº’æ–¥é”å’Œæ¡ä»¶å˜é‡"><a href="#Linuxä¸‹çš„POSIXäº’æ–¥é”å’Œæ¡ä»¶å˜é‡" class="headerlink" title="Linuxä¸‹çš„POSIXäº’æ–¥é”å’Œæ¡ä»¶å˜é‡"></a>Linuxä¸‹çš„POSIXäº’æ–¥é”å’Œæ¡ä»¶å˜é‡</h4><p>ç‰¢è®°è¿™å‡ ä¸ªå‡½æ•°ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pthread_mutex_init(&amp;mutex, NULL);</span><br><span class="line">pthread_mutex_destory(&amp;mutex);</span><br><span class="line">pthread_mutex_lock(&amp;mutex);</span><br><span class="line">pthread_mutex_trylock(&amp;mutex);</span><br><span class="line">pthread_mutex_unlock(&amp;mutex);</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pthread_cond_init(&amp;cond, NULL);</span><br><span class="line">pthread_cond_destory(&amp;cond);</span><br><span class="line">pthread_cond_broadcast(&amp;cond);</span><br><span class="line">pthread_cond_signal(&amp;cond);</span><br><span class="line">pthread_cond_wait(&amp;cond, &amp;mutex);</span><br></pre></td></tr></table></figure><p>æ¡ä»¶å˜é‡è¦é…åˆäº’æ–¥é”ä½¿ç”¨ã€‚è¿™é‡ŒæŒ‚ä¸€ä¸ªè®²çš„æ¯”è¾ƒæ¸…æ™°æ˜äº†çš„åšå®¢é“¾æ¥ï¼ˆ<a href="https://punmy.cn/2018/06/07/%E6%9D%A1%E4%BB%B6%E5%8F%98%E9%87%8F%EF%BC%88Condition%20Variables%EF%BC%89.html%EF%BC%89%EF%BC%8C%E4%B8%8B%E9%9D%A2%E6%98%AF%E4%BD%BF%E7%94%A8%E4%BA%92%E6%96%A5%E9%94%81%E5%8A%A0%E6%9D%A1%E4%BB%B6%E5%8F%98%E9%87%8F%E5%AE%9E%E7%8E%B0%E7%9A%84%E7%94%9F%E4%BA%A7%E8%80%85-%E6%B6%88%E8%B4%B9%E8%80%85%E6%A8%A1%E5%9E%8B">https://punmy.cn/2018/06/07/%E6%9D%A1%E4%BB%B6%E5%8F%98%E9%87%8F%EF%BC%88Condition%20Variables%EF%BC%89.htmlï¼‰ï¼Œä¸‹é¢æ˜¯ä½¿ç”¨äº’æ–¥é”åŠ æ¡ä»¶å˜é‡å®ç°çš„ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å‹</a></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;pthread.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">static</span> <span class="type">int</span> value = <span class="number">0</span>;</span><br><span class="line"><span class="type">static</span> <span class="type">pthread_mutex_t</span> mutex_;</span><br><span class="line"><span class="type">static</span> <span class="type">pthread_cond_t</span> condition_;</span><br><span class="line"><span class="type">static</span> <span class="type">pthread_t</span> notifying_thread;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setup</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="built_in">pthread_mutex_init</span>(&amp;mutex_, <span class="literal">NULL</span>);</span><br><span class="line">    <span class="built_in">pthread_cond_init</span>(&amp;condition_, <span class="literal">NULL</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">destory</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="built_in">pthread_mutex_destroy</span>(&amp;mutex_);</span><br><span class="line">    <span class="built_in">pthread_cond_destroy</span>(&amp;condition_);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span>* <span class="title">producer</span><span class="params">(<span class="type">void</span> *args)</span></span>&#123;</span><br><span class="line">    <span class="built_in">pthread_mutex_lock</span>(&amp;mutex_);</span><br><span class="line">    <span class="keyword">while</span>(value != <span class="number">10</span>)&#123;</span><br><span class="line">        value++;</span><br><span class="line">    &#125;</span><br><span class="line">    notifying_thread = <span class="built_in">pthread_self</span>();</span><br><span class="line">    <span class="built_in">pthread_mutex_unlock</span>(&amp;mutex_);</span><br><span class="line">    <span class="built_in">pthread_cond_signal</span>(&amp;condition_);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">waitCondition</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="built_in">pthread_mutex_lock</span>(&amp;mutex_);</span><br><span class="line">    <span class="keyword">while</span>(value != <span class="number">10</span>)&#123;</span><br><span class="line">        <span class="built_in">pthread_cond_wait</span>(&amp;condition_, &amp;mutex_);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;value is 10, the pthread is: %lu\n&quot;</span>, (<span class="type">unsigned</span> <span class="type">long</span>)notifying_thread);</span><br><span class="line">    <span class="built_in">pthread_mutex_unlock</span>(&amp;mutex_);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span>* <span class="title">consumer</span><span class="params">(<span class="type">void</span> *args)</span></span>&#123;</span><br><span class="line">    <span class="built_in">waitCondition</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="type">pthread_t</span> a1;</span><br><span class="line">    <span class="type">pthread_t</span> a2;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">setup</span>();</span><br><span class="line"></span><br><span class="line">    <span class="built_in">pthread_create</span>(&amp;a1, <span class="literal">NULL</span>, producer, <span class="literal">NULL</span>);</span><br><span class="line">    <span class="built_in">pthread_create</span>(&amp;a2, <span class="literal">NULL</span>, consumer, <span class="literal">NULL</span>);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">pthread_join</span>(a1, <span class="literal">NULL</span>);</span><br><span class="line">    <span class="built_in">pthread_join</span>(a2, <span class="literal">NULL</span>);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">destory</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å†™ä¸€ä¸ªç”Ÿäº§è€…-x2F-æ¶ˆè´¹è€…æ¨¡å‹ï¼ˆé‡‡ç”¨ä¿¡å·é‡ï¼‰"><a href="#å†™ä¸€ä¸ªç”Ÿäº§è€…-x2F-æ¶ˆè´¹è€…æ¨¡å‹ï¼ˆé‡‡ç”¨ä¿¡å·é‡ï¼‰" class="headerlink" title="å†™ä¸€ä¸ªç”Ÿäº§è€…&#x2F;æ¶ˆè´¹è€…æ¨¡å‹ï¼ˆé‡‡ç”¨ä¿¡å·é‡ï¼‰"></a>å†™ä¸€ä¸ªç”Ÿäº§è€…&#x2F;æ¶ˆè´¹è€…æ¨¡å‹ï¼ˆé‡‡ç”¨ä¿¡å·é‡ï¼‰</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;semaphore.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;pthread.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;unistd.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> MAX_BUFFERS = <span class="number">10</span>;</span><br><span class="line">std::queue&lt;<span class="type">int</span>&gt; buffer;</span><br><span class="line"></span><br><span class="line"><span class="type">sem_t</span> empty;</span><br><span class="line"><span class="type">sem_t</span> full;</span><br><span class="line"><span class="type">pthread_mutex_t</span> mutex_;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> *<span class="title">producer</span><span class="params">(<span class="type">void</span> *arg)</span></span>&#123;</span><br><span class="line">    <span class="type">int</span> num;</span><br><span class="line">    <span class="keyword">while</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">        num = <span class="built_in">rand</span>() % <span class="number">100</span>;</span><br><span class="line">        <span class="built_in">sem_wait</span>(&amp;empty);</span><br><span class="line">        <span class="built_in">pthread_mutex_lock</span>(&amp;mutex_);</span><br><span class="line">        buffer.<span class="built_in">push</span>(num);</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Produced&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">        <span class="built_in">sleep</span>(<span class="number">1</span>);</span><br><span class="line">        <span class="built_in">pthread_mutex_unlock</span>(&amp;mutex_);</span><br><span class="line">        <span class="built_in">sem_post</span>(&amp;full);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">nullptr</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> *<span class="title">comsumer</span><span class="params">(<span class="type">void</span> *arg)</span></span>&#123;</span><br><span class="line">    <span class="type">int</span> num;</span><br><span class="line">    <span class="keyword">while</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">        <span class="built_in">sem_wait</span>(&amp;full);</span><br><span class="line">        <span class="built_in">pthread_mutex_lock</span>(&amp;mutex_);</span><br><span class="line">        num = buffer.<span class="built_in">front</span>();</span><br><span class="line">        buffer.<span class="built_in">pop</span>();</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Comsumed&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">        <span class="built_in">sleep</span>(<span class="number">1</span>);</span><br><span class="line">        <span class="built_in">pthread_mutex_unlock</span>(&amp;mutex_);</span><br><span class="line">        <span class="built_in">sem_post</span>(&amp;empty);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">nullptr</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="type">pthread_t</span> proThread, comPthread;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">pthread_mutex_init</span>(&amp;mutex_, <span class="literal">NULL</span>);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">sem_init</span>(&amp;empty, <span class="number">0</span>, MAX_BUFFERS);</span><br><span class="line">    <span class="built_in">sem_init</span>(&amp;full, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">pthread_create</span>(&amp;proThread, <span class="literal">NULL</span>, producer, <span class="literal">NULL</span>);</span><br><span class="line">    <span class="built_in">pthread_create</span>(&amp;comPthread, <span class="literal">NULL</span>, comsumer, <span class="literal">NULL</span>);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">pthread_join</span>(proThread, <span class="literal">NULL</span>);</span><br><span class="line">    <span class="built_in">pthread_join</span>(comPthread, <span class="literal">NULL</span>);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">pthread_mutex_destroy</span>(&amp;mutex_);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">sem_destroy</span>(&amp;empty);</span><br><span class="line">    <span class="built_in">sem_destroy</span>(&amp;full);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="åŸºç±»çš„ææ„å‡½æ•°ä¸ºä»€ä¹ˆæ˜¯è™šå‡½æ•°"><a href="#åŸºç±»çš„ææ„å‡½æ•°ä¸ºä»€ä¹ˆæ˜¯è™šå‡½æ•°" class="headerlink" title="åŸºç±»çš„ææ„å‡½æ•°ä¸ºä»€ä¹ˆæ˜¯è™šå‡½æ•°"></a>åŸºç±»çš„ææ„å‡½æ•°ä¸ºä»€ä¹ˆæ˜¯è™šå‡½æ•°</h4><p>å½“åŸºç±»çš„ææ„å‡½æ•°ä¸æ˜¯è™šå‡½æ•°å¯èƒ½ä¼šå¯¼è‡´æ´¾ç”Ÿç±»å¯¹è±¡çš„ææ„å‡½æ•°ä¸è¢«è°ƒç”¨ã€‚ä»è€Œå¼•å‘èµ„æºæ³„éœ²æˆ–è€…å…¶ä»–æœªå®šä¹‰è¡Œä¸ºã€‚ä¸‹é¢ç»™å‡ºç¤ºä¾‹ä»£ç </p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Base</span>&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Base</span>() &#123; std::cout &lt;&lt; <span class="string">&quot;Base obj is constructed&quot;</span> &lt;&lt; std::endl; &#125;</span><br><span class="line">    <span class="comment">// ~Base() &#123; std::cout &lt;&lt; &quot;Base obj is deconstructed&quot; &lt;&lt; std::endl; &#125;</span></span><br><span class="line">    <span class="keyword">virtual</span> ~<span class="built_in">Base</span>() &#123; std::cout &lt;&lt; <span class="string">&quot;Base obj is deconstructed&quot;</span> &lt;&lt; std::endl; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Derived</span> : <span class="keyword">public</span> Base&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Derived</span>()&#123;</span><br><span class="line">        num_ = <span class="keyword">new</span> <span class="type">int</span>[<span class="number">10</span>];</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Derived is constructed&quot;</span> &lt;&lt; std::endl; </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ~<span class="built_in">Derived</span>()&#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Derived is deconstructed&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="type">int</span> *num_;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    Base *base = <span class="keyword">new</span> <span class="built_in">Derived</span>();</span><br><span class="line">    <span class="keyword">delete</span> base;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ä¸ºä»€ä¹ˆåŸºç±»ä¸ä½¿ç”¨è™šå‡½æ•°ä¼šå¯¼è‡´æ´¾ç”Ÿç±»çš„ææ„å‡½æ•°ä¸è°ƒç”¨ï¼ˆé™¤äº†å†™çš„å†…å®¹ï¼Œæœ€å¥½å†åŠ ä¸Šæœ‰å…³è™šå‡½æ•°è¡¨ã€æŒ‡é’ˆçš„å†…å®¹ï¼‰"><a href="#ä¸ºä»€ä¹ˆåŸºç±»ä¸ä½¿ç”¨è™šå‡½æ•°ä¼šå¯¼è‡´æ´¾ç”Ÿç±»çš„ææ„å‡½æ•°ä¸è°ƒç”¨ï¼ˆé™¤äº†å†™çš„å†…å®¹ï¼Œæœ€å¥½å†åŠ ä¸Šæœ‰å…³è™šå‡½æ•°è¡¨ã€æŒ‡é’ˆçš„å†…å®¹ï¼‰" class="headerlink" title="ä¸ºä»€ä¹ˆåŸºç±»ä¸ä½¿ç”¨è™šå‡½æ•°ä¼šå¯¼è‡´æ´¾ç”Ÿç±»çš„ææ„å‡½æ•°ä¸è°ƒç”¨ï¼ˆé™¤äº†å†™çš„å†…å®¹ï¼Œæœ€å¥½å†åŠ ä¸Šæœ‰å…³è™šå‡½æ•°è¡¨ã€æŒ‡é’ˆçš„å†…å®¹ï¼‰"></a>ä¸ºä»€ä¹ˆåŸºç±»ä¸ä½¿ç”¨è™šå‡½æ•°ä¼šå¯¼è‡´æ´¾ç”Ÿç±»çš„ææ„å‡½æ•°ä¸è°ƒç”¨ï¼ˆé™¤äº†å†™çš„å†…å®¹ï¼Œæœ€å¥½å†åŠ ä¸Šæœ‰å…³è™šå‡½æ•°è¡¨ã€æŒ‡é’ˆçš„å†…å®¹ï¼‰</h4><p>å½“ä¸€ä¸ªåŸºç±»æ²¡æœ‰è™šææ„å‡½æ•°ï¼Œå¹¶ä¸”é€šè¿‡åŸºç±»æŒ‡é’ˆåˆ é™¤ä¸€ä¸ªæ´¾ç”Ÿç±»å¯¹è±¡æ—¶ï¼Œåªæœ‰åŸºç±»çš„ææ„å‡½æ•°ä¼šè¢«è°ƒç”¨ã€‚è¿™æ˜¯å› ä¸ºç¼–è¯‘å™¨åœ¨ç¼–è¯‘æ—¶æœŸå†³å®šäº†è°ƒç”¨å“ªä¸ªææ„å‡½æ•°ï¼Œè€Œä¸æ˜¯åœ¨è¿è¡Œæ—¶æœŸï¼Œè¿™ç§æœºåˆ¶è¢«ç§°ä¸ºâ€œé™æ€ç»‘å®šâ€ã€‚</p><p>å¦‚æœåŸºç±»çš„ææ„å‡½æ•°æ˜¯è™šå‡½æ•°ï¼Œé‚£ä¹ˆç¼–è¯‘å™¨ä¼šåœ¨è¿è¡Œæ—¶å†³å®šè¦è°ƒç”¨å“ªä¸ªææ„å‡½æ•°ï¼Œè¿™ç§æœºåˆ¶ç§°ä¸ºâ€œåŠ¨æ€ç»‘å®šâ€æˆ–â€œå¤šæ€â€ã€‚</p><h4 id="æ‹·è´æ„é€ å‡½æ•°ä¸ºä»€ä¹ˆè¦ç”¨å¼•ç”¨"><a href="#æ‹·è´æ„é€ å‡½æ•°ä¸ºä»€ä¹ˆè¦ç”¨å¼•ç”¨" class="headerlink" title="æ‹·è´æ„é€ å‡½æ•°ä¸ºä»€ä¹ˆè¦ç”¨å¼•ç”¨"></a>æ‹·è´æ„é€ å‡½æ•°ä¸ºä»€ä¹ˆè¦ç”¨å¼•ç”¨</h4><p>é¿å…æ‹·è´æ„é€ å‡½æ•°æ— é™é€’å½’ä¸‹å»ï¼é‚£ä¼ å¼•ç”¨ä¸ºä»€ä¹ˆè¡Œå‘¢ï¼Ÿå›å¿†ä¸€ä¸‹å¼•ç”¨å®šä¹‰ï¼Œä¼ å¼•ç”¨äººå®¶æ ¹æœ¬å°±ä¸ä¼šæ¶‰åŠåˆ°æ„é€ å‡½æ•°è¿™ç©æ„ï¼Œå½¢å‚ç›¸å½“äºå®å‚çš„ä¸€ä¸ªåˆ«åã€‚</p><h4 id="å·¦å³å€¼çš„å·®åˆ«"><a href="#å·¦å³å€¼çš„å·®åˆ«" class="headerlink" title="å·¦å³å€¼çš„å·®åˆ«"></a>å·¦å³å€¼çš„å·®åˆ«</h4><h4 id="C-ä¸­çš„è™šç»§æ‰¿"><a href="#C-ä¸­çš„è™šç»§æ‰¿" class="headerlink" title="C++ä¸­çš„è™šç»§æ‰¿"></a>C++ä¸­çš„è™šç»§æ‰¿</h4><p>c++ä¸­çš„è™šç»§æ‰¿ä¸»è¦æ˜¯ä¸ºäº†è§£å†³å¤šç»§æ‰¿æƒ…å†µä¸­å­˜åœ¨çš„äºŒä¹‰æ€§é—®é¢˜ã€‚æ¯”å¦‚ï¼Œç°åœ¨ç±»Aä¸ºåŸºç±»ï¼Œç±»Bå’Œç±»Cç»§æ‰¿è‡ªç±»Aï¼Œç±»Dç»§æ‰¿è‡ªç±»Bå’Œç±»Cï¼Œå‡è®¾æ­¤æ—¶Aä¸­æœ‰ä¸€ä¸ªåä¸ºxçš„å˜é‡ä¸”Bå’ŒCéƒ½å®šä¹‰äº†xï¼Œå¦‚æœæ­¤æ—¶Dç›´æ¥è®¿é—®xä¼šäº§ç”ŸäºŒä¹‰æ€§é—®é¢˜ã€‚å› ä¸ºä¸æ¸…æ¥šæ˜¯A-&gt;B-&gt;Dè¿˜æ˜¯A-&gt;C-&gt;Dã€‚æ­¤æ—¶å¦‚æœè®©ç±»Bå’Œç±»Cè™šç»§æ‰¿è‡ªAï¼Œå°±ä½¿å¾—åœ¨æ´¾ç”Ÿç±»ä¸­åªä¿ç•™æœ‰ä¸€ä»½æˆå‘˜å˜é‡xï¼Œè§£å†³äº†äºŒä¹‰æ€§é—®é¢˜ã€‚<br>å‚è€ƒé“¾æ¥ï¼š<br><a href="http://c.biancheng.net/view/2280.html">http://c.biancheng.net/view/2280.html</a><br><a href="https://zhuanlan.zhihu.com/p/41309205%EF%BC%88%E8%99%9A%E7%BB%A7%E6%89%BF%E3%80%81%E8%99%9A%E5%87%BD%E6%95%B0%E9%83%BD%E8%AE%B2%E4%BA%86%EF%BC%8C%E5%8D%81%E5%88%86%E8%AF%A6%E7%BB%86%EF%BC%89">https://zhuanlan.zhihu.com/p/41309205ï¼ˆè™šç»§æ‰¿ã€è™šå‡½æ•°éƒ½è®²äº†ï¼Œååˆ†è¯¦ç»†ï¼‰</a></p><h4 id="C-ä¸­çš„forwardå‡½æ•°"><a href="#C-ä¸­çš„forwardå‡½æ•°" class="headerlink" title="C++ä¸­çš„forwardå‡½æ•°"></a>C++ä¸­çš„forwardå‡½æ•°</h4><p>å·¦å€¼å¼•ç”¨å’Œå³å€¼å¼•ç”¨çš„ç»“æœéƒ½æ˜¯å·¦å€¼ï¼Œæ— æ³•é€šè¿‡å¼•ç”¨åŒºåˆ†åŸæœ¬å˜é‡çš„å·¦å³å€¼ï¼Œforwardå¯ä»¥ä¿æŒå˜é‡çš„åŸæœ¬çš„å·¦å³å€¼å±æ€§ï¼Œå¸®åŠ©æˆ‘ä»¬åŒºåˆ†ã€‚</p><h4 id="å¦‚ä½•åˆ¤æ–­TCPæ–­å¼€"><a href="#å¦‚ä½•åˆ¤æ–­TCPæ–­å¼€" class="headerlink" title="å¦‚ä½•åˆ¤æ–­TCPæ–­å¼€"></a>å¦‚ä½•åˆ¤æ–­TCPæ–­å¼€</h4><ol><li>å‘é€å¿ƒè·³æ¶ˆæ¯</li><li>åˆ©ç”¨recv&#x2F;sendå‡½æ•°çš„è¿”å›å€¼<ul><li>recvè¿”å›0ä»£è¡¨å¯¹æ–¹å…³é—­äº†è¿æ¥</li><li>recvè¿”å›-1å¹¶ä¸”errno&#x3D;&#x3D;EAGAINæˆ–è€…EWOULDBLOCKæ—¶ï¼Œè¡¨ç¤ºæ²¡æœ‰æ•°æ®å¯è¯»ï¼Œå¯ä»¥ç¨åå†è¯•ã€‚</li><li><strong>sendè¿”å›éè´Ÿå€¼</strong>:<ul><li><code>send</code>è¿”å›çš„æ˜¯å®é™…å‘é€çš„å­—èŠ‚æ•°ï¼Œè¿™å¯èƒ½ä¼šå°‘äºä½ è¯·æ±‚å‘é€çš„å­—èŠ‚æ•°ï¼ˆç¼“å†²åŒºå·²æ»¡ï¼‰ã€‚</li><li>å¦‚æœæ²¡æœ‰å¯ç”¨çš„ç¼“å†²åŒºç©ºé—´ï¼Œé‚£ä¹ˆåœ¨éé˜»å¡æ¨¡å¼ä¸‹ï¼Œ<code>send</code>å¯èƒ½ä¼šè¿”å›<code>EAGAIN</code>æˆ–<code>EWOULDBLOCK</code>ã€‚</li></ul></li><li><strong>sendè¿”å›-1</strong>:<ul><li>ä¸<code>recv</code>ç±»ä¼¼ï¼Œè¿™è¡¨ç¤ºå‡ºç°äº†é”™è¯¯ã€‚</li><li>å¯ä»¥ä½¿ç”¨<code>perror</code>ã€<code>strerror</code>æˆ–æ£€æŸ¥<code>errno</code>æ¥ç¡®å®šå…·ä½“çš„é”™è¯¯åŸå› ã€‚</li><li>å¸¸è§çš„é”™è¯¯åŸå› åŒ…æ‹¬<code>EPIPE</code>ï¼ˆå¯¹ç«¯å·²å…³é—­ï¼Œæœ¬ç«¯ä»å°è¯•å‘é€æ•°æ®å¯¼è‡´çš„â€Broken pipeâ€é”™è¯¯ï¼‰å’Œ<code>ECONNRESET</code>ï¼ˆè¿æ¥è¢«å¯¹ç«¯é‡ç½®ï¼‰ã€‚</li></ul></li></ul></li><li>åˆ©ç”¨tcpè‡ªå¸¦çš„keepaliveæœºåˆ¶</li></ol><h4 id="å¦‚ä½•æŸ¥çœ‹ç³»ç»Ÿçš„æœ€å¤§è¿›ç¨‹æ•°å’Œçº¿ç¨‹æ•°"><a href="#å¦‚ä½•æŸ¥çœ‹ç³»ç»Ÿçš„æœ€å¤§è¿›ç¨‹æ•°å’Œçº¿ç¨‹æ•°" class="headerlink" title="å¦‚ä½•æŸ¥çœ‹ç³»ç»Ÿçš„æœ€å¤§è¿›ç¨‹æ•°å’Œçº¿ç¨‹æ•°"></a>å¦‚ä½•æŸ¥çœ‹ç³»ç»Ÿçš„æœ€å¤§è¿›ç¨‹æ•°å’Œçº¿ç¨‹æ•°</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cat /proc/sys/kernel/pid_max    # æœ€å¤§è¿›ç¨‹æ•°</span><br><span class="line">cat /proc/sys/kernel/threads-max# æœ€å¤§çº¿ç¨‹æ•°</span><br></pre></td></tr></table></figure><h4 id="git-rebaseå’Œgit-mergeçš„åŒºåˆ«ï¼ˆhttps-joyohub-com-2020-04-06-git-rebase-ï¼‰"><a href="#git-rebaseå’Œgit-mergeçš„åŒºåˆ«ï¼ˆhttps-joyohub-com-2020-04-06-git-rebase-ï¼‰" class="headerlink" title="git rebaseå’Œgit mergeçš„åŒºåˆ«ï¼ˆhttps://joyohub.com/2020/04/06/git-rebase/ï¼‰"></a>git rebaseå’Œgit mergeçš„åŒºåˆ«ï¼ˆ<a href="https://joyohub.com/2020/04/06/git-rebase/%EF%BC%89">https://joyohub.com/2020/04/06/git-rebase/ï¼‰</a></h4><h4 id="C-calss-å’Œ-structçš„åŒºåˆ«"><a href="#C-calss-å’Œ-structçš„åŒºåˆ«" class="headerlink" title="C++ calss å’Œ structçš„åŒºåˆ«"></a>C++ calss å’Œ structçš„åŒºåˆ«</h4><p>classé»˜è®¤è®¿é—®ç±»å‹æ˜¯privateï¼Œstructé»˜è®¤è®¿é—®ç±»å‹æ˜¯public</p><h4 id="æŒ‡é’ˆå’Œå¼•ç”¨çš„åŒºåˆ«"><a href="#æŒ‡é’ˆå’Œå¼•ç”¨çš„åŒºåˆ«" class="headerlink" title="æŒ‡é’ˆå’Œå¼•ç”¨çš„åŒºåˆ«"></a>æŒ‡é’ˆå’Œå¼•ç”¨çš„åŒºåˆ«</h4><ol><li>æŒ‡é’ˆæ˜¯ä¸€ä¸ªå˜é‡ï¼Œå®ƒä¿å­˜äº†å¦ä¸€ä¸ªå˜é‡çš„å†…å­˜åœ°å€ï¼›å¼•ç”¨æ˜¯å¦ä¸€ä¸ªå˜é‡çš„åˆ«åï¼Œä¸åŸå˜é‡å…±äº«å†…å­˜åœ°å€ã€‚</li><li>æŒ‡é’ˆå¯ä»¥è¢«é‡æ–°èµ‹å€¼ï¼ŒæŒ‡å‘æ–°çš„å¯¹è±¡ï¼›å¼•ç”¨ç»‘å®šå¯¹è±¡åä¸èƒ½æ›´æ”¹ã€‚</li><li>æŒ‡é’ˆå¯ä»¥ä¸ºnullptrï¼›å¼•ç”¨å¿…é¡»åˆå§‹åŒ–ã€‚</li></ol><h4 id="ä¸ºä»€ä¹ˆæ¨¡æ¿ç±»çš„å£°æ˜å’Œå®ç°ä¸èƒ½åˆ†åˆ«å†™åœ¨-hæ–‡ä»¶å’Œ-cppæ–‡ä»¶ä¸­"><a href="#ä¸ºä»€ä¹ˆæ¨¡æ¿ç±»çš„å£°æ˜å’Œå®ç°ä¸èƒ½åˆ†åˆ«å†™åœ¨-hæ–‡ä»¶å’Œ-cppæ–‡ä»¶ä¸­" class="headerlink" title="ä¸ºä»€ä¹ˆæ¨¡æ¿ç±»çš„å£°æ˜å’Œå®ç°ä¸èƒ½åˆ†åˆ«å†™åœ¨.hæ–‡ä»¶å’Œ.cppæ–‡ä»¶ä¸­"></a>ä¸ºä»€ä¹ˆæ¨¡æ¿ç±»çš„å£°æ˜å’Œå®ç°ä¸èƒ½åˆ†åˆ«å†™åœ¨.hæ–‡ä»¶å’Œ.cppæ–‡ä»¶ä¸­</h4><p>é¦–å…ˆï¼Œæ¨¡æ¿ä¸æ˜¯ä¼ ç»Ÿæ„ä¹‰ä¸Šçš„ä»£ç ã€‚å®ƒæ›´åƒæ˜¯ç¼–è¯‘å™¨çš„â€œä»£ç ç”Ÿæˆå·¥å…·â€ã€‚å½“ä½ ä½¿ç”¨ä¸€ä¸ªç‰¹å®šçš„æ¨¡æ¿ç±»å‹ï¼ˆä¾‹å¦‚<code>std::vector&lt;int&gt;</code>)ï¼Œ<strong>ç¼–è¯‘å™¨ä¼šä¸ºä½ ç”Ÿæˆè¿™ç§ç±»å‹çš„å®ä¾‹ä»£ç </strong>ã€‚ä¸ºäº†åšåˆ°è¿™ä¸€ç‚¹ï¼Œç¼–è¯‘å™¨éœ€è¦èƒ½å¤Ÿçœ‹åˆ°æ¨¡æ¿çš„å®Œæ•´å®šä¹‰ã€‚æ³¨æ„ï¼šè¿™å°±æ˜¯æ¨¡æ¿å’Œæ™®é€šç±»çš„æœ€å¤§åŒºåˆ«ã€‚æ™®é€šç±»åœ¨ç¼–è¯‘é˜¶æ®µå¹¶æ²¡æœ‰ï¼ˆå¹¶ä¸ä¾èµ–äºï¼‰ç¼–è¯‘æ—¶çš„ç±»å‹ç‰¹åŒ–ï¼Œåªéœ€è¦åœ¨é“¾æ¥é˜¶æ®µå°†æ‰€æœ‰.cppæ–‡ä»¶é“¾æ¥åœ¨ä¸€èµ·å°±å¥½äº†ã€‚è€Œå¦‚æœæ¨¡æ¿åˆ†å¼€å†™ï¼Œå…¶ä»–ä½¿ç”¨æ¨¡æ¿çš„.cppæ–‡ä»¶åœ¨ç¼–è¯‘æ—¶æ‰¾ä¸åˆ°å®šä¹‰ï¼Œå¯¼è‡´é“¾æ¥é”™è¯¯ã€‚</p><h4 id="åŠ¨æ€é“¾æ¥ä¸é™æ€é“¾æ¥"><a href="#åŠ¨æ€é“¾æ¥ä¸é™æ€é“¾æ¥" class="headerlink" title="åŠ¨æ€é“¾æ¥ä¸é™æ€é“¾æ¥"></a>åŠ¨æ€é“¾æ¥ä¸é™æ€é“¾æ¥</h4><p>é™æ€é“¾æ¥ï¼ˆ.a&#x2F;.libï¼‰ï¼šæŠŠè¦è°ƒç”¨çš„å‡½æ•°æˆ–è€…è¿‡ç¨‹é“¾æ¥åˆ°å¯æ‰§è¡Œæ–‡ä»¶ä¸­ï¼Œæˆä¸ºå¯æ‰§è¡Œæ–‡ä»¶çš„ä¸€éƒ¨åˆ†ã€‚å¦‚æœå¤šä¸ªç¨‹åºä½¿ç”¨ç›¸åŒçš„åº“ï¼Œé‚£ä¹ˆè¯¥åº“çš„ä»£ç åœ¨æ¯ä¸ªç¨‹åºä¸­éƒ½ä¼šè¢«å¤åˆ¶ï¼Œè¿™æµªè´¹äº†ç£ç›˜å’Œå†…å­˜ç©ºé—´ã€‚ä½†æ˜¯æ‰€æœ‰ä»£ç éƒ½åœ¨å¯æ‰§è¡Œæ–‡ä»¶ä¸­ï¼Œæ²¡æœ‰è¿è¡Œæ—¶é“¾æ¥å¼€é”€ã€‚</p><p>åŠ¨æ€é“¾æ¥ï¼ˆ.so&#x2F;.ddlï¼‰ï¼šåŠ¨æ€é“¾æ¥æ‰€è°ƒç”¨çš„å‡½æ•°ä»£ç å¹¶æ²¡æœ‰è¢«æ‹·è´åˆ°åº”ç”¨ç¨‹åºçš„å¯æ‰§è¡Œæ–‡ä»¶ä¸­å»ï¼Œè€Œæ˜¯ä»…ä»…åœ¨å…¶ä¸­åŠ å…¥äº†æ‰€è°ƒç”¨å‡½æ•°çš„æè¿°ä¿¡æ¯ï¼ˆå¾€å¾€æ˜¯ä¸€äº›é‡å®šä½ä¿¡æ¯ï¼‰ã€‚ä»…å½“åº”ç”¨ç¨‹åºè¢«è£…å…¥å†…å­˜å¼€å§‹è¿è¡Œæ—¶ï¼Œåœ¨Windowsçš„ç®¡ç†ä¸‹ï¼Œæ‰åœ¨åº”ç”¨ç¨‹åºä¸ç›¸åº”çš„DLLä¹‹é—´å»ºç«‹é“¾æ¥å…³ç³»ã€‚å½“è¦æ‰§è¡Œæ‰€è°ƒç”¨DLLä¸­çš„å‡½æ•°æ—¶ï¼Œæ ¹æ®é“¾æ¥äº§ç”Ÿçš„é‡å®šä½ä¿¡æ¯ï¼ŒWindowsæ‰è½¬å»æ‰§è¡ŒDLLä¸­ç›¸åº”çš„å‡½æ•°ä»£ç ã€‚å¤šä»½ä»£ç å¯ä»¥å…±äº«åŒä¸€ä»½åº“ä»£ç ã€‚</p><h4 id="pragma-packç¼–è¯‘å®"><a href="#pragma-packç¼–è¯‘å®" class="headerlink" title="pragma packç¼–è¯‘å®"></a>pragma packç¼–è¯‘å®</h4><p>pragma packç”¨äºæŒ‡å®šå†…å­˜å¯¹é½å€¼ã€‚</p><h4 id="vectoråº•å±‚å®ç°åŸç†"><a href="#vectoråº•å±‚å®ç°åŸç†" class="headerlink" title="vectoråº•å±‚å®ç°åŸç†"></a>vectoråº•å±‚å®ç°åŸç†</h4><p>ç†è§£vectorçš„å®ç°ä¸»è¦è€ƒè™‘å››ä¸ªä¸œè¥¿å°±å¥½äº†ï¼šä¸‰ä¸ªæŒ‡é’ˆåŠ åŠ¨æ€å†…å­˜ç”³è¯·ã€‚</p><p>ä¸‰ä¸ªæŒ‡é’ˆï¼š</p><ul><li>first_ï¼šæŒ‡å‘vectorå®¹å™¨å¯¹è±¡èµ·å§‹åœ°å€çš„ä½ç½®</li><li>last_ï¼šæŒ‡å‘vectorå®¹å™¨å¯¹è±¡ä¸­å½“å‰æœ€åä¸€ä¸ªå…ƒç´ çš„æœ«å°¾å­—èŠ‚</li><li>end_ï¼šæŒ‡å‘vectorå®¹å™¨æ‰€å å†…å­˜ç©ºé—´çš„æœ€åä¸€ä¸ªå­—èŠ‚</li></ul><p><img src="png1.gif"></p><p>åŠ¨æ€å†…å­˜ç”³è¯·ï¼š</p><p>å½“ vector çš„å¤§å°å’Œå®¹é‡ç›¸ç­‰ï¼ˆsize&#x3D;&#x3D;capacityï¼‰ä¹Ÿå°±æ˜¯æ»¡è½½æ—¶ï¼Œå¦‚æœå†å‘å…¶æ·»åŠ å…ƒç´ ï¼Œé‚£ä¹ˆ vector å°±éœ€è¦æ‰©å®¹ã€‚vector å®¹å™¨æ‰©å®¹çš„è¿‡ç¨‹éœ€è¦ç»å†ä»¥ä¸‹ 3 æ­¥ï¼š</p><ol><li>å®Œå…¨å¼ƒç”¨ç°æœ‰çš„å†…å­˜ç©ºé—´ï¼Œé‡æ–°ç”³è¯·æ›´å¤§çš„å†…å­˜ç©ºé—´ï¼›</li><li>å°†æ—§å†…å­˜ç©ºé—´ä¸­çš„æ•°æ®ï¼ŒæŒ‰åŸæœ‰é¡ºåºç§»åŠ¨åˆ°æ–°çš„å†…å­˜ç©ºé—´ä¸­ï¼›</li><li>æœ€åå°†æ—§çš„å†…å­˜ç©ºé—´é‡Šæ”¾ã€‚</li></ol><h4 id="å¸¸é‡æŒ‡é’ˆå’ŒæŒ‡é’ˆå¸¸é‡"><a href="#å¸¸é‡æŒ‡é’ˆå’ŒæŒ‡é’ˆå¸¸é‡" class="headerlink" title="å¸¸é‡æŒ‡é’ˆå’ŒæŒ‡é’ˆå¸¸é‡"></a>å¸¸é‡æŒ‡é’ˆå’ŒæŒ‡é’ˆå¸¸é‡</h4><p>å¸¸é‡æŒ‡é’ˆï¼šè®°å¿†æ–¹æ³•ï¼ˆå¸¸é‡çš„æŒ‡é’ˆï¼‰ï¼ŒæŒ‡é’ˆæŒ‡å‘çš„å¯¹è±¡æ˜¯ä¸€ä¸ªå¸¸é‡ï¼Œåªèƒ½è¯»å–æŒ‡é’ˆæŒ‡å‘çš„å†…å®¹ï¼Œä¸èƒ½ä¿®æ”¹æŒ‡é’ˆæŒ‡å‘çš„å†…å®¹ã€‚</p><p>æŒ‡é’ˆå¸¸é‡ï¼šæŒ‡é’ˆæœ¬èº«æ˜¯ä¸€ä¸ªå¸¸é‡ï¼Œä¸èƒ½ä¿®æ”¹æŒ‡é’ˆæŒ‡å‘çš„åœ°å€ï¼Œå¯ä»¥ä¿®æ”¹æŒ‡é’ˆæŒ‡å‘åœ°å€çš„å†…å®¹ã€‚</p><h4 id="C-ä¸­ä¸€äº›ç‰¹åˆ«çš„å…³é”®å­—ï¼ˆdefaultï¼Œoverrideã€finalã€volatileï¼‰"><a href="#C-ä¸­ä¸€äº›ç‰¹åˆ«çš„å…³é”®å­—ï¼ˆdefaultï¼Œoverrideã€finalã€volatileï¼‰" class="headerlink" title="C++ä¸­ä¸€äº›ç‰¹åˆ«çš„å…³é”®å­—ï¼ˆdefaultï¼Œoverrideã€finalã€volatileï¼‰"></a>C++ä¸­ä¸€äº›ç‰¹åˆ«çš„å…³é”®å­—ï¼ˆdefaultï¼Œoverrideã€finalã€volatileï¼‰</h4><p>å‚è€ƒé“¾æ¥ï¼š<a href="https://blog.csdn.net/u011947630/article/details/103062773">https://blog.csdn.net/u011947630/article/details/103062773</a></p><h4 id="å­—èŠ‚ç®—æ³•é¢˜ï¼šå°äºNçš„æœ€å¤§æ•°"><a href="#å­—èŠ‚ç®—æ³•é¢˜ï¼šå°äºNçš„æœ€å¤§æ•°" class="headerlink" title="å­—èŠ‚ç®—æ³•é¢˜ï¼šå°äºNçš„æœ€å¤§æ•°"></a>å­—èŠ‚ç®—æ³•é¢˜ï¼šå°äºNçš„æœ€å¤§æ•°</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"> </span><br><span class="line"><span class="type">int</span> ans;</span><br><span class="line"><span class="type">int</span> value = <span class="number">14132</span>;</span><br><span class="line">string valueStr = <span class="built_in">to_string</span>(value);</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; nums = &#123;<span class="number">1</span>,<span class="number">4</span>,<span class="number">9</span>&#125;;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">dfs</span><span class="params">(<span class="type">int</span> index, <span class="type">bool</span> judge, <span class="type">int</span> temp)</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">if</span>(index == valueStr.<span class="built_in">size</span>()) &#123;</span><br><span class="line">        ans = temp;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(judge) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">dfs</span>(index + <span class="number">1</span>, <span class="literal">true</span>, temp * <span class="number">10</span> + (nums[nums.<span class="built_in">size</span>() - <span class="number">1</span>]));    </span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="type">int</span> val = valueStr[index] - <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = nums.<span class="built_in">size</span>() - <span class="number">1</span>; i &gt;= <span class="number">0</span>; --i) &#123;</span><br><span class="line">            <span class="keyword">if</span>(val == nums[i]) &#123;</span><br><span class="line">                <span class="keyword">if</span>(<span class="built_in">dfs</span>(index + <span class="number">1</span>, <span class="literal">false</span>, temp * <span class="number">10</span> + nums[i])) &#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (val &gt; nums[i]) &#123;</span><br><span class="line">                <span class="keyword">if</span>(<span class="built_in">dfs</span>(index + <span class="number">1</span>, <span class="literal">true</span>, temp * <span class="number">10</span> + nums[i])) &#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//æœ€ç»ˆç»“æœä¸ºç©º</span></span><br><span class="line">        <span class="keyword">if</span>(index != <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//å°‘äº†ä¸€ä½ï¼Œæ˜¾ç„¶å°äº†</span></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">dfs</span>(index + <span class="number">1</span>, <span class="literal">true</span>, temp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"> </span><br><span class="line">    <span class="built_in">dfs</span>(<span class="number">0</span>, <span class="literal">false</span>, <span class="number">0</span>);</span><br><span class="line">    cout &lt;&lt; ans &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å¦‚æœåŒæ—¶æœ‰å¤§é‡å®¢æˆ·å¹¶å‘å»ºç«‹è¿æ¥ï¼ŒæœåŠ¡å™¨ç«¯æœ‰ä»€ä¹ˆæœºåˆ¶è¿›è¡Œå¤„ç†"><a href="#å¦‚æœåŒæ—¶æœ‰å¤§é‡å®¢æˆ·å¹¶å‘å»ºç«‹è¿æ¥ï¼ŒæœåŠ¡å™¨ç«¯æœ‰ä»€ä¹ˆæœºåˆ¶è¿›è¡Œå¤„ç†" class="headerlink" title="å¦‚æœåŒæ—¶æœ‰å¤§é‡å®¢æˆ·å¹¶å‘å»ºç«‹è¿æ¥ï¼ŒæœåŠ¡å™¨ç«¯æœ‰ä»€ä¹ˆæœºåˆ¶è¿›è¡Œå¤„ç†"></a>å¦‚æœåŒæ—¶æœ‰å¤§é‡å®¢æˆ·å¹¶å‘å»ºç«‹è¿æ¥ï¼ŒæœåŠ¡å™¨ç«¯æœ‰ä»€ä¹ˆæœºåˆ¶è¿›è¡Œå¤„ç†</h4><ol><li>å¤šè¿›ç¨‹å’Œå¤šçº¿ç¨‹</li><li>è¿æ¥æ± </li><li>å¼‚æ­¥I&#x2F;O</li><li>è´Ÿè½½å‡è¡¡</li><li>é™æµ</li><li>çŸ­è¿æ¥ä¸é•¿è¿æ¥</li></ol><h4 id="HTTPå’ŒTCPä¹‹é—´çš„å…³ç³»"><a href="#HTTPå’ŒTCPä¹‹é—´çš„å…³ç³»" class="headerlink" title="HTTPå’ŒTCPä¹‹é—´çš„å…³ç³»"></a>HTTPå’ŒTCPä¹‹é—´çš„å…³ç³»</h4><ol><li><p>HTTPæ˜¯ä¸€ä¸ªåº”ç”¨å±‚åè®®ï¼ŒTCPæ˜¯ä¸€ä¸ªä¼ è¾“å±‚åè®®</p></li><li><p>HTTPä¾èµ–äºTCPæ¥è¿›è¡Œæ•°æ®çš„ä¼ è¾“ã€‚æ¯”å¦‚ï¼Œå½“ä½ ä½¿ç”¨æµè§ˆå™¨è®¿é—®ä¸€ä¸ªç½‘é¡µæ—¶ï¼ŒèƒŒåå‘ç”Ÿçš„æ˜¯HTTPè¯·æ±‚å’Œå“åº”çš„äº¤æ¢ï¼Œè€Œè¿™äº›HTTPæ•°æ®åŒ…æ˜¯é€šè¿‡TCPè¿æ¥å‘é€çš„ã€‚</p></li><li><p>HTTP&#x2F;1.0å¯¹äºæ¯ä¸€ä¸ªè¯·æ±‚-å“åº”éƒ½ä¼šæ–°å»ºä¸€ä¸ªTCPè¿æ¥ï¼Œä½¿ç”¨å®Œä¹‹åå°±å…³é—­</p><p>HTPP&#x2F;1.1å¼•å…¥äº†keep-aliveæœºåˆ¶ï¼Œå…è®¸åœ¨å•ä¸ªTCPè¿æ¥ä¸Šå‘é€å¤šä¸ªHTTPè¯·æ±‚å’Œå“åº”</p><p>HTTP&#x2F;2è¿›ä¸€æ­¥æ‰©å±•äº†è¿™ç§æœºåˆ¶ï¼Œå…è®¸åœ¨å•ä¸ªTCPè¿æ¥ä¸ŠåŒæ—¶å¤šè·¯å¤ç”¨å¤šä¸ªHTTPè¯·æ±‚å’Œå“åº”</p></li></ol><h4 id="HTTPä»è¯·æ±‚åˆ°å¾—åˆ°ç»“æœçš„è¿‡ç¨‹"><a href="#HTTPä»è¯·æ±‚åˆ°å¾—åˆ°ç»“æœçš„è¿‡ç¨‹" class="headerlink" title="HTTPä»è¯·æ±‚åˆ°å¾—åˆ°ç»“æœçš„è¿‡ç¨‹"></a>HTTPä»è¯·æ±‚åˆ°å¾—åˆ°ç»“æœçš„è¿‡ç¨‹</h4><ol><li><p><strong>åŸŸåè§£æ</strong>ï¼š</p><ul><li>å®¢æˆ·ç«¯ï¼ˆé€šå¸¸æ˜¯æµè§ˆå™¨ï¼‰é¦–å…ˆæ£€æŸ¥URLæ˜¯å¦åŒ…å«åŸŸåï¼ˆä¾‹å¦‚ <code>www.example.com</code>ï¼‰ã€‚</li><li>å¦‚æœåŒ…å«ï¼Œå®¢æˆ·ç«¯é¦–å…ˆä¼šæŸ¥æ‰¾å…¶DNSç¼“å­˜æ˜¯å¦å·²ç»æœ‰è¯¥åŸŸåçš„IPåœ°å€ã€‚</li><li>å¦‚æœæ²¡æœ‰ï¼Œå®¢æˆ·ç«¯ä¼šå‘èµ·ä¸€ä¸ªDNSæŸ¥è¯¢åˆ°é…ç½®çš„DNSæœåŠ¡å™¨ï¼Œä»¥è·å–å¯¹åº”çš„IPåœ°å€ã€‚</li></ul></li><li><p><strong>å»ºç«‹TCPè¿æ¥</strong>ï¼š</p><ul><li>ä½¿ç”¨ä»DNSæŸ¥è¯¢å¾—åˆ°çš„IPåœ°å€ï¼Œå®¢æˆ·ç«¯å°è¯•ä¸æœåŠ¡å™¨çš„80ç«¯å£ï¼ˆHTTPï¼‰æˆ–443ç«¯å£ï¼ˆHTTPSï¼‰å»ºç«‹ä¸€ä¸ªTCPè¿æ¥ã€‚</li><li>è¿™æ¶‰åŠåˆ°TCPä¸‰æ¬¡æ¡æ‰‹è¿‡ç¨‹ã€‚</li></ul></li><li><p><strong>ï¼ˆHTTPSçš„æƒ…å†µï¼‰SSL&#x2F;TLSæ¡æ‰‹</strong>ï¼š</p><ul><li>å¦‚æœæ˜¯HTTPSè¯·æ±‚ï¼Œä¸€æ—¦TCPè¿æ¥å»ºç«‹ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¼šè¿›è¡ŒSSL&#x2F;TLSæ¡æ‰‹æ¥å»ºç«‹åŠ å¯†çš„é€šä¿¡é€šé“ã€‚</li></ul></li><li><p><strong>å‘é€HTTPè¯·æ±‚</strong>ï¼š</p><ul><li>è¿æ¥å»ºç«‹åï¼Œå®¢æˆ·ç«¯ä¼šå‘é€HTTPè¯·æ±‚æŠ¥æ–‡ã€‚è¿™åŒ…æ‹¬è¯·æ±‚è¡Œï¼ˆä¾‹å¦‚ <code>GET /path HTTP/1.1</code>ï¼‰ã€è¯·æ±‚å¤´å’Œï¼ˆå¯¹äºæŸäº›è¯·æ±‚å¦‚POSTï¼‰è¯·æ±‚ä½“ã€‚</li></ul></li><li><p><strong>æœåŠ¡å™¨å¤„ç†è¯·æ±‚</strong>ï¼š</p><ul><li>æœåŠ¡å™¨æ¥æ”¶åˆ°è¯·æ±‚åï¼Œç”±å…¶HTTPæœåŠ¡è½¯ä»¶ï¼ˆå¦‚Apacheã€Nginxç­‰ï¼‰å¤„ç†ã€‚</li><li>æœåŠ¡å™¨å¯èƒ½ä¼šæ ¹æ®è¯·æ±‚è·¯å¾„æŸ¥è¯¢æ–‡ä»¶ã€ä¸æ•°æ®åº“äº¤äº’æˆ–è°ƒç”¨å…¶ä»–æœåŠ¡ï¼Œä»¥ç”Ÿæˆå“åº”ã€‚</li></ul></li><li><p><strong>æœåŠ¡å™¨å‘é€å“åº”</strong>ï¼š</p><ul><li>æœåŠ¡å™¨ç”Ÿæˆå“åº”åï¼Œå®ƒå°†å“åº”æŠ¥æ–‡å‘é€å›å®¢æˆ·ç«¯ã€‚å“åº”é€šå¸¸åŒ…æ‹¬çŠ¶æ€è¡Œï¼ˆä¾‹å¦‚ <code>HTTP/1.1 200 OK</code>ï¼‰ã€å“åº”å¤´å’Œå“åº”ä½“ã€‚</li><li>å¯¹äºåŠ¨æ€å†…å®¹ï¼Œå¦‚ç”±PHPã€Pythonæˆ–Node.jsç­‰åç«¯è¯­è¨€ç”Ÿæˆçš„é¡µé¢ï¼ŒæœåŠ¡å™¨å¯èƒ½ä¼šè¿›è¡Œä¸€äº›é¢å¤–çš„å¤„ç†æ¥ç”Ÿæˆå“åº”å†…å®¹ã€‚</li></ul></li><li><p><strong>å®¢æˆ·ç«¯å¤„ç†å“åº”</strong>ï¼š</p><ul><li>å®¢æˆ·ç«¯ï¼ˆå¦‚æµè§ˆå™¨ï¼‰æ¥æ”¶å“åº”ï¼Œå¹¶åŸºäºå“åº”å†…å®¹é‡‡å–ç›¸åº”çš„è¡ŒåŠ¨ã€‚</li><li>å¦‚æœå“åº”æ˜¯ä¸€ä¸ªHTMLé¡µé¢ï¼Œæµè§ˆå™¨ä¼šå¼€å§‹è§£æHTMLï¼Œå¹¶å¯èƒ½å‘èµ·å…¶ä»–è¯·æ±‚æ¥è·å–é¡µé¢ä¸Šçš„èµ„æºï¼Œå¦‚å›¾ç‰‡ã€CSSã€JavaScriptæ–‡ä»¶ç­‰ã€‚</li></ul></li><li><p><strong>å…³é—­è¿æ¥</strong>ï¼š</p><ul><li>ä¸€æ—¦æ•°æ®äº¤æ¢å®Œæˆï¼Œé€šå¸¸ä¼šå…³é—­TCPè¿æ¥ã€‚ç„¶è€Œï¼Œåœ¨HTTP&#x2F;1.1ä¸­ï¼Œé»˜è®¤ä½¿ç”¨<code>keep-alive</code>ï¼Œæ„å‘³ç€è¿æ¥å¯ä»¥è¢«å¤ç”¨ï¼Œä»è€Œå‡å°‘åç»­è¯·æ±‚çš„å»¶è¿Ÿã€‚</li></ul></li></ol><h4 id="httpså’Œhttpçš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Œhttpså…·ä½“æ˜¯æ€ä¹ˆåšçš„"><a href="#httpså’Œhttpçš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Œhttpså…·ä½“æ˜¯æ€ä¹ˆåšçš„" class="headerlink" title="httpså’Œhttpçš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Œhttpså…·ä½“æ˜¯æ€ä¹ˆåšçš„"></a>httpså’Œhttpçš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Œhttpså…·ä½“æ˜¯æ€ä¹ˆåšçš„</h4><p>HTTPSå’ŒHTTPå”¯ä¸€çš„åŒºåˆ«å°±æ˜¯HTTPSä½¿ç”¨TLS&#x2F;SSLæ¥åŠ å¯†æ™®é€šçš„HTTPè¯·æ±‚å’Œå“åº”ã€‚</p><p>å…³äºhttpså…·ä½“æ˜¯å¦‚ä½•åšçš„ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªå‚è€ƒåšæ–‡é“¾æ¥ï¼Œå†™çš„è¶…å¥½ï¼ˆå‚è€ƒé“¾æ¥ï¼š<a href="https://www.runoob.com/w3cnote/http-vs-https.html%EF%BC%89">https://www.runoob.com/w3cnote/http-vs-https.htmlï¼‰</a></p><h4 id="gdbä¸­ï¼Œå¦‚ä½•æŸ¥çœ‹æ¯ä¸ªçº¿ç¨‹ç›¸å…³çš„ä¿¡æ¯"><a href="#gdbä¸­ï¼Œå¦‚ä½•æŸ¥çœ‹æ¯ä¸ªçº¿ç¨‹ç›¸å…³çš„ä¿¡æ¯" class="headerlink" title="gdbä¸­ï¼Œå¦‚ä½•æŸ¥çœ‹æ¯ä¸ªçº¿ç¨‹ç›¸å…³çš„ä¿¡æ¯"></a>gdbä¸­ï¼Œå¦‚ä½•æŸ¥çœ‹æ¯ä¸ªçº¿ç¨‹ç›¸å…³çš„ä¿¡æ¯</h4><p>åœ¨ gdb ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ <code>info threads</code> å‘½ä»¤æŸ¥çœ‹å½“å‰è¿›ç¨‹ä¸­çš„æ‰€æœ‰çº¿ç¨‹ä¿¡æ¯ã€‚è¿™ä¸ªå‘½ä»¤ä¼šåˆ—å‡ºæ¯ä¸ªçº¿ç¨‹çš„ç¼–å·ã€çŠ¶æ€ï¼ˆå¦‚è¿è¡Œã€æŒ‚èµ·ç­‰ï¼‰ä»¥åŠå½“å‰æ‰€åœ¨çš„å‡½æ•°åç§°ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">(gdb) info threads</span><br><span class="line">  Id   Target Id         Frame </span><br><span class="line">  2    Thread 0x7ffff7fc8700 (LWP 13627) <span class="string">&quot;main&quot;</span> __libc_start_main (argc=1, argv=0x7fffffffe4c8, <span class="built_in">env</span>=0x7fffffffe4d8,</span><br><span class="line">      auxvec=0x7fffffffe4d8, fini=&lt;optimized out&gt;, rtld_fini=&lt;optimized out&gt;, stack_end=0x7fffffffe4c8) at ../csu/libc-start.c:310</span><br><span class="line">  3    Thread 0x7ffff77c7700 (LWP 13628) <span class="string">&quot;main&quot;</span> foo () at test.c:6</span><br><span class="line">  4    Thread 0x7ffff6fc6700 (LWP 13629) <span class="string">&quot;main&quot;</span> bar () at test.c:11</span><br></pre></td></tr></table></figure><p>ä½ è¿˜å¯ä»¥ä½¿ç”¨ <code>thread &lt;thread-id&gt;</code> å‘½ä»¤æ¥åˆ‡æ¢åˆ°æŒ‡å®šçš„çº¿ç¨‹ï¼Œç„¶åä½¿ç”¨å…¶ä»– gdb å‘½ä»¤æ¥æŸ¥çœ‹çº¿ç¨‹çš„ä¿¡æ¯æˆ–è°ƒè¯•çº¿ç¨‹ã€‚</p><p>ä¾‹å¦‚ï¼Œä½ å¯ä»¥è¾“å…¥ <code>thread 3</code> å‘½ä»¤åˆ‡æ¢åˆ°ç¼–å·ä¸º 3 çš„çº¿ç¨‹ï¼Œç„¶åè¾“å…¥ <code>bt</code> å‘½ä»¤æ¥æŸ¥çœ‹çº¿ç¨‹çš„è°ƒç”¨å †æ ˆï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">(gdb) thread 3</span><br><span class="line">[Switching to thread 3 (Thread 0x7ffff77c7700 (LWP 13628))]</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">0  foo () at test.c:6</span></span><br><span class="line">(gdb) bt</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">0  foo () at test.c:6</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">1  0x00007ffff7bbb830 <span class="keyword">in</span> start_thread (arg=&lt;optimized out&gt;) at pthread_create.c:486</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">2  0x00007ffff78f95fd <span class="keyword">in</span> <span class="built_in">clone</span> () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:95</span></span><br></pre></td></tr></table></figure><h4 id="æ„é€ å‡½æ•°ä¸­èƒ½è°ƒç”¨è™šå‡½æ•°å—ï¼Œå¦‚æœè°ƒç”¨è™šå‡½æ•°ï¼Œä¼šå‡ºç°ä»€ä¹ˆé—®é¢˜ï¼Œå†™ç¨‹åºéªŒè¯ï¼Œå¹¶ä»åŸç†ä¸Šåˆ†æåŸå› "><a href="#æ„é€ å‡½æ•°ä¸­èƒ½è°ƒç”¨è™šå‡½æ•°å—ï¼Œå¦‚æœè°ƒç”¨è™šå‡½æ•°ï¼Œä¼šå‡ºç°ä»€ä¹ˆé—®é¢˜ï¼Œå†™ç¨‹åºéªŒè¯ï¼Œå¹¶ä»åŸç†ä¸Šåˆ†æåŸå› " class="headerlink" title="æ„é€ å‡½æ•°ä¸­èƒ½è°ƒç”¨è™šå‡½æ•°å—ï¼Œå¦‚æœè°ƒç”¨è™šå‡½æ•°ï¼Œä¼šå‡ºç°ä»€ä¹ˆé—®é¢˜ï¼Œå†™ç¨‹åºéªŒè¯ï¼Œå¹¶ä»åŸç†ä¸Šåˆ†æåŸå› "></a>æ„é€ å‡½æ•°ä¸­èƒ½è°ƒç”¨è™šå‡½æ•°å—ï¼Œå¦‚æœè°ƒç”¨è™šå‡½æ•°ï¼Œä¼šå‡ºç°ä»€ä¹ˆé—®é¢˜ï¼Œå†™ç¨‹åºéªŒè¯ï¼Œå¹¶ä»åŸç†ä¸Šåˆ†æåŸå› </h4><p>æ„é€ å‡½æ•°ä»è¯­æ³•ä¸Šè°ƒç”¨è™šå‡½æ•°æ²¡æœ‰ä»»ä½•é—®é¢˜ï¼Œä½†è¿™æ ·åšå¯èƒ½å¹¶ä¸ä¼šè¾¾åˆ°é¢„æœŸçš„ç»“æœã€‚å› ä¸ºåœ¨æ„é€ å‡½æ•°æ‰§è¡ŒæœŸé—´ï¼Œå¯¹è±¡çš„è™šè¡¨ä»åœ¨è¢«è®¾ç½®ï¼Œå› æ­¤è°ƒç”¨çš„è™šå‡½æ•°ç‰ˆæœ¬å¯èƒ½å¹¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ç‰ˆæœ¬ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Base</span>&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Base</span>()&#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Base construct\n&quot;</span>;</span><br><span class="line">        <span class="built_in">call</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">call</span><span class="params">()</span> <span class="type">const</span></span>&#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Base call\n&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">virtual</span> ~<span class="built_in">Base</span>() &#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Derived</span> : <span class="keyword">public</span> Base&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Derived</span>()&#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Derived construct\n&quot;</span>;</span><br><span class="line">        <span class="built_in">call</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">call</span><span class="params">()</span> <span class="type">const</span> <span class="keyword">override</span></span>&#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Derived call\n&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">virtual</span> ~<span class="built_in">Derived</span>() &#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    Derived d;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯¹äºä¸Šé¢è¿™æ®µç¨‹åºï¼Œå¯èƒ½æˆ‘ä»¬æœŸæœ›å¾—åˆ°çš„ç»“æœæ˜¯</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Base constructor</span><br><span class="line">Derived call</span><br><span class="line">Derived constructor</span><br><span class="line">Derived call</span><br></pre></td></tr></table></figure><p>ä½†æˆ‘ä»¬å®é™…å¾—åˆ°çš„ç»“æœæ˜¯</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Base constructor</span><br><span class="line">Base call</span><br><span class="line">Derived constructor</span><br><span class="line">Derived call</span><br></pre></td></tr></table></figure><p>åŸå› æ˜¯åœ¨Baseæ„é€ å‡½æ•°æ‰§è¡Œæ—¶ï¼ŒDerivedéƒ¨åˆ†çš„å¯¹è±¡è¿˜æ²¡æœ‰å®Œå…¨æ„é€ å‡ºæ¥ï¼Œå› æ­¤ï¼Œæ­¤æ—¶vtableä»ç„¶æŒ‡å‘Baseç±»çš„vtableã€‚å› æ­¤ï¼Œå½“åœ¨Baseæ„é€ å‡½æ•°ä¸­è°ƒç”¨callè™šå‡½æ•°æ—¶ï¼Œä»–ä¼šè°ƒç”¨Baseç‰ˆæœ¬ï¼Œè€Œä¸æ˜¯Derivedç‰ˆæœ¬ã€‚</p><p><strong>è¿™é‡Œå»¶ä¼¸ä¸€ä¸‹ä¸è¦åœ¨ææ„å‡½æ•°ä¸­è°ƒç”¨è™šå‡½æ•°çš„åŸå› </strong>ï¼šææ„å‡½æ•°æ˜¯ç”¨æ¥é”€æ¯ä¸€ä¸ªå¯¹è±¡çš„ï¼Œåœ¨é”€æ¯ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œå…ˆè°ƒç”¨å­ç±»çš„ææ„å‡½æ•°ï¼Œç„¶åå†è°ƒç”¨åŸºç±»çš„ææ„å‡½æ•°ã€‚æ‰€ä»¥åœ¨è°ƒç”¨åŸºç±»çš„ææ„å‡½æ•°æ—¶ï¼Œæ´¾ç”Ÿç±»å¯¹è±¡çš„æ•°æ®æˆå‘˜å·²ç»â€œé”€æ¯â€ï¼Œè¿™ä¸ªæ—¶å†è°ƒç”¨å­ç±»çš„è™šå‡½æ•°å·²ç»æ²¡æœ‰æ„ä¹‰äº†ã€‚</p><h4 id="è¿­ä»£å™¨çš„å®ç°"><a href="#è¿­ä»£å™¨çš„å®ç°" class="headerlink" title="è¿­ä»£å™¨çš„å®ç°"></a>è¿­ä»£å™¨çš„å®ç°</h4><p>å‚è€ƒé“¾æ¥ï¼š<a href="https://www.cnblogs.com/wengle520/p/12492708.html">https://www.cnblogs.com/wengle520/p/12492708.html</a></p><h4 id="epollçº¢é»‘æ ‘çš„ä½œç”¨"><a href="#epollçº¢é»‘æ ‘çš„ä½œç”¨" class="headerlink" title="epollçº¢é»‘æ ‘çš„ä½œç”¨"></a>epollçº¢é»‘æ ‘çš„ä½œç”¨</h4><p>ç®€å•ç‚¹è®²å°±æ˜¯åœ¨å†…æ ¸äº‹ä»¶è¡¨ä¸Šå¿«é€Ÿæ³¨å†Œ&#x2F;åˆ é™¤æ‰€éœ€è¿æ¥æ–‡ä»¶æè¿°ç¬¦ã€‚ä¸‹é¢ä¸¤ç¯‡æ–‡ç« åŸºæœ¬é˜è¿°äº†è¿™ä¸ªé—®é¢˜ï¼Œå¥½å¥½çœ‹ï¼</p><p><a href="https://cloud.tencent.com/developer/article/1862671">https://cloud.tencent.com/developer/article/1862671</a></p><p><a href="https://zhuanlan.zhihu.com/p/366955699">https://zhuanlan.zhihu.com/p/366955699</a></p><h4 id="ç”¨æˆ·æ€å’Œå†…æ ¸æ€åˆ†åˆ«ä¼šåšä»€ä¹ˆï¼Œæ€ä¹ˆåˆ‡æ¢çš„"><a href="#ç”¨æˆ·æ€å’Œå†…æ ¸æ€åˆ†åˆ«ä¼šåšä»€ä¹ˆï¼Œæ€ä¹ˆåˆ‡æ¢çš„" class="headerlink" title="ç”¨æˆ·æ€å’Œå†…æ ¸æ€åˆ†åˆ«ä¼šåšä»€ä¹ˆï¼Œæ€ä¹ˆåˆ‡æ¢çš„"></a>ç”¨æˆ·æ€å’Œå†…æ ¸æ€åˆ†åˆ«ä¼šåšä»€ä¹ˆï¼Œæ€ä¹ˆåˆ‡æ¢çš„</h4><p>å†…æ ¸ç©ºé—´ä¸»è¦è´Ÿè´£æ“ä½œç³»ç»Ÿå†…æ ¸çº¿ç¨‹ä»¥åŠç”¨æˆ·ç¨‹åºç³»ç»Ÿè°ƒç”¨ã€‚</p><p>ç”¨æˆ·ç©ºé—´ä¸»è¦è´Ÿè´£ç”¨æˆ·ç¨‹åºçš„éç³»ç»Ÿè°ƒç”¨ã€‚</p><p>ä»ç”¨æˆ·æ€åˆ‡æ¢åˆ°å†…æ ¸æ€ä¸»è¦æœ‰ä¸‰ç§æ–¹å¼ï¼š</p><ol><li>ç³»ç»Ÿè°ƒç”¨ï¼šç³»ç»Ÿè°ƒç”¨æœ¬èº«å°±æ˜¯ä¸­æ–­ï¼Œä½†æ˜¯<strong>è½¯ä»¶ä¸­æ–­</strong>ï¼Œè·Ÿç¡¬ä¸­æ–­ä¸åŒã€‚ç³»ç»Ÿè°ƒç”¨æœºåˆ¶æ˜¯ä½¿ç”¨äº†æ“ä½œç³»ç»Ÿä¸ºç”¨æˆ·ç‰¹åˆ«å¼€æ”¾çš„ä¸€ä¸ªä¸­æ–­æ¥å®ç°ï¼Œå¦‚ Linux çš„ int 80h ä¸­æ–­ã€‚</li><li>å¼‚å¸¸ï¼šå¦‚æœå½“å‰è¿›ç¨‹è¿è¡Œåœ¨ç”¨æˆ·æ€ï¼Œå¦‚æœè¿™ä¸ªæ—¶å€™å‘ç”Ÿäº†å¼‚å¸¸äº‹ä»¶ï¼Œä¼šè§¦å‘ç”±å½“å‰è¿è¡Œè¿›ç¨‹åˆ‡æ¢åˆ°å¤„ç†æ­¤å¼‚å¸¸çš„å†…æ ¸ç›¸å…³è¿›ç¨‹ä¸­</li><li>å¤–å›´è®¾å¤‡ä¸­æ–­ï¼šå¤–å›´è®¾å¤‡å®Œæˆç”¨æˆ·è¯·æ±‚çš„æ“ä½œä¹‹åï¼Œä¼šå‘CPUå‘å‡ºä¸­æ–­ä¿¡å·ï¼Œè¿™æ—¶CPUä¼šè½¬å»å¤„ç†å¯¹åº”çš„ä¸­æ–­å¤„ç†ç¨‹åºã€‚</li></ol><p>æœ‰ä¸€ä¸ªé¢è¯•é—®é¢˜ï¼šI&#x2F;Oé¢‘ç¹å‘ç”Ÿå†…æ ¸æ€å’Œç”¨æˆ·æ€åˆ‡æ¢ï¼Œæ€ä¹ˆè§£å†³ï¼Ÿ</p><p>ç­”æ¡ˆï¼šä½¿ç”¨ç”¨æˆ·è¿›ç¨‹ç¼“å†²åŒºã€‚</p><p>ç”¨æˆ·è¿›ç¨‹ç¼“å†²åŒº</p><p>ä½ çœ‹ä¸€äº›ç¨‹åºåœ¨è¯»å–æ–‡ä»¶æ—¶ï¼Œä¼šå…ˆç”³è¯·ä¸€å—å†…å­˜æ•°ç»„ï¼Œç§°ä¸ºbufferï¼Œç„¶åæ¯æ¬¡è°ƒç”¨readï¼Œè¯»å–è®¾å®šå­—èŠ‚é•¿åº¦çš„æ•°æ®ï¼Œå†™å…¥bufferã€‚ä¹‹åçš„ç¨‹åºéƒ½æ˜¯ä»bufferä¸­è·å–æ•°æ®ï¼Œå½“bufferä½¿ç”¨å®Œåï¼Œåœ¨è¿›è¡Œä¸‹ä¸€æ¬¡è°ƒç”¨ï¼Œå¡«å……bufferã€‚æ‰€ä»¥è¯´ï¼šç”¨æˆ·ç¼“å†²åŒºçš„ç›®çš„å°±æ˜¯æ˜¯ä¸ºäº†å‡å°‘ç³»ç»Ÿè°ƒç”¨æ¬¡æ•°ï¼Œä»è€Œé™ä½æ“ä½œç³»ç»Ÿåœ¨ç”¨æˆ·æ€ä¸æ ¸å¿ƒæ€åˆ‡æ¢æ‰€è€—è´¹çš„æ—¶é—´ã€‚é™¤äº†åœ¨è¿›ç¨‹ä¸­è®¾è®¡ç¼“å†²åŒºï¼Œå†…æ ¸ä¹Ÿæœ‰è‡ªå·±çš„ç¼“å†²åŒºã€‚</p><p>å†…æ ¸ç¼“å­˜åŒº</p><p>å½“ä¸€ä¸ªç”¨æˆ·è¿›ç¨‹è¦ä»ç£ç›˜è¯»å–æ•°æ®æ—¶ï¼Œå†…æ ¸ä¸€èˆ¬ä¸ç›´æ¥è¯»ç£ç›˜ï¼Œè€Œæ˜¯å°†å†…æ ¸ç¼“å†²åŒºä¸­çš„æ•°æ®å¤åˆ¶åˆ°è¿›ç¨‹ç¼“å†²åŒºä¸­ã€‚ä½†è‹¥æ˜¯å†…æ ¸ç¼“å†²åŒºä¸­æ²¡æœ‰æ•°æ®ï¼Œå†…æ ¸ä¼šæŠŠå¯¹æ•°æ®å—çš„è¯·æ±‚ï¼ŒåŠ å…¥åˆ°è¯·æ±‚é˜Ÿåˆ—ï¼Œç„¶åæŠŠè¿›ç¨‹æŒ‚èµ·ï¼Œä¸ºå…¶å®ƒè¿›ç¨‹æä¾›æœåŠ¡ã€‚ç­‰åˆ°æ•°æ®å·²ç»è¯»å–åˆ°å†…æ ¸ç¼“å†²åŒºæ—¶ï¼ŒæŠŠå†…æ ¸ç¼“å†²åŒºä¸­çš„æ•°æ®è¯»å–åˆ°ç”¨æˆ·è¿›ç¨‹ä¸­ï¼Œæ‰ä¼šé€šçŸ¥è¿›ç¨‹ï¼Œå½“ç„¶ä¸åŒçš„IOæ¨¡å‹ï¼Œåœ¨è°ƒåº¦å’Œä½¿ç”¨å†…æ ¸ç¼“å†²åŒºçš„æ–¹å¼ä¸Šæœ‰æ‰€ä¸åŒã€‚</p><p>å‚è€ƒé“¾æ¥ï¼š</p><p><a href="https://blog.csdn.net/qq_42052956/article/details/111562280">https://blog.csdn.net/qq_42052956/article/details/111562280</a></p><p><a href="https://cloud.tencent.com/developer/article/2131401">https://cloud.tencent.com/developer/article/2131401</a></p><h4 id="è¿›ç¨‹çš„åˆ›å»ºéœ€è¦ç³»ç»Ÿåˆ†é…ä»€ä¹ˆèµ„æº"><a href="#è¿›ç¨‹çš„åˆ›å»ºéœ€è¦ç³»ç»Ÿåˆ†é…ä»€ä¹ˆèµ„æº" class="headerlink" title="è¿›ç¨‹çš„åˆ›å»ºéœ€è¦ç³»ç»Ÿåˆ†é…ä»€ä¹ˆèµ„æº"></a>è¿›ç¨‹çš„åˆ›å»ºéœ€è¦ç³»ç»Ÿåˆ†é…ä»€ä¹ˆèµ„æº</h4><p>æ ¹æ®å…¶ä»–åšå®¢é‡Œå†™çš„åº•å±‚æºç æ¥çœ‹ï¼Œåˆ†é…ç»™ä¸€ä¸ªè¿›ç¨‹çš„ä¸œè¥¿å¤ªå¤šå•¦ï¼Œæˆ‘ä»¬æŒ‘å‡ ä¸ªè®°ä¸€ä¸‹ï¼šå†…å­˜ã€CPUå¤„ç†æ—¶é—´ã€è¾“å…¥è¾“å‡ºè®¾å¤‡ã€å­˜å‚¨ç©ºé—´ã€‚</p><p>å‚è€ƒé“¾æ¥ï¼š</p><p><a href="https://blog.csdn.net/lvyibin890/article/details/82193900">https://blog.csdn.net/lvyibin890/article/details/82193900</a></p><p><a href="https://juejin.cn/s/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%BB%99%E8%BF%9B%E7%A8%8B%E5%88%86%E9%85%8D%E4%BB%80%E4%B9%88%E8%B5%84%E6%BA%90">https://juejin.cn/s/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%BB%99%E8%BF%9B%E7%A8%8B%E5%88%86%E9%85%8D%E4%BB%80%E4%B9%88%E8%B5%84%E6%BA%90</a></p><h4 id="HTTPSåŠ å¯†æ–¹å¼ï¼šå¯¹ç§°åŠ å¯†ã€éå¯¹ç§°åŠ å¯†"><a href="#HTTPSåŠ å¯†æ–¹å¼ï¼šå¯¹ç§°åŠ å¯†ã€éå¯¹ç§°åŠ å¯†" class="headerlink" title="HTTPSåŠ å¯†æ–¹å¼ï¼šå¯¹ç§°åŠ å¯†ã€éå¯¹ç§°åŠ å¯†"></a>HTTPSåŠ å¯†æ–¹å¼ï¼šå¯¹ç§°åŠ å¯†ã€éå¯¹ç§°åŠ å¯†</h4><p>å¯¹ç§°åŠ å¯†ï¼šå¯†é’¥åªæœ‰ä¸€ä¸ªï¼ŒåŠ å¯†è§£å¯†ä¸ºåŒä¸€ä¸ªå¯†ç ã€‚åˆ©ç”¨è¿™ç§åŠ å¯†æ–¹å¼æ—¶å¿…é¡»æŠŠå¯†é’¥ä¹Ÿå‘é€ç»™å¯¹æ–¹ï¼Œå¯†é’¥åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­è¢«çªƒå–ï¼Œä¹Ÿå°±å¤±å»äº†åŠ å¯†çš„æ„ä¹‰ã€‚</p><p>éå¯¹ç§°åŠ å¯†ï¼šå¯†é’¥æˆå¯¹å‡ºç°ï¼Œå…¬é’¥åŠ å¯†éœ€è¦ç§é’¥è§£å¯†ï¼Œç§é’¥åŠ å¯†éœ€è¦å…¬é’¥è§£å¯†ã€‚</p><p>å‚è€ƒé“¾æ¥ï¼š</p><p><a href="https://www.runoob.com/w3cnote/http-vs-https.html">https://www.runoob.com/w3cnote/http-vs-https.html</a></p><p><a href="https://www.itwork.club/2022/05/27/why-did-https-use-mixed-encryption-algorithm/">https://www.itwork.club/2022/05/27/why-did-https-use-mixed-encryption-algorithm/</a></p><h4 id="çº¿ç¨‹çš„ä¸‰ç§çŠ¶æ€"><a href="#çº¿ç¨‹çš„ä¸‰ç§çŠ¶æ€" class="headerlink" title="çº¿ç¨‹çš„ä¸‰ç§çŠ¶æ€"></a>çº¿ç¨‹çš„ä¸‰ç§çŠ¶æ€</h4><p>å°±ç»ªæ€ã€è¿è¡Œæ€ã€é˜»å¡æ€</p><h4 id="ææ„å‡½æ•°é‡Œèƒ½ä¸èƒ½æŠ›å¼‚å¸¸-ä¸ºä»€ä¹ˆï¼Ÿ"><a href="#ææ„å‡½æ•°é‡Œèƒ½ä¸èƒ½æŠ›å¼‚å¸¸-ä¸ºä»€ä¹ˆï¼Ÿ" class="headerlink" title="ææ„å‡½æ•°é‡Œèƒ½ä¸èƒ½æŠ›å¼‚å¸¸?ä¸ºä»€ä¹ˆï¼Ÿ"></a>ææ„å‡½æ•°é‡Œèƒ½ä¸èƒ½æŠ›å¼‚å¸¸?ä¸ºä»€ä¹ˆï¼Ÿ</h4><p>ææ„å‡½æ•°ä»è¯­æ³•ä¸Šæ˜¯å¯ä»¥æŠ›å‡ºå¼‚å¸¸çš„ï¼Œä½†æ˜¯è¿™æ ·åšå¾ˆå±é™©ï¼Œè¯·å°½é‡ä¸è¦è¿™è¦åšã€‚åŸå› åœ¨ã€ŠMore Effective C++ã€‹ä¸­æåˆ°ä¸¤ä¸ªï¼š </p><p>ï¼ˆ1ï¼‰å¦‚æœææ„å‡½æ•°æŠ›å‡ºå¼‚å¸¸ï¼Œåˆ™å¼‚å¸¸ç‚¹ä¹‹åçš„ç¨‹åºä¸ä¼šæ‰§è¡Œï¼Œå¦‚æœææ„å‡½æ•°åœ¨å¼‚å¸¸ç‚¹ä¹‹åæ‰§è¡Œäº†æŸäº›å¿…è¦çš„åŠ¨ä½œæ¯”å¦‚é‡Šæ”¾æŸäº›èµ„æºï¼Œåˆ™è¿™äº›åŠ¨ä½œä¸ä¼šæ‰§è¡Œï¼Œä¼šé€ æˆè¯¸å¦‚èµ„æºæ³„æ¼çš„é—®é¢˜ã€‚ </p><p>ï¼ˆ2ï¼‰é€šå¸¸å¼‚å¸¸å‘ç”Ÿæ—¶ï¼Œc++çš„å¼‚å¸¸å¤„ç†æœºåˆ¶åœ¨å¼‚å¸¸çš„ä¼ æ’­è¿‡ç¨‹ä¸­ä¼šè¿›è¡Œæ ˆå±•å¼€ï¼ˆstack-unwindingï¼‰ï¼Œå› å‘ç”Ÿå¼‚å¸¸è€Œé€æ­¥é€€å‡ºå¤åˆè¯­å¥å’Œå‡½æ•°å®šä¹‰çš„è¿‡ç¨‹ï¼Œè¢«ç§°ä¸ºæ ˆå±•å¼€ã€‚åœ¨æ ˆå±•å¼€çš„è¿‡ç¨‹ä¸­å°±ä¼šè°ƒç”¨å·²ç»åœ¨æ ˆæ„é€ å¥½çš„å¯¹è±¡çš„ææ„å‡½æ•°æ¥é‡Šæ”¾èµ„æºï¼Œæ­¤æ—¶è‹¥å…¶ä»–ææ„å‡½æ•°æœ¬èº«ä¹ŸæŠ›å‡ºå¼‚å¸¸ï¼Œåˆ™å‰ä¸€ä¸ªå¼‚å¸¸å°šæœªå¤„ç†ï¼Œåˆæœ‰æ–°çš„å¼‚å¸¸ï¼Œä¼šé€ æˆç¨‹åºå´©æºƒã€‚</p><h4 id="ä¸¤ä¸ªç±»é‡Œæœ‰ç›¸åŒçš„æˆå‘˜ï¼ŒåŒºåˆ«åœ¨äºä¸€ä¸ªæœ‰è™šå‡½æ•°ï¼Œä¸€ä¸ªæ²¡æœ‰ï¼Œå“ªä¸ªå†…å­˜å¤§ï¼Ÿ"><a href="#ä¸¤ä¸ªç±»é‡Œæœ‰ç›¸åŒçš„æˆå‘˜ï¼ŒåŒºåˆ«åœ¨äºä¸€ä¸ªæœ‰è™šå‡½æ•°ï¼Œä¸€ä¸ªæ²¡æœ‰ï¼Œå“ªä¸ªå†…å­˜å¤§ï¼Ÿ" class="headerlink" title="ä¸¤ä¸ªç±»é‡Œæœ‰ç›¸åŒçš„æˆå‘˜ï¼ŒåŒºåˆ«åœ¨äºä¸€ä¸ªæœ‰è™šå‡½æ•°ï¼Œä¸€ä¸ªæ²¡æœ‰ï¼Œå“ªä¸ªå†…å­˜å¤§ï¼Ÿ"></a>ä¸¤ä¸ªç±»é‡Œæœ‰ç›¸åŒçš„æˆå‘˜ï¼ŒåŒºåˆ«åœ¨äºä¸€ä¸ªæœ‰è™šå‡½æ•°ï¼Œä¸€ä¸ªæ²¡æœ‰ï¼Œå“ªä¸ªå†…å­˜å¤§ï¼Ÿ</h4><p>æœ‰è™šå‡½æ•°çš„å¤§ï¼Œå› ä¸ºæœ‰è™šå‡½æ•°çš„ç±»çš„ä¼šåŒ…å«ä¸€ä¸ªè™šå‡½æ•°æŒ‡é’ˆã€‚æ³¨æ„ä¸åŒæ“ä½œç³»ç»ŸæŒ‡é’ˆå¤§å°ä¸ä¸€æ ·ã€‚</p><p>å‚è€ƒé“¾æ¥ï¼š<a href="https://blog.csdn.net/luolaihua2018/article/details/110736211">https://blog.csdn.net/luolaihua2018/article/details/110736211</a></p><h4 id="æ•°æ®æŠ¥å’Œæ•°æ®æµçš„åŒºåˆ«ï¼Ÿ"><a href="#æ•°æ®æŠ¥å’Œæ•°æ®æµçš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="æ•°æ®æŠ¥å’Œæ•°æ®æµçš„åŒºåˆ«ï¼Ÿ"></a>æ•°æ®æŠ¥å’Œæ•°æ®æµçš„åŒºåˆ«ï¼Ÿ</h4><p>å¯ä»¥è¿™ä¹ˆç®€å•ç†è§£ï¼š</p><p>å‡è®¾ç°åœ¨æœ‰100å­—èŠ‚æ•°æ®ï¼Œé¢å‘æ•°æ®æµå’Œé¢å‘æ•°æ®æŠ¥çš„è¿æ¥å¯ä»¥åˆ†åˆ«æ€ä¹ˆæ ·å¤„ç†å‘¢ï¼Ÿ</p><ul><li>æ•°æ®æµæ˜¯å‘é€ç«¯å¯ä»¥è°ƒç”¨10æ¬¡writeï¼Œæ¯æ¬¡10å­—èŠ‚ã€‚æ¥æ”¶ç«¯è°ƒç”¨ä¸€æ¬¡readã€‚ä¹Ÿå¯ä»¥æ˜¯å‘é€ç«¯è°ƒç”¨ä¸€æ¬¡writeï¼Œæ¥æ”¶ç«¯è°ƒç”¨10æ¬¡readã€‚æ•°æ®æµæ˜¯æ²¡æœ‰è¾¹ç•Œçš„</li><li>æ•°æ®æŠ¥åˆ™æ˜¯ä¸€æ¬¡writeå°±éœ€è¦ä¸€æ¬¡readï¼Œæ˜¯æœ‰è¾¹ç•Œçš„ã€‚</li></ul><h4 id="åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œå¦‚æœæŸä¸ªèŠ‚ç‚¹å®•æœºäº†å’‹åŠï¼Ÿ"><a href="#åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œå¦‚æœæŸä¸ªèŠ‚ç‚¹å®•æœºäº†å’‹åŠï¼Ÿ" class="headerlink" title="åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œå¦‚æœæŸä¸ªèŠ‚ç‚¹å®•æœºäº†å’‹åŠï¼Ÿ"></a>åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œå¦‚æœæŸä¸ªèŠ‚ç‚¹å®•æœºäº†å’‹åŠï¼Ÿ</h4><p>åšä¸€ä¸ªæ•°æ®å‰¯æœ¬ç­–ç•¥ï¼ŒæŠŠæ¯ä¸€å°æœºå™¨ä¸Šçš„æ•°æ®åšå‡ ä¸ªå‰¯æœ¬çš„å†—ä½™ï¼Œæ”¾åœ¨åˆ«çš„æœºå™¨ä¸Šã€‚ä¸‡ä¸€è¯´æŸä¸€å°æœºå™¨å®•æœºï¼Œæ²¡äº‹å•Šï¼Œå› ä¸ºå…¶ä»–æœºå™¨ä¸Šè¿˜æœ‰ä»–çš„å‰¯æœ¬ã€‚</p><h4 id="è‡ªæ—‹é”"><a href="#è‡ªæ—‹é”" class="headerlink" title="è‡ªæ—‹é”"></a>è‡ªæ—‹é”</h4><p>æ‰€è°“è‡ªæ—‹é”å°±æ˜¯é€šè¿‡whileå¾ªç¯å®ç°çš„ï¼Œè®©æ‹¿åˆ°é”çš„çº¿ç¨‹è¿›å…¥ä¸´ç•ŒåŒºæ‰§è¡Œä»£ç ï¼Œè®©æ²¡æœ‰æ‹¿åˆ°é”çš„çº¿ç¨‹ä¸€ç›´è¿›è¡Œwhileæ­»å¾ªç¯ï¼Œè¿™å…¶å®å°±æ˜¯çº¿ç¨‹è‡ªå·±â€œæ—‹â€åœ¨whileå¾ªç¯äº†ï¼Œå› è€Œè¿™ç§é”å°±å«åšè‡ªæ—‹é”ã€‚</p><p>è‡ªæ—‹é”å®ç°å‚è€ƒé“¾æ¥ï¼š<a href="https://blog.csdn.net/jeffasd/article/details/80661804">https://blog.csdn.net/jeffasd/article/details/80661804</a></p><h4 id="çº¿ç¨‹åŒæ­¥çš„æ–¹å¼æœ‰å“ªäº›"><a href="#çº¿ç¨‹åŒæ­¥çš„æ–¹å¼æœ‰å“ªäº›" class="headerlink" title="çº¿ç¨‹åŒæ­¥çš„æ–¹å¼æœ‰å“ªäº›"></a>çº¿ç¨‹åŒæ­¥çš„æ–¹å¼æœ‰å“ªäº›</h4><p>äº’æ–¥é”ã€ä¿¡å·é‡ã€æ¡ä»¶å˜é‡ã€è‡ªæ—‹é”ã€è¯»å†™é”ã€å±éšœ</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h4 id=&quot;newå’Œmallocçš„åŒºåˆ«&quot;&gt;&lt;a href=&quot;#newå’Œmallocçš„åŒºåˆ«&quot; class=&quot;headerlink&quot; title=&quot;newå’Œmallocçš„åŒºåˆ«&quot;&gt;&lt;/a&gt;newå’Œmallocçš„åŒºåˆ«&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;å±æ€§çš„åŒºåˆ«&lt;/p&gt;
&lt;p&gt;new&amp;</summary>
      
    
    
    
    
  </entry>
  
</feed>
